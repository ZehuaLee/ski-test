<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: DrainManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DrainManager Class Reference</h1><!-- doxytag: class="DrainManager" -->
<p>This class coordinates draining of a <a class="el" href="classSystem.html">System</a>.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="drain_8hh_source.html">drain.hh</a>&gt;</code></p>

<p><a href="classDrainManager-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#aba73431ea98bae43f9bb07892b4f461b">DrainManager</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#a0fe1e9064b94c3e060015f3aaa4a4fe1">~DrainManager</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#a648ad9500c79bf3da5c2970bda8ac69f">getCount</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the number of objects registered with this <a class="el" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> that are currently draining their state.  <a href="#a648ad9500c79bf3da5c2970bda8ac69f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#a056f59652f9d3b3a81e7b2867ca1fff2">setCount</a> (int count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#abd134e8277be09e702b63f36f6ee31d0">signalDrainDone</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Notify the <a class="el" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> that a <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> object has finished draining.  <a href="#abd134e8277be09e702b63f36f6ee31d0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#ab4e3bce58b6fb9a09772f6bea4950798">drainCycleDone</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classCallback.html" title="Generic callback class.">Callback</a> when all registered <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> objects have completed a drain cycle.  <a href="#ab4e3bce58b6fb9a09772f6bea4950798"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDrainManager.html#a7a3bb72edfbba49b8e5951584e9838d7">_count</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of objects still draining.  <a href="#a7a3bb72edfbba49b8e5951584e9838d7"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class coordinates draining of a <a class="el" href="classSystem.html">System</a>. </p>
<p>When draining a <a class="el" href="classSystem.html">System</a>, we need to make sure that all SimObjects in that system have drained their state before declaring the operation to be successful. This class keeps track of how many objects are still in the process of draining their state. Once it determines that all objects have drained their state, it exits the simulation loop.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>A <a class="el" href="classSystem.html">System</a> might not be completely drained even though the <a class="el" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> has caused the simulation loop to exit. Draining needs to be restarted until all <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> objects declare that they don't need further simulation to be completely drained. See <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> for more information. </dd></dl>

<p>Definition at line <a class="el" href="drain_8hh_source.html#l00066">66</a> of file <a class="el" href="drain_8hh_source.html">drain.hh</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aba73431ea98bae43f9bb07892b4f461b"></a><!-- doxytag: member="DrainManager::DrainManager" ref="aba73431ea98bae43f9bb07892b4f461b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrainManager::DrainManager </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="drain_8cc_source.html#l00043">43</a> of file <a class="el" href="drain_8cc_source.html">drain.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a0fe1e9064b94c3e060015f3aaa4a4fe1"></a><!-- doxytag: member="DrainManager::~DrainManager" ref="a0fe1e9064b94c3e060015f3aaa4a4fe1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DrainManager::~DrainManager </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="drain_8cc_source.html#l00048">48</a> of file <a class="el" href="drain_8cc_source.html">drain.cc</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ab4e3bce58b6fb9a09772f6bea4950798"></a><!-- doxytag: member="DrainManager::drainCycleDone" ref="ab4e3bce58b6fb9a09772f6bea4950798" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DrainManager::drainCycleDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classCallback.html" title="Generic callback class.">Callback</a> when all registered <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> objects have completed a drain cycle. </p>

<p>Definition at line <a class="el" href="drain_8cc_source.html#l00053">53</a> of file <a class="el" href="drain_8cc_source.html">drain.cc</a>.</p>

<p>References <a class="el" href="sim__events_8cc_source.html#l00083">exitSimLoop()</a>.</p>

<p>Referenced by <a class="el" href="drain_8hh_source.html#l00086">signalDrainDone()</a>.</p>

</div>
</div>
<a class="anchor" id="a648ad9500c79bf3da5c2970bda8ac69f"></a><!-- doxytag: member="DrainManager::getCount" ref="a648ad9500c79bf3da5c2970bda8ac69f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int DrainManager::getCount </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the number of objects registered with this <a class="el" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> that are currently draining their state. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of objects currently draining. </dd></dl>

<p>Definition at line <a class="el" href="drain_8hh_source.html#l00078">78</a> of file <a class="el" href="drain_8hh_source.html">drain.hh</a>.</p>

<p>References <a class="el" href="drain_8hh_source.html#l00100">_count</a>.</p>

</div>
</div>
<a class="anchor" id="a056f59652f9d3b3a81e7b2867ca1fff2"></a><!-- doxytag: member="DrainManager::setCount" ref="a056f59652f9d3b3a81e7b2867ca1fff2" args="(int count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DrainManager::setCount </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="drain_8hh_source.html#l00080">80</a> of file <a class="el" href="drain_8hh_source.html">drain.hh</a>.</p>

<p>References <a class="el" href="drain_8hh_source.html#l00100">_count</a>.</p>

</div>
</div>
<a class="anchor" id="abd134e8277be09e702b63f36f6ee31d0"></a><!-- doxytag: member="DrainManager::signalDrainDone" ref="abd134e8277be09e702b63f36f6ee31d0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DrainManager::signalDrainDone </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify the <a class="el" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> that a <a class="el" href="classDrainable.html" title="Interface for objects that might require draining before checkpointing.">Drainable</a> object has finished draining. </p>

<p>Definition at line <a class="el" href="drain_8hh_source.html#l00086">86</a> of file <a class="el" href="drain_8hh_source.html">drain.hh</a>.</p>

<p>References <a class="el" href="drain_8hh_source.html#l00100">_count</a>, and <a class="el" href="drain_8cc_source.html#l00053">drainCycleDone()</a>.</p>

<p>Referenced by <a class="el" href="i8254xGBe_8cc_source.html#l02097">IGbE::checkDrain()</a>, <a class="el" href="ufs__device_8cc_source.html#l02349">UFSHostDevice::checkDrain()</a>, <a class="el" href="flash__device_8cc_source.html#l00617">FlashDevice::checkDrain()</a>, <a class="el" href="table__walker_8cc_source.html#l00138">ArmISA::TableWalker::completeDrain()</a>, <a class="el" href="mshr__queue_8cc_source.html#l00172">MSHRQueue::deallocateOne()</a>, <a class="el" href="simple__mem_8cc_source.html#l00186">SimpleMemory::dequeue()</a>, <a class="el" href="dma__device_8cc_source.html#l00059">DmaPort::handleResp()</a>, <a class="el" href="copy__engine_8cc_source.html#l00636">CopyEngine::CopyEngineChannel::inDrain()</a>, <a class="el" href="dram__ctrl_8cc_source.html#l01257">DRAMCtrl::processNextReqEvent()</a>, <a class="el" href="dram__ctrl_8cc_source.html#l00705">DRAMCtrl::processRespondEvent()</a>, <a class="el" href="traffic__gen_8cc_source.html#l00474">TrafficGen::recvReqRetry()</a>, <a class="el" href="xbar_8cc_source.html#l00240">BaseXBar::Layer&lt; SrcType, DstType &gt;::releaseLayer()</a>, <a class="el" href="packet__queue_8cc_source.html#l00176">PacketQueue::schedSendEvent()</a>, <a class="el" href="dramsim2_8cc_source.html#l00106">DRAMSim2::sendResponse()</a>, <a class="el" href="minor_2cpu_8cc_source.html#l00218">MinorCPU::signalDrainDone()</a>, <a class="el" href="RubyPort_8cc_source.html#l00387">RubyPort::testDrainComplete()</a>, <a class="el" href="DMASequencer_8cc_source.html#l00148">DMASequencer::testDrainComplete()</a>, <a class="el" href="timing_8cc_source.html#l00156">TimingSimpleCPU::tryCompleteDrain()</a>, <a class="el" href="atomic_8cc_source.html#l00178">AtomicSimpleCPU::tryCompleteDrain()</a>, <a class="el" href="o3_2cpu_8cc_source.html#l01059">FullO3CPU&lt; Impl &gt;::tryDrain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">BaseKvmCPU::tryDrain()</a>, and <a class="el" href="dramsim2_8cc_source.html#l00325">DRAMSim2::writeComplete()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a7a3bb72edfbba49b8e5951584e9838d7"></a><!-- doxytag: member="DrainManager::_count" ref="a7a3bb72edfbba49b8e5951584e9838d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int <a class="el" href="classDrainManager.html#a7a3bb72edfbba49b8e5951584e9838d7">DrainManager::_count</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of objects still draining. </p>

<p>Definition at line <a class="el" href="drain_8hh_source.html#l00100">100</a> of file <a class="el" href="drain_8hh_source.html">drain.hh</a>.</p>

<p>Referenced by <a class="el" href="drain_8hh_source.html#l00078">getCount()</a>, <a class="el" href="drain_8hh_source.html#l00080">setCount()</a>, and <a class="el" href="drain_8hh_source.html#l00086">signalDrainDone()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>sim/<a class="el" href="drain_8hh_source.html">drain.hh</a></li>
<li>sim/<a class="el" href="drain_8cc_source.html">drain.cc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:19 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
