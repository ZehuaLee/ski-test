<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: VirtIODeviceBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>VirtIODeviceBase Class Reference</h1><!-- doxytag: class="VirtIODeviceBase" --><!-- doxytag: inherits="SimObject" -->
<p>Base class for all VirtIO-based devices.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for VirtIODeviceBase:</div>
<div class="dynsection">
 <div class="center">
  <img src="classVirtIODeviceBase.gif" usemap="#VirtIODeviceBase_map" alt=""/>
  <map id="VirtIODeviceBase_map" name="VirtIODeviceBase_map">
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="184,56,297,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="61,0,174,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="184,0,297,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="307,0,420,24"/>
<area href="classVirtIO9PBase.html" alt="VirtIO9PBase" shape="rect" coords="61,168,174,192"/>
<area href="classVirtIOBlock.html" alt="VirtIOBlock" shape="rect" coords="184,168,297,192"/>
<area href="classVirtIOConsole.html" alt="VirtIOConsole" shape="rect" coords="307,168,420,192"/>
<area href="classVirtIO9PProxy.html" alt="VirtIO9PProxy" shape="rect" coords="61,224,174,248"/>
<area href="classVirtIO9PDiod.html" alt="VirtIO9PDiod" shape="rect" coords="0,280,113,304"/>
<area href="classVirtIO9PSocket.html" alt="VirtIO9PSocket" shape="rect" coords="123,280,236,304"/>
</map>
 </div>
</div>

<p><a href="classVirtIODeviceBase-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a61cd20b81c5465449dd2a39a35b26018">VirtAddress</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is a <a class="el" href="classVirtQueue.html" title="Base wrapper around a virtqueue.">VirtQueue</a> address as exposed through the low-level interface. The address needs to be multiplied by the page size (seems to be hardcoded to 4096 in the spec) to get the real physical address.  <a href="#a61cd20b81c5465449dd2a39a35b26018"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">DeviceId</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Device Type (sometimes known as subsystem ID).  <a href="#a1b22ed10b4e720755cb018308f9f6334"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a2fa7f27b22889bf562b00dac0e263ad7">BitUnion8</a> (DeviceStatus) Bitfield&lt; 7 &gt; failed</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a01568bd6744907d30ca3db431e227f5c">EndBitUnion</a> (DeviceStatus) typedef VirtIODeviceBaseParams <a class="el" href="classSimObject.html#a5ec10f06fd6e6061713b405aa822ae51">Params</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a37102de94c8ee9f4863011707bedfe5b">VirtIODeviceBase</a> (<a class="el" href="classSimObject.html#a5ec10f06fd6e6061713b405aa822ae51">Params</a> *params, <a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">DeviceId</a> id, size_t config_size, <a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a> features)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#afb28ab36c051245d095e1d75d7017eb4">~VirtIODeviceBase</a> ()</td></tr>
<tr><td colspan="2"><div class="groupHeader">SimObject Interfaces</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp514d95157490a59db7e0e961b7e38b2f"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a9409147a12d59e1168cc3a6061dd72d8">serialize</a> (std::ostream &amp;os)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a78dc1e84fd27cbf142616efd20fa1764">unserialize</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Optional VirtIO Interfaces</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd45be43c5e6fa95f403f4162bf3c00a9"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a67726d16881dc7542fb4466b70a79f0f">readConfig</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> cfgOffset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from the configuration space of a device.  <a href="#a67726d16881dc7542fb4466b70a79f0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a722e47f470225e82c452eda795f34758">writeConfig</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> cfgOffset)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write to the configuration space of a device.  <a href="#a722e47f470225e82c452eda795f34758"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#ad6665bf85dfba4ae91510c5bd25300d8">reset</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Driver-request device reset.  <a href="#ad6665bf85dfba4ae91510c5bd25300d8"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 2 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a8a5af8337598ec43bb6f65df97e5de59">driver_ok</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 1 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a77d5f282ccb6ab2f908319f0f98b5eac">driver</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Bitfield&lt; 0 &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a4fa3b4cd2c26ea6ad086daa708c54e58">acknowledge</a></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Device Model Helpers</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp7cef4aeae6b4e04f74178d08a98ba8cf"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a26ca8575426db806e0b7b238b0bc248b">readConfigBlob</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> cfgOffset, const uint8_t *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read configuration data from a device structure.  <a href="#a26ca8575426db806e0b7b238b0bc248b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#abb12c376fa0675dc5e35e553eb571906">writeConfigBlob</a> (<a class="el" href="classPacket.html">PacketPtr</a> pkt, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> cfgOffset, uint8_t *cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write configuration data to a device structure.  <a href="#abb12c376fa0675dc5e35e553eb571906"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classVirtQueue.html">VirtQueue</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#ab570a5b7395ed3208e66da98f0e31fd8">getCurrentQueue</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convenience method to get the currently selected queue.  <a href="#ab570a5b7395ed3208e66da98f0e31fd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVirtQueue.html">VirtQueue</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#ad385ecc4adce84e4c3bad54da1ca9b4b">getCurrentQueue</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convenience method to get the currently selected queue.  <a href="#ad385ecc4adce84e4c3bad54da1ca9b4b"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DeviceStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a94a282d3ffb4c86fd7151e06ab00af82">_deviceStatus</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Status of the device.  <a href="#a94a282d3ffb4c86fd7151e06ab00af82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a22a43c1cfdad92dcfb0c5a4215fc6e80">_queueSelect</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Queue select register (set by guest).  <a href="#a22a43c1cfdad92dcfb0c5a4215fc6e80"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classVirtQueue.html">VirtQueue</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a103f3d2d1f62bc52496a4d7061085f95">_queues</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of virtual queues supported by this device.  <a href="#a103f3d2d1f62bc52496a4d7061085f95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCallback.html">Callback</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a8f0e7bfbe1b83e5938928d5b15269dbd">transKick</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callbacks to kick the guest through the transport layer.  <a href="#a8f0e7bfbe1b83e5938928d5b15269dbd"></a><br/></td></tr>
<tr><td colspan="2"><h2>VirtIO Transport Interfaces</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpacf4c4a717279caa7d19015fddf56b77"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">DeviceId</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#aaf5651e207b1d055984a478c3326b69d">deviceId</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Device ID (sometimes known as subsystem ID).  <a href="#aaf5651e207b1d055984a478c3326b69d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#abbbf1eef529625b6c160f40c01e3ae90">configSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of the device's configuration space.  <a href="#abbbf1eef529625b6c160f40c01e3ae90"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a25e639c97dcca5bcdf40e5c176ece915">deviceFeatures</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Feature set offered by the device.  <a href="#a25e639c97dcca5bcdf40e5c176ece915"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a16c34b4aba4cdce263949afbc0d9e643">registerKickCallback</a> (<a class="el" href="classCallback.html">Callback</a> *c)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a callback to kick the guest through the transport interface.  <a href="#a16c34b4aba4cdce263949afbc0d9e643"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a5dbc32294e4bad4fd96c40a6c5128fe8">onNotify</a> (<a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a> index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Driver is requesting service.  <a href="#a5dbc32294e4bad4fd96c40a6c5128fe8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a47d9daeb2cc3b45d8df30d00e63917a0">setQueueSelect</a> (<a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a> idx)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change currently active queue.  <a href="#a47d9daeb2cc3b45d8df30d00e63917a0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a5ab062fafc8f60ef24fbb2db9223cfe7">getQueueSelect</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the currently active queue.  <a href="#a5ab062fafc8f60ef24fbb2db9223cfe7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a0a347f18db3d32186d74edb30ad4ffc5">setQueueAddress</a> (uint32_t address)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the host physical address of the currently active queue.  <a href="#a0a347f18db3d32186d74edb30ad4ffc5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a4953ea9530f167380ca8c00a13f31d52">getQueueAddress</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the host physical address of the currently active queue.  <a href="#a4953ea9530f167380ca8c00a13f31d52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a89775fdd932d7a74fff10fef8dc28510">getQueueSize</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the size (descriptors) of the currently active queue.  <a href="#a89775fdd932d7a74fff10fef8dc28510"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a5d795ebfece994be522e07b6ae57d82b">setDeviceStatus</a> (DeviceStatus status)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update device status and optionally reset device.  <a href="#a5d795ebfece994be522e07b6ae57d82b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DeviceStatus&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#ac038f8456a3a56299a781f39442f8b6e">getDeviceStatus</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve the device status.  <a href="#ac038f8456a3a56299a781f39442f8b6e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a1c4fa10c398091b8c6cf87709f7b9995">setGuestFeatures</a> (<a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a> features)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classSet.html">Set</a> feature bits accepted by the guest driver.  <a href="#a1c4fa10c398091b8c6cf87709f7b9995"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a8ac8cce84100e81e98c9b84742d4082f">getGuestFeatures</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get features accepted by the guest driver.  <a href="#a8ac8cce84100e81e98c9b84742d4082f"></a><br/></td></tr>
<tr><td colspan="2"><h2>Device Model Interfaces</h2></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrp15127cee3cd44e4fa52146588960ef3b"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a0cf2ec166fb5e27695cecea9baef6ea2">guestFeatures</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Feature set accepted by the guest.  <a href="#a0cf2ec166fb5e27695cecea9baef6ea2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#ad6ff618322afbcb64244fb7dc516609b">kick</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inform the guest of available buffers.  <a href="#ad6ff618322afbcb64244fb7dc516609b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html#a9056794510d9115331a2f4fc71957d62">registerQueue</a> (<a class="el" href="classVirtQueue.html">VirtQueue</a> &amp;queue)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Register a new <a class="el" href="classVirtQueue.html" title="Base wrapper around a virtqueue.">VirtQueue</a> with the device model.  <a href="#a9056794510d9115331a2f4fc71957d62"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Base class for all VirtIO-based devices. </p>
<p>This class implements the functionality of the VirtIO 0.9.5 specification. This version of VirtIO is also known as "legacy" in the VirtIO 1.0 specification from OASIS.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a href="https://github.com/rustyrussell/virtio-spec">https://github.com/rustyrussell/virtio-spec</a> </dd>
<dd>
<a href="http://docs.oasis-open.org/virtio/virtio/v1.0/virtio-v1.0.html">http://docs.oasis-open.org/virtio/virtio/v1.0/virtio-v1.0.html</a> </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00569">569</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>
<hr/><h2>Member Typedef Documentation</h2>
<a class="anchor" id="a1b22ed10b4e720755cb018308f9f6334"></a><!-- doxytag: member="VirtIODeviceBase::DeviceId" ref="a1b22ed10b4e720755cb018308f9f6334" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">VirtIODeviceBase::DeviceId</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Device Type (sometimes known as subsystem ID). </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00581">581</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="a7e1d97e8524192841f59e900860e3855"></a><!-- doxytag: member="VirtIODeviceBase::FeatureBits" ref="a7e1d97e8524192841f59e900860e3855" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">VirtIODeviceBase::FeatureBits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00573">573</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="a3f931bdf244c344bf0b266d790a8feff"></a><!-- doxytag: member="VirtIODeviceBase::QueueID" ref="a3f931bdf244c344bf0b266d790a8feff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">VirtIODeviceBase::QueueID</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00572">572</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="a61cd20b81c5465449dd2a39a35b26018"></a><!-- doxytag: member="VirtIODeviceBase::VirtAddress" ref="a61cd20b81c5465449dd2a39a35b26018" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint16_t <a class="el" href="classVirtIODeviceBase.html#a61cd20b81c5465449dd2a39a35b26018">VirtIODeviceBase::VirtAddress</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is a <a class="el" href="classVirtQueue.html" title="Base wrapper around a virtqueue.">VirtQueue</a> address as exposed through the low-level interface. The address needs to be multiplied by the page size (seems to be hardcoded to 4096 in the spec) to get the real physical address. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00579">579</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a37102de94c8ee9f4863011707bedfe5b"></a><!-- doxytag: member="VirtIODeviceBase::VirtIODeviceBase" ref="a37102de94c8ee9f4863011707bedfe5b" args="(Params *params, DeviceId id, size_t config_size, FeatureBits features)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VirtIODeviceBase::VirtIODeviceBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classSimObject.html#a5ec10f06fd6e6061713b405aa822ae51">Params</a> *&nbsp;</td>
          <td class="paramname"> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">DeviceId</a>&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>config_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a>&nbsp;</td>
          <td class="paramname"> <em>features</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00323">323</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

</div>
</div>
<a class="anchor" id="afb28ab36c051245d095e1d75d7017eb4"></a><!-- doxytag: member="VirtIODeviceBase::~VirtIODeviceBase" ref="afb28ab36c051245d095e1d75d7017eb4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VirtIODeviceBase::~VirtIODeviceBase </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00334">334</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2fa7f27b22889bf562b00dac0e263ad7"></a><!-- doxytag: member="VirtIODeviceBase::BitUnion8" ref="a2fa7f27b22889bf562b00dac0e263ad7" args="(DeviceStatus) Bitfield&lt; 7 &gt; failed" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VirtIODeviceBase::BitUnion8 </td>
          <td>(</td>
          <td class="paramtype">DeviceStatus&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a01568bd6744907d30ca3db431e227f5c"></a><!-- doxytag: member="VirtIODeviceBase::EndBitUnion" ref="a01568bd6744907d30ca3db431e227f5c" args="(DeviceStatus) typedef VirtIODeviceBaseParams Params" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VirtIODeviceBase::EndBitUnion </td>
          <td>(</td>
          <td class="paramtype">DeviceStatus&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad385ecc4adce84e4c3bad54da1ca9b4b"></a><!-- doxytag: member="VirtIODeviceBase::getCurrentQueue" ref="ad385ecc4adce84e4c3bad54da1ca9b4b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVirtQueue.html">VirtQueue</a> &amp; VirtIODeviceBase::getCurrentQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convenience method to get the currently selected queue. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00456">456</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

</div>
</div>
<a class="anchor" id="ab570a5b7395ed3208e66da98f0e31fd8"></a><!-- doxytag: member="VirtIODeviceBase::getCurrentQueue" ref="ab570a5b7395ed3208e66da98f0e31fd8" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classVirtQueue.html">VirtQueue</a> &amp; VirtIODeviceBase::getCurrentQueue </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convenience method to get the currently selected queue. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">447</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8cc_source.html#l00471">getQueueAddress()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00813">getQueueSize()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00465">setQueueAddress()</a>.</p>

</div>
</div>
<a class="anchor" id="ac038f8456a3a56299a781f39442f8b6e"></a><!-- doxytag: member="VirtIODeviceBase::getDeviceStatus" ref="ac038f8456a3a56299a781f39442f8b6e" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DeviceStatus VirtIODeviceBase::getDeviceStatus </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve the device status. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Device status. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00830">830</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">_deviceStatus</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a8ac8cce84100e81e98c9b84742d4082f"></a><!-- doxytag: member="VirtIODeviceBase::getGuestFeatures" ref="a8ac8cce84100e81e98c9b84742d4082f" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a> VirtIODeviceBase::getGuestFeatures </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get features accepted by the guest driver. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Currently active features. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00845">845</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">guestFeatures</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a4953ea9530f167380ca8c00a13f31d52"></a><!-- doxytag: member="VirtIODeviceBase::getQueueAddress" ref="a4953ea9530f167380ca8c00a13f31d52" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t VirtIODeviceBase::getQueueAddress </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the host physical address of the currently active queue. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The new address is specified in multiples of the page size (fixed to 4096 bytes in the standard). For example, if the address 10 is selected, the actual host physical address will be 40960.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classVirtIODeviceBase.html#a47d9daeb2cc3b45d8df30d00e63917a0" title="Change currently active queue.">setQueueSelect</a> </dd>
<dd>
<a class="el" href="classVirtIODeviceBase.html#a5ab062fafc8f60ef24fbb2db9223cfe7" title="Get the currently active queue.">getQueueSelect</a></dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="classAddress.html">Address</a> of the currently active queue (in pages). </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00471">471</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00435">VirtQueue::ALIGN_BITS</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">getCurrentQueue()</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a5ab062fafc8f60ef24fbb2db9223cfe7"></a><!-- doxytag: member="VirtIODeviceBase::getQueueSelect" ref="a5ab062fafc8f60ef24fbb2db9223cfe7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a> VirtIODeviceBase::getQueueSelect </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the currently active queue. </p>
<p>The transport interface works on a queue at a time. The currently active queue is decided by the value of the queue select field in a device.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The ID of the currently active queue. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00775">775</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a89775fdd932d7a74fff10fef8dc28510"></a><!-- doxytag: member="VirtIODeviceBase::getQueueSize" ref="a89775fdd932d7a74fff10fef8dc28510" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t VirtIODeviceBase::getQueueSize </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the size (descriptors) of the currently active queue. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Size of the currently active queue in number of descriptors. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00813">813</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">getCurrentQueue()</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00347">VirtQueue::getSize()</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6ff618322afbcb64244fb7dc516609b"></a><!-- doxytag: member="VirtIODeviceBase::kick" ref="ad6ff618322afbcb64244fb7dc516609b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::kick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inform the guest of available buffers. </p>
<p>When a device model has finished processing incoming buffers (after onNotify has been called), it typically needs to inform the guest that there are new pending outgoing buffers. The method used to inform the guest is transport dependent, but is typically through an interrupt. Device models call this method to tell the transport interface to notify the guest. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00621">621</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="classCallback.html#abd55ae2a374bf4361387fb44552d80f7">Callback::process()</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00878">transKick</a>.</p>

<p>Referenced by <a class="el" href="console_8cc_source.html#l00100">VirtIOConsole::TermTransQueue::onNotifyDescriptor()</a>, <a class="el" href="block_8cc_source.html#l00124">VirtIOBlock::RequestQueue::onNotifyDescriptor()</a>, <a class="el" href="fs9p_8cc_source.html#l00158">VirtIO9PBase::sendRMsg()</a>, and <a class="el" href="console_8cc_source.html#l00076">VirtIOConsole::TermRecvQueue::trySend()</a>.</p>

</div>
</div>
<a class="anchor" id="a5dbc32294e4bad4fd96c40a6c5128fe8"></a><!-- doxytag: member="VirtIODeviceBase::onNotify" ref="a5dbc32294e4bad4fd96c40a6c5128fe8" args="(QueueID index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::onNotify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a>&nbsp;</td>
          <td class="paramname"> <em>index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Driver is requesting service. </p>
<p>This method is called by the underlying hardware interface (e.g., <a class="el" href="classPciVirtIO.html">PciVirtIO</a> or MmmioVirtIO) to notify a device of pending incoming descriptors.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>ID of the queue with pending actions. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00374">374</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="a67726d16881dc7542fb4466b70a79f0f"></a><!-- doxytag: member="VirtIODeviceBase::readConfig" ref="a67726d16881dc7542fb4466b70a79f0f" args="(PacketPtr pkt, Addr cfgOffset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::readConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>cfgOffset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from the configuration space of a device. </p>
<p>This method is called by the transport interface to read data from a device model's configuration space. The device model should use the cfgOffset parameter as the offset into its configuration space.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The address in the packet should not be used to determine the offset into a device's configuration space.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>Read request packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfgOffset</em>&nbsp;</td><td>Offset into the device's configuration space. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classVirtIOBlock.html#a89cd0c3883b875230b27ca3d9fd2c4b7">VirtIOBlock</a>, <a class="el" href="classVirtIOConsole.html#ad01ee52240fe61ae7912ff262e59bb2f">VirtIOConsole</a>, and <a class="el" href="classVirtIO9PBase.html#acebc495be1ef00d1526d1e3d5593dfdf">VirtIO9PBase</a>.</p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00410">410</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>.</p>

</div>
</div>
<a class="anchor" id="a26ca8575426db806e0b7b238b0bc248b"></a><!-- doxytag: member="VirtIODeviceBase::readConfigBlob" ref="a26ca8575426db806e0b7b238b0bc248b" args="(PacketPtr pkt, Addr cfgOffset, const uint8_t *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::readConfigBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>cfgOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read configuration data from a device structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>Read request packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfgOffset</em>&nbsp;</td><td>Offset into the device's configuration space. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfg</em>&nbsp;</td><td>Device configuration </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00422">422</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00851">configSize</a>, <a class="el" href="packet_8hh_source.html#l00535">Packet::getSize()</a>, <a class="el" href="packet_8hh_source.html#l00715">Packet::makeResponse()</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, and <a class="el" href="packet_8hh_source.html#l00854">Packet::setData()</a>.</p>

<p>Referenced by <a class="el" href="fs9p_8cc_source.html#l00129">VirtIO9PBase::readConfig()</a>, <a class="el" href="console_8cc_source.html#l00066">VirtIOConsole::readConfig()</a>, and <a class="el" href="block_8cc_source.html#l00061">VirtIOBlock::readConfig()</a>.</p>

</div>
</div>
<a class="anchor" id="a16c34b4aba4cdce263949afbc0d9e643"></a><!-- doxytag: member="VirtIODeviceBase::registerKickCallback" ref="a16c34b4aba4cdce263949afbc0d9e643" args="(Callback *c)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::registerKickCallback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCallback.html">Callback</a> *&nbsp;</td>
          <td class="paramname"> <em>c</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register a callback to kick the guest through the transport interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>c</em>&nbsp;</td><td><a class="el" href="classCallback.html" title="Generic callback class.">Callback</a> into transport interface. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00738">738</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00878">transKick</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00045">PciVirtIO::PciVirtIO()</a>.</p>

</div>
</div>
<a class="anchor" id="a9056794510d9115331a2f4fc71957d62"></a><!-- doxytag: member="VirtIODeviceBase::registerQueue" ref="a9056794510d9115331a2f4fc71957d62" args="(VirtQueue &amp;queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::registerQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVirtQueue.html">VirtQueue</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>queue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Register a new <a class="el" href="classVirtQueue.html" title="Base wrapper around a virtqueue.">VirtQueue</a> with the device model. </p>
<p>Devices typically register at least one <a class="el" href="classVirtQueue.html" title="Base wrapper around a virtqueue.">VirtQueue</a> to use for communication with the guest. This <em>must</em> be done from the constructor since the number of queues are assumed to be constant throughout the lifetime of the device.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This method may only be called from the device model constructor. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00479">479</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>.</p>

<p>Referenced by <a class="el" href="fs9p_8cc_source.html#l00109">VirtIO9PBase::VirtIO9PBase()</a>, <a class="el" href="block_8cc_source.html#l00045">VirtIOBlock::VirtIOBlock()</a>, and <a class="el" href="console_8cc_source.html#l00046">VirtIOConsole::VirtIOConsole()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6665bf85dfba4ae91510c5bd25300d8"></a><!-- doxytag: member="VirtIODeviceBase::reset" ref="ad6665bf85dfba4ae91510c5bd25300d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::reset </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Driver-request device reset. </p>
<p>The device driver may reset a device by writing zero to the device status register (using <a class="el" href="classVirtIODeviceBase.html#a5d795ebfece994be522e07b6ae57d82b" title="Update device status and optionally reset device.">setDeviceStatus()</a>), which causes this method to be called. Device models overriding this method <em>must</em> ensure that the reset method of the base class is called when the device is reset.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Always call the reset method of the base class from device-specific reset methods. </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">363</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">_deviceStatus</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">guestFeatures</a>, and <a class="el" href="arm_2miscregs_8hh_source.html#l01377">ArmISA::i</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8cc_source.html#l00400">setDeviceStatus()</a>.</p>

</div>
</div>
<a class="anchor" id="a9409147a12d59e1168cc3a6061dd72d8"></a><!-- doxytag: member="VirtIODeviceBase::serialize" ref="a9409147a12d59e1168cc3a6061dd72d8" args="(std::ostream &amp;os)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::serialize </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classSerializable.html#af4c845a584ff629b4428a1ed02a586f5">Serializable</a>.</p>

<p>Reimplemented in <a class="el" href="classVirtIO9PProxy.html#acfc9c8be54def1ba2babdb93c8be439a">VirtIO9PProxy</a>.</p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00339">339</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">_deviceStatus</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>, <a class="el" href="cprintf_8hh_source.html#l00161">csprintf()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">guestFeatures</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l01377">ArmISA::i</a>, <a class="el" href="sim__object_8hh_source.html#l00108">SimObject::name()</a>, <a class="el" href="classSerializable.html#a23ac872f198ad03a95312016697de6b8">Serializable::nameOut()</a>, <a class="el" href="arch_2x86_2types_8cc_source.html#l00039">paramOut()</a>, and <a class="el" href="serialize_8hh_source.html#l00142">SERIALIZE_SCALAR</a>.</p>

</div>
</div>
<a class="anchor" id="a5d795ebfece994be522e07b6ae57d82b"></a><!-- doxytag: member="VirtIODeviceBase::setDeviceStatus" ref="a5d795ebfece994be522e07b6ae57d82b" args="(DeviceStatus status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::setDeviceStatus </td>
          <td>(</td>
          <td class="paramtype">DeviceStatus&nbsp;</td>
          <td class="paramname"> <em>status</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update device status and optionally reset device. </p>
<p>The special device status of 0 is used to reset the device by calling <a class="el" href="classVirtIODeviceBase.html#ad6665bf85dfba4ae91510c5bd25300d8" title="Driver-request device reset.">reset()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>New device status. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00400">400</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">_deviceStatus</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">reset()</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="a1c4fa10c398091b8c6cf87709f7b9995"></a><!-- doxytag: member="VirtIODeviceBase::setGuestFeatures" ref="a1c4fa10c398091b8c6cf87709f7b9995" args="(FeatureBits features)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::setGuestFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a>&nbsp;</td>
          <td class="paramname"> <em>features</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSet.html">Set</a> feature bits accepted by the guest driver. </p>
<p>This enables a subset of the features offered by the device model through the <a class="el" href="classVirtIODeviceBase.html#a8ac8cce84100e81e98c9b84742d4082f" title="Get features accepted by the guest driver.">getGuestFeatures()</a> interface. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00386">386</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00854">deviceFeatures</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">guestFeatures</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="a0a347f18db3d32186d74edb30ad4ffc5"></a><!-- doxytag: member="VirtIODeviceBase::setQueueAddress" ref="a0a347f18db3d32186d74edb30ad4ffc5" args="(uint32_t address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::setQueueAddress </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>address</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change the host physical address of the currently active queue. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The new address is specified in multiples of the page size (fixed to 4096 bytes in the standard). For example, if the address 10 is selected, the actual host physical address will be 40960.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classVirtIODeviceBase.html#a47d9daeb2cc3b45d8df30d00e63917a0" title="Change currently active queue.">setQueueSelect</a> </dd>
<dd>
<a class="el" href="classVirtIODeviceBase.html#a5ab062fafc8f60ef24fbb2db9223cfe7" title="Get the currently active queue.">getQueueSelect</a></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>New address of the currently active queue (in pages). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00465">465</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00436">VirtQueue::ALIGN_SIZE</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">getCurrentQueue()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00256">VirtQueue::setAddress()</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="a47d9daeb2cc3b45d8df30d00e63917a0"></a><!-- doxytag: member="VirtIODeviceBase::setQueueSelect" ref="a47d9daeb2cc3b45d8df30d00e63917a0" args="(QueueID idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::setQueueSelect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a>&nbsp;</td>
          <td class="paramname"> <em>idx</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Change currently active queue. </p>
<p>The transport interface works on a queue at a time. The currently active queue is decided by the value of the queue select field in a device.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>idx</em>&nbsp;</td><td>ID of the queue to select. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00765">765</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="a78dc1e84fd27cbf142616efd20fa1764"></a><!-- doxytag: member="VirtIODeviceBase::unserialize" ref="a78dc1e84fd27cbf142616efd20fa1764" args="(Checkpoint *cp, const std::string &amp;section)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::unserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classSerializable.html#a5e83c7a6c6266d4e365f6ec7cb949caf">Serializable</a>.</p>

<p>Reimplemented in <a class="el" href="classVirtIO9PProxy.html#aea9b3a9457e0e677d4d3d6f1c6a33372">VirtIO9PProxy</a>.</p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00351">351</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">_deviceStatus</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">_queues</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">_queueSelect</a>, <a class="el" href="cprintf_8hh_source.html#l00161">csprintf()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">guestFeatures</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l01377">ArmISA::i</a>, <a class="el" href="arch_2x86_2types_8cc_source.html#l00069">paramIn()</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l01602">ArmISA::status</a>, and <a class="el" href="serialize_8hh_source.html#l00144">UNSERIALIZE_SCALAR</a>.</p>

</div>
</div>
<a class="anchor" id="a722e47f470225e82c452eda795f34758"></a><!-- doxytag: member="VirtIODeviceBase::writeConfig" ref="a722e47f470225e82c452eda795f34758" args="(PacketPtr pkt, Addr cfgOffset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::writeConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>cfgOffset</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write to the configuration space of a device. </p>
<p>This method is called by the transport interface to write data into a device model's configuration space. The device model should use the cfgOffset parameter as the offset into its configuration space.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>The address in the packet should not be used to determine the offset into a device's configuration space.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>Write request packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfgOffset</em>&nbsp;</td><td>Offset into the device's configuration space. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00416">416</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00142">PciVirtIO::write()</a>.</p>

</div>
</div>
<a class="anchor" id="abb12c376fa0675dc5e35e553eb571906"></a><!-- doxytag: member="VirtIODeviceBase::writeConfigBlob" ref="abb12c376fa0675dc5e35e553eb571906" args="(PacketPtr pkt, Addr cfgOffset, uint8_t *cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtIODeviceBase::writeConfigBlob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPacket.html">PacketPtr</a>&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>cfgOffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>cfg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write configuration data to a device structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>Write request packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfgOffset</em>&nbsp;</td><td>Offset into the device's configuration space. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cfg</em>&nbsp;</td><td>Device configuration </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8cc_source.html#l00434">434</a> of file <a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00851">configSize</a>, <a class="el" href="packet_8hh_source.html#l00535">Packet::getSize()</a>, <a class="el" href="packet_8hh_source.html#l00715">Packet::makeResponse()</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, and <a class="el" href="packet_8hh_source.html#l00882">Packet::writeData()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a94a282d3ffb4c86fd7151e06ab00af82"></a><!-- doxytag: member="VirtIODeviceBase::_deviceStatus" ref="a94a282d3ffb4c86fd7151e06ab00af82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DeviceStatus <a class="el" href="classVirtIODeviceBase.html#a94a282d3ffb4c86fd7151e06ab00af82">VirtIODeviceBase::_deviceStatus</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Status of the device. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classVirtIODeviceBase.html#ac038f8456a3a56299a781f39442f8b6e" title="Retrieve the device status.">getDeviceStatus</a> </dd>
<dd>
<a class="el" href="classVirtIODeviceBase.html#a5d795ebfece994be522e07b6ae57d82b" title="Update device status and optionally reset device.">setDeviceStatus</a> </dd></dl>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00869">869</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8hh_source.html#l00830">getDeviceStatus()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">reset()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00339">serialize()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00400">setDeviceStatus()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00351">unserialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a103f3d2d1f62bc52496a4d7061085f95"></a><!-- doxytag: member="VirtIODeviceBase::_queues" ref="a103f3d2d1f62bc52496a4d7061085f95" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classVirtQueue.html">VirtQueue</a> *&gt; <a class="el" href="classVirtIODeviceBase.html#a103f3d2d1f62bc52496a4d7061085f95">VirtIODeviceBase::_queues</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>List of virtual queues supported by this device. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00875">875</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">getCurrentQueue()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00374">onNotify()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00479">registerQueue()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">reset()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00339">serialize()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00351">unserialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a22a43c1cfdad92dcfb0c5a4215fc6e80"></a><!-- doxytag: member="VirtIODeviceBase::_queueSelect" ref="a22a43c1cfdad92dcfb0c5a4215fc6e80" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVirtIODeviceBase.html#a3f931bdf244c344bf0b266d790a8feff">QueueID</a> <a class="el" href="classVirtIODeviceBase.html#a22a43c1cfdad92dcfb0c5a4215fc6e80">VirtIODeviceBase::_queueSelect</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Queue select register (set by guest). </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00872">872</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8cc_source.html#l00447">getCurrentQueue()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00775">getQueueSelect()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">reset()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00339">serialize()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00765">setQueueSelect()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00351">unserialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a4fa3b4cd2c26ea6ad086daa708c54e58"></a><!-- doxytag: member="VirtIODeviceBase::acknowledge" ref="a4fa3b4cd2c26ea6ad086daa708c54e58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;0&gt; <a class="el" href="classVirtIODeviceBase.html#a4fa3b4cd2c26ea6ad086daa708c54e58">VirtIODeviceBase::acknowledge</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00587">587</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="abbbf1eef529625b6c160f40c01e3ae90"></a><!-- doxytag: member="VirtIODeviceBase::configSize" ref="abbbf1eef529625b6c160f40c01e3ae90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t <a class="el" href="classVirtIODeviceBase.html#abbbf1eef529625b6c160f40c01e3ae90">VirtIODeviceBase::configSize</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of the device's configuration space. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00851">851</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00045">PciVirtIO::PciVirtIO()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00422">readConfigBlob()</a>, <a class="el" href="fs9p_8cc_source.html#l00109">VirtIO9PBase::VirtIO9PBase()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00434">writeConfigBlob()</a>.</p>

</div>
</div>
<a class="anchor" id="a25e639c97dcca5bcdf40e5c176ece915"></a><!-- doxytag: member="VirtIODeviceBase::deviceFeatures" ref="a25e639c97dcca5bcdf40e5c176ece915" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a> <a class="el" href="classVirtIODeviceBase.html#a25e639c97dcca5bcdf40e5c176ece915">VirtIODeviceBase::deviceFeatures</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Feature set offered by the device. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00854">854</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00061">PciVirtIO::read()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00386">setGuestFeatures()</a>.</p>

</div>
</div>
<a class="anchor" id="aaf5651e207b1d055984a478c3326b69d"></a><!-- doxytag: member="VirtIODeviceBase::deviceId" ref="aaf5651e207b1d055984a478c3326b69d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classVirtIODeviceBase.html#a1b22ed10b4e720755cb018308f9f6334">DeviceId</a> <a class="el" href="classVirtIODeviceBase.html#aaf5651e207b1d055984a478c3326b69d">VirtIODeviceBase::deviceId</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Device ID (sometimes known as subsystem ID). </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00848">848</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="pci_8cc_source.html#l00045">PciVirtIO::PciVirtIO()</a>.</p>

</div>
</div>
<a class="anchor" id="a77d5f282ccb6ab2f908319f0f98b5eac"></a><!-- doxytag: member="VirtIODeviceBase::driver" ref="a77d5f282ccb6ab2f908319f0f98b5eac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;1&gt; <a class="el" href="classVirtIODeviceBase.html#a77d5f282ccb6ab2f908319f0f98b5eac">VirtIODeviceBase::driver</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00586">586</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="a8a5af8337598ec43bb6f65df97e5de59"></a><!-- doxytag: member="VirtIODeviceBase::driver_ok" ref="a8a5af8337598ec43bb6f65df97e5de59" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bitfield&lt;2&gt; <a class="el" href="classVirtIODeviceBase.html#a8a5af8337598ec43bb6f65df97e5de59">VirtIODeviceBase::driver_ok</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00585">585</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<a class="anchor" id="a0cf2ec166fb5e27695cecea9baef6ea2"></a><!-- doxytag: member="VirtIODeviceBase::guestFeatures" ref="a0cf2ec166fb5e27695cecea9baef6ea2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classVirtIODeviceBase.html#a7e1d97e8524192841f59e900860e3855">FeatureBits</a> <a class="el" href="classVirtIODeviceBase.html#a0cf2ec166fb5e27695cecea9baef6ea2">VirtIODeviceBase::guestFeatures</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Feature set accepted by the guest. </p>
<p>When the guest starts the driver for the device, it starts by negotiating features. The device first offers a set of features (see deviceFeatures), the driver then notifies the device of which features it accepted. The base class will automatically accept any feature set that is a subset of the features offered by the device. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00650">650</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8hh_source.html#l00845">getGuestFeatures()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00363">reset()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00339">serialize()</a>, <a class="el" href="dev_2virtio_2base_8cc_source.html#l00386">setGuestFeatures()</a>, and <a class="el" href="dev_2virtio_2base_8cc_source.html#l00351">unserialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a8f0e7bfbe1b83e5938928d5b15269dbd"></a><!-- doxytag: member="VirtIODeviceBase::transKick" ref="a8f0e7bfbe1b83e5938928d5b15269dbd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCallback.html">Callback</a>* <a class="el" href="classVirtIODeviceBase.html#a8f0e7bfbe1b83e5938928d5b15269dbd">VirtIODeviceBase::transKick</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callbacks to kick the guest through the transport layer. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00878">878</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8hh_source.html#l00621">kick()</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00738">registerKickCallback()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>dev/virtio/<a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a></li>
<li>dev/virtio/<a class="el" href="dev_2virtio_2base_8cc_source.html">base.cc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:23 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
