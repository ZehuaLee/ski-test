<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: dev/virtio/base.hh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dev/virtio/base.hh File Reference</h1><code>#include &quot;arch/isa_traits.hh&quot;</code><br/>
<code>#include &quot;<a class="el" href="bitunion_8hh_source.html">base/bitunion.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="callback_8hh_source.html">base/callback.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="virtio__ring_8h_source.html">dev/virtio/virtio_ring.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="port__proxy_8hh_source.html">mem/port_proxy.hh</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sim__object_8hh_source.html">sim/sim_object.hh</a>&quot;</code><br/>

<p><a href="dev_2virtio_2base_8hh_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtDescriptor.html">VirtDescriptor</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">VirtIO descriptor (chain) wrapper.  <a href="classVirtDescriptor.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtQueue.html">VirtQueue</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Base wrapper around a virtqueue.  <a href="classVirtQueue.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtQueue_1_1VirtRing.html">VirtQueue::VirtRing&lt; T &gt;</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">VirtIO ring buffer wrapper.  <a href="classVirtQueue_1_1VirtRing.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structVirtQueue_1_1VirtRing_1_1Header.html">VirtQueue::VirtRing&lt; T &gt;::Header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classVirtIODeviceBase.html">VirtIODeviceBase</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Base class for all VirtIO-based devices.  <a href="classVirtIODeviceBase.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">VirtIO endian conversion helpers</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd95e64a5ed35c28acf48927d07018d84"></a> VirtIO prior to version 1.0 (legacy versions) normally send values to the host in the guest systems native byte order. This is going to change in version 1.0 which mandates little endian. We currently only support the legacy version of VirtIO (the new and shiny standard is still in a draft state and not implemented by the kernel). Once we support the new standard, we should negotiate the VirtIO version with the guest and automatically use the right type of byte swapping. </p>
<br/><br/></div></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#aa2cf72a71acd4de79cc37a7f8db47b1d">vtoh_legacy</a> (T v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert legacy VirtIO endianness to host endianness.  <a href="#aa2cf72a71acd4de79cc37a7f8db47b1d"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">T&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#ab30532842b0fcec9ce19141d56fa9a1c">htov_legacy</a> (T v)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert host endianness to legacy VirtIO endianness.  <a href="#ab30532842b0fcec9ce19141d56fa9a1c"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structvring__used__elem.html">vring_used_elem</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#a9626671297e250211aeeb05bf207070b">vtoh_legacy</a> (<a class="el" href="structvring__used__elem.html">vring_used_elem</a> v)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structvring__used__elem.html">vring_used_elem</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#a5e53b4161e8867290135b6c998777c23">htov_legacy</a> (<a class="el" href="structvring__used__elem.html">vring_used_elem</a> v)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structvring__desc.html">vring_desc</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#a0bd961204fbd419f82a86cefcfec16f4">vtoh_legacy</a> (<a class="el" href="structvring__desc.html">vring_desc</a> v)</td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structvring__desc.html">vring_desc</a>&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="dev_2virtio_2base_8hh.html#aae1a205eb519af5e7696917f2a1f28eb">htov_legacy</a> (<a class="el" href="structvring__desc.html">vring_desc</a> v)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aae1a205eb519af5e7696917f2a1f28eb"></a><!-- doxytag: member="base.hh::htov_legacy" ref="aae1a205eb519af5e7696917f2a1f28eb" args="(vring_desc v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvring__desc.html">vring_desc</a> htov_legacy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvring__desc.html">vring_desc</a>&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00103">103</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="virtio__ring_8h_source.html#l00064">vring_desc::addr</a>, <a class="el" href="virtio__ring_8h_source.html#l00068">vring_desc::flags</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00074">htov_legacy()</a>, <a class="el" href="virtio__ring_8h_source.html#l00066">vring_desc::len</a>, and <a class="el" href="virtio__ring_8h_source.html#l00070">vring_desc::next</a>.</p>

</div>
</div>
<a class="anchor" id="a5e53b4161e8867290135b6c998777c23"></a><!-- doxytag: member="base.hh::htov_legacy" ref="a5e53b4161e8867290135b6c998777c23" args="(vring_used_elem v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvring__used__elem.html">vring_used_elem</a> htov_legacy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvring__used__elem.html">vring_used_elem</a>&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00087">87</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="dev_2virtio_2base_8hh_source.html#l00074">htov_legacy()</a>, <a class="el" href="virtio__ring_8h_source.html#l00082">vring_used_elem::id</a>, and <a class="el" href="virtio__ring_8h_source.html#l00084">vring_used_elem::len</a>.</p>

</div>
</div>
<a class="anchor" id="ab30532842b0fcec9ce19141d56fa9a1c"></a><!-- doxytag: member="base.hh::htov_legacy" ref="ab30532842b0fcec9ce19141d56fa9a1c" args="(T v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T htov_legacy </td>
          <td>(</td>
          <td class="paramtype">T&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert host endianness to legacy VirtIO endianness. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00074">74</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="byteswap_8hh_source.html#l00178">BigEndianGuest::htog()</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8hh_source.html#l00087">htov_legacy()</a>, <a class="el" href="block_8cc_source.html#l00124">VirtIOBlock::RequestQueue::onNotifyDescriptor()</a>, <a class="el" href="console_8cc_source.html#l00066">VirtIOConsole::readConfig()</a>, <a class="el" href="block_8cc_source.html#l00061">VirtIOBlock::readConfig()</a>, <a class="el" href="fs9p_8cc_source.html#l00109">VirtIO9PBase::VirtIO9PBase()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00518">VirtQueue::VirtRing&lt; struct vring_used_elem &gt;::write()</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00499">VirtQueue::VirtRing&lt; struct vring_used_elem &gt;::writeHeader()</a>.</p>

</div>
</div>
<a class="anchor" id="a0bd961204fbd419f82a86cefcfec16f4"></a><!-- doxytag: member="base.hh::vtoh_legacy" ref="a0bd961204fbd419f82a86cefcfec16f4" args="(vring_desc v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvring__desc.html">vring_desc</a> vtoh_legacy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvring__desc.html">vring_desc</a>&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00094">94</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="virtio__ring_8h_source.html#l00064">vring_desc::addr</a>, <a class="el" href="virtio__ring_8h_source.html#l00068">vring_desc::flags</a>, <a class="el" href="virtio__ring_8h_source.html#l00066">vring_desc::len</a>, <a class="el" href="virtio__ring_8h_source.html#l00070">vring_desc::next</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00068">vtoh_legacy()</a>.</p>

</div>
</div>
<a class="anchor" id="a9626671297e250211aeeb05bf207070b"></a><!-- doxytag: member="base.hh::vtoh_legacy" ref="a9626671297e250211aeeb05bf207070b" args="(vring_used_elem v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvring__used__elem.html">vring_used_elem</a> vtoh_legacy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structvring__used__elem.html">vring_used_elem</a>&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00080">80</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="virtio__ring_8h_source.html#l00082">vring_used_elem::id</a>, <a class="el" href="virtio__ring_8h_source.html#l00084">vring_used_elem::len</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00068">vtoh_legacy()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2cf72a71acd4de79cc37a7f8db47b1d"></a><!-- doxytag: member="base.hh::vtoh_legacy" ref="aa2cf72a71acd4de79cc37a7f8db47b1d" args="(T v)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">T vtoh_legacy </td>
          <td>(</td>
          <td class="paramtype">T&nbsp;</td>
          <td class="paramname"> <em>v</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert legacy VirtIO endianness to host endianness. </p>

<p>Definition at line <a class="el" href="dev_2virtio_2base_8hh_source.html#l00068">68</a> of file <a class="el" href="dev_2virtio_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="byteswap_8hh_source.html#l00180">BigEndianGuest::gtoh()</a>.</p>

<p>Referenced by <a class="el" href="dev_2virtio_2base_8hh_source.html#l00507">VirtQueue::VirtRing&lt; struct vring_used_elem &gt;::read()</a>, <a class="el" href="dev_2virtio_2base_8hh_source.html#l00492">VirtQueue::VirtRing&lt; struct vring_used_elem &gt;::readHeader()</a>, and <a class="el" href="dev_2virtio_2base_8hh_source.html#l00080">vtoh_legacy()</a>.</p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:14 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
