<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: BaseKvmCPU Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>BaseKvmCPU Class Reference</h1><!-- doxytag: class="BaseKvmCPU" --><!-- doxytag: inherits="BaseCPU" -->
<p>Base class for KVM based CPU models.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BaseKvmCPU:</div>
<div class="dynsection">
 <div class="center">
  <img src="classBaseKvmCPU.gif" usemap="#BaseKvmCPU_map" alt=""/>
  <map id="BaseKvmCPU_map" name="BaseKvmCPU_map">
<area href="classBaseCPU.html" alt="BaseCPU" shape="rect" coords="122,0,234,24"/>
<area href="classArmKvmCPU.html" alt="ArmKvmCPU" shape="rect" coords="0,112,112,136"/>
<area href="classBaseArmKvmCPU.html" alt="BaseArmKvmCPU" shape="rect" coords="122,112,234,136"/>
<area href="classX86KvmCPU.html" alt="X86KvmCPU" shape="rect" coords="244,112,356,136"/>
<area href="classArmV8KvmCPU.html" alt="ArmV8KvmCPU" shape="rect" coords="122,168,234,192"/>
</map>
 </div>
</div>

<p><a href="classBaseKvmCPU-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU_1_1KVMCpuPort.html">KVMCpuPort</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM memory port.  <a href="classBaseKvmCPU_1_1KVMCpuPort.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBaseKvmCPU_1_1TickEvent.html">TickEvent</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a68ba02e38e35ecd9d348e2efc136288b">BaseKvmCPU</a> (BaseKvmCPUParams *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a80ef0da8d4e4245f6b42a4484e13511f">~BaseKvmCPU</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a34a0a1356bf1253cd249046e75f0382f">init</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">startup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a5d60be092a969b71a6cd00962e84e802">regStats</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a0ab506ad77f06c4221e1c24a7e03d6af">serializeThread</a> (std::ostream &amp;os, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a8396acb3c803a3270e3abfa99ced7344">unserializeThread</a> (<a class="el" href="classCheckpoint.html">Checkpoint</a> *cp, const std::string &amp;section, <a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> tid)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">unsigned int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a12cf9bff3fd41b54d961f88307c217aa">drain</a> (<a class="el" href="classDrainManager.html">DrainManager</a> *dm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#adb0b026e9d607f79ed818380a952b25f">drainResume</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a11f90eb56ef107e1a045d0ec18d06539">switchOut</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ac71dc0790561722c1a80a0c08e3a2b42">takeOverFrom</a> (<a class="el" href="classBaseCPU.html">BaseCPU</a> *cpu)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a30e6d6daf5db166e2ada8c6077c026e7">verifyMemoryMode</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMasterPort.html">MasterPort</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#af932c48cdf771c679367bed4178501c2">getDataPort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMasterPort.html">MasterPort</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aac23de9407e4e9c1f3b45e1ddf4f3749">getInstPort</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#acf9cb37eff5a3b34b93954279b6d815e">wakeup</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#affa61aeed785f397801a60c0f685f668">activateContext</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> thread_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a5f5a7904a84946e0a68a848cdad4904d">suspendContext</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> thread_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a582a9d1f439e7e7f27acef9f5067b0ff">deallocateContext</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> thread_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a0b2a1ed34a91992f0e70181c5d3c4cc7">haltContext</a> (<a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a> thread_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a6f22743c4c1dd4acb3ee5d1fad6f0dd3">getContext</a> (int tn)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aa5bd19e07ebabe47ee8e3cbabf0044cc">totalInsts</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a85730f1a6b530a2b25bf2f7cf44160cd">totalOps</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a42ddb8b4785004b7fa2f9970f1ca2a4d">dump</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump the internal state to the terminal.  <a href="#a42ddb8b4785004b7fa2f9970f1ca2a4d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#acece83a503d2f23246a2c36ade56b784">kick</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Force an exit from KVM.  <a href="#acece83a503d2f23246a2c36ade56b784"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSimpleThread.html">SimpleThread</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aefb406bd528f64ecb5036b600e401a87">thread</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A cached copy of a thread's state in the form of a <a class="el" href="classSimpleThread.html" title="The SimpleThread object provides a combination of the ThreadState object and the...">SimpleThread</a> object.  <a href="#aefb406bd528f64ecb5036b600e401a87"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classThreadContext.html">ThreadContext</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a37b0833de5c513bb273b2ef526ae4327">tc</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> object, provides an interface for external objects to modify this thread's state.  <a href="#a37b0833de5c513bb273b2ef526ae4327"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKvmVM.html">KvmVM</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#adeeeb00ef99797a5acd84121aa9d48ce">vm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#adc8cb4eaa0af1bf66a8bf06674675531">ctrInsts</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of instructions executed by the CPU.  <a href="#adc8cb4eaa0af1bf66a8bf06674675531"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">Status</a> { <a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa406fbd7a03689308f5327d16b1312e75">Idle</a>, 
<a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa25cd3c68299e93e22fcb2f57eddc02a4">Running</a>, 
<a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fadc3ca860d51f1182428857c1c977f34d">RunningService</a>, 
<a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fae24e0293cbc6d5261a461a6227b49f90">RunningServiceCompletion</a>
 }</td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe">tick</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute the CPU until the next event in the main event queue or until the guest needs service from gem5.  <a href="#a42e73730c44c3783bcfda7055a72d6fe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ad1bfb2e3a128923e86f944a565d97027">getHostCycles</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the value of the hardware cycle counter in the guest.  <a href="#ad1bfb2e3a128923e86f944a565d97027"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835">kvmRun</a> (<a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> ticks)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classRequest.html">Request</a> KVM to run the guest for a given number of ticks.  <a href="#a76cee3dce21295def5b0ad86a25b3835"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a161d75e4dbb909622638f79c9bcf056a">kvmRunDrain</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classRequest.html">Request</a> the CPU to run until draining completes.  <a href="#a161d75e4dbb909622638f79c9bcf056a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kvm_run *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ae5c568b0d8f7a76d4d89c2575ae34190">getKvmRunState</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a pointer to the kvm_run structure containing all the input and output parameters from <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>.  <a href="#ae5c568b0d8f7a76d4d89c2575ae34190"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a358d4ac29890e7b72a25eefffa68f236">getGuestData</a> (uint64_t offset) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieve a pointer to guest data stored at the end of the kvm_run structure.  <a href="#a358d4ac29890e7b72a25eefffa68f236"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmInterrupts.html#ga6b691230f7fdecaef914ef88773790c7">kvmNonMaskableInterrupt</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a non-maskable interrupt to the guest.  <a href="group__KvmInterrupts.html#ga6b691230f7fdecaef914ef88773790c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmInterrupts.html#gaea8d68988b33fa1dbcc4e42f5dc762b6">kvmInterrupt</a> (const struct kvm_interrupt &amp;interrupt)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a normal interrupt to the guest.  <a href="group__KvmInterrupts.html#gaea8d68988b33fa1dbcc4e42f5dc762b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a08b1c1d5204982b8904e64aced49f012">getAndFormatOneReg</a> (uint64_t id) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get and format one register for printout.  <a href="#a08b1c1d5204982b8904e64aced49f012"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a54071dbb3d109f869a60d06afffb46f3">archIsDrained</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is the architecture specific code in a state that prevents draining?  <a href="#a54071dbb3d109f869a60d06afffb46f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a07a449bbe8ec985a85e7409ec7832ca8">doMMIOAccess</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> paddr, void *data, int size, bool write)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Inject a memory mapped IO request into gem5.  <a href="#a07a449bbe8ec985a85e7409ec7832ca8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#gacfdd75f9b99682a11bd2035d388cccc3">ioctl</a> (int request, long p1) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">vCPU ioctl interface.  <a href="group__KvmIoctl.html#gacfdd75f9b99682a11bd2035d388cccc3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#ga1ff672c2d1b5fb1cd61a605d7ad22fb8">ioctl</a> (int request, void *p1) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#ga84d5d79b666d6291fa55db4c734e2675">ioctl</a> (int request) const </td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7435ef26f94d8129433dec26236fee4b">_status</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">CPU run state.  <a href="#a7435ef26f94d8129433dec26236fee4b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseKvmCPU_1_1KVMCpuPort.html">KVMCpuPort</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a91a536e52f05c96d88a83832db91b543">dataPort</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classPort.html" title="Ports are used to interface memory objects to each other.">Port</a> for data requests.  <a href="#a91a536e52f05c96d88a83832db91b543"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBaseKvmCPU_1_1KVMCpuPort.html">KVMCpuPort</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ab93dc5f839cd51bc9dd874e2444246d2">instPort</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unused dummy port for the instruction interface.  <a href="#ab93dc5f839cd51bc9dd874e2444246d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a2242ff2f4ed324f075563acbfe087bb2">threadContextDirty</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is the gem5 context dirty? <a class="el" href="classSet.html">Set</a> to true to force an update of the KVM vCPU state upon the next call to <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>.  <a href="#a2242ff2f4ed324f075563acbfe087bb2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a2a3ff86d7ad1c0a61239ccd546483509">kvmStateDirty</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is the KVM state dirty? <a class="el" href="classSet.html">Set</a> to true to force an update of the KVM vCPU state upon the next call to <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>.  <a href="#a2a3ff86d7ad1c0a61239ccd546483509"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a2052ce54091f66f08c0f0dee6904710f">vcpuID</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM internal ID of the vCPU.  <a href="#a2052ce54091f66f08c0f0dee6904710f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ac4cdb6b70bc4e835df19e53f05dafd33">vcpuThread</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ID of the vCPU thread.  <a href="#ac4cdb6b70bc4e835df19e53f05dafd33"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a695920bf98a271297aa3d7fbceb845ac">flushCoalescedMMIO</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Service MMIO requests in the mmioRing.  <a href="#a695920bf98a271297aa3d7fbceb845ac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a928a5926b569a634bb8b39f4cad1e4b0">setupSignalHandler</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup a signal handler to catch the timer signal used to switch back to the monitor.  <a href="#a928a5926b569a634bb8b39f4cad1e4b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ae38c2fb5c5bf9fa630fb6acd26d99bdf">discardPendingSignal</a> (int signum) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Discard a (potentially) pending signal.  <a href="#ae38c2fb5c5bf9fa630fb6acd26d99bdf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ad38c1ec8d42a60ebdc99add259fb5999">startupThread</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Thread-specific initialization.  <a href="#ad38c1ec8d42a60ebdc99add259fb5999"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7bf0f671f0e265e9c9dd6215365053db">tryDrain</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Try to drain the CPU if a drain is pending.  <a href="#a7bf0f671f0e265e9c9dd6215365053db"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7bc12b93b0848b3f3d34fb2ea5c7f6a8">ioctlRun</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Execute the KVM_RUN ioctl.  <a href="#a7bc12b93b0848b3f3d34fb2ea5c7f6a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a3906dd2803114a8f19e2c20edd7f3d6c">setupInstStop</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup an instruction break if there is one pending.  <a href="#a3906dd2803114a8f19e2c20edd7f3d6c"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7e834ee8f89ef9310d9b182ec658fcc5">vcpuFD</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM vCPU file descriptor.  <a href="#a7e834ee8f89ef9310d9b182ec658fcc5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a2e3101897bc843bb19b057474d703c3c">vcpuMMapSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Size of MMAPed kvm_run area.  <a href="#a2e3101897bc843bb19b057474d703c3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kvm_run *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8">_kvmRun</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the kvm_run structure used to communicate parameters with KVM.  <a href="#a921798423b9111b1796f4ec2eee8b2d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct kvm_coalesced_mmio_ring *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a68a8659a8d3179abe50a731f815ef747">mmioRing</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Coalesced MMIO ring buffer.  <a href="#a68a8659a8d3179abe50a731f815ef747"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a89561c02c2cdd8e8f03999db3ad6ad11">pageSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cached page size of the host.  <a href="#a89561c02c2cdd8e8f03999db3ad6ad11"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structBaseKvmCPU_1_1TickEvent.html">TickEvent</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aff1a2d1464cf96917d3c73470f58f6a9">tickEvent</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classBaseKvmTimer.html">BaseKvmTimer</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aa018c869ec7b83023f122bedf9268994">runTimer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timer used to force execution into the monitor after a specified number of simulation tick equivalents have executed in the guest.  <a href="#aa018c869ec7b83023f122bedf9268994"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a68510abea47eae94e7688617fb01ad32">hostFactor</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Host factor as specified in the configuration.  <a href="#a68510abea47eae94e7688617fb01ad32"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ae81629c1d898d8972c08024e006155e2">drainManager</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Drain manager to use when signaling drain completion.  <a href="#ae81629c1d898d8972c08024e006155e2"></a><br/></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a5161d6436b08aa367b2000806fe1e5f8">numInsts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ad1351d57530b3ac5f5299fcda03d31a5">numVMExits</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#adcba58d8641d82284275bb01e1ae93fb">numVMHalfEntries</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a1a010b1f0693ae392c63c95c6d0ea6ab">numExitSignal</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a9e49ef5fb12791a1db1cfe6ae08fdb5d">numMMIO</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7bce04f0abf294aca4d387b49c96ba5f">numCoalescedMMIO</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aa4429e17626f97f4b62feca39b33d945">numIO</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a8a6e72dbcfbfc1afcdb7d9c94de162f2">numHalt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a452e50a7b2262714498826e45339e7b5">numInterrupts</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a619c8830cb550ef275dd4a0a47edef8a">numHypercalls</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a6dcca97a3389a195e02b8bc86f3645d8">activeInstPeriod</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Currently active instruction count breakpoint.  <a href="#a6dcca97a3389a195e02b8bc86f3645d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aea857e4c19de0868d0ee8af9ee3d55fb">hwCycles</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Guest cycle counter.  <a href="#aea857e4c19de0868d0ee8af9ee3d55fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#afca88c702e9049ff52ff54ef46125c67">hwInstructions</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Guest instruction counter.  <a href="#afca88c702e9049ff52ff54ef46125c67"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a80b133297febc24ee0fd1180ff29202e">perfControlledByTimer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Does the runTimer control the performance counters?  <a href="#a80b133297febc24ee0fd1180ff29202e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a1a95237771da8d72f23cbcd56516fb95">getRegisters</a> (struct kvm_regs &amp;regs) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get/Set the register state of the guest vCPU.  <a href="#a1a95237771da8d72f23cbcd56516fb95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aebc7ec36486a368d9b6a55c06a61b57c">setRegisters</a> (const struct kvm_regs &amp;regs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a68a6a444166fe6abb8afe391acfac324">getSpecialRegisters</a> (struct kvm_sregs &amp;regs) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ae1f8b031817e1a09782a240f29ba010e">setSpecialRegisters</a> (const struct kvm_sregs &amp;regs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aba532a4eb5890118f2957309e3ecff95">getFPUState</a> (struct kvm_fpu &amp;state) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get/Set the guest FPU/vector state.  <a href="#aba532a4eb5890118f2957309e3ecff95"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7c46f81a68500486be995b37d0fd28e8">setFPUState</a> (const struct kvm_fpu &amp;state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aa0f53751a234ae4107a2ad89236e4ce7">setOneReg</a> (uint64_t id, const void *addr)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get/Set single register using the KVM_(SET|GET)_ONE_REG API.  <a href="#aa0f53751a234ae4107a2ad89236e4ce7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a19be9f5454d77a76f53ccdd7a7338816">setOneReg</a> (uint64_t id, uint64_t value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a1591055a0183d94025eff752b898ec7c">setOneReg</a> (uint64_t id, uint32_t value)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a37fb3b90d1db602a691b8d507d8b28f8">getOneReg</a> (uint64_t id, void *addr) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a3c337154c6c20c1667b4b63088d72d6e">getOneRegU64</a> (uint64_t id) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#aaedf1eff8b7043f0037a6340e8da0236">getOneRegU32</a> (uint64_t id) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a74c51072421abe73972e1085f45f5f8b">updateKvmState</a> ()=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the KVM state from the current thread context.  <a href="#a74c51072421abe73972e1085f45f5f8b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ac943446adae87cc8b93f9adc9ce26158">updateThreadContext</a> ()=0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the current thread context with the KVM state.  <a href="#ac943446adae87cc8b93f9adc9ce26158"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ad64da0a757d283b8a01ad93b2f896bda">syncThreadContext</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update a thread context if the KVM state is dirty with respect to the cached thread context.  <a href="#ad64da0a757d283b8a01ad93b2f896bda"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a76325d5e0a5007e2a98d0641433d1b6c">syncKvmState</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the KVM if the thread context is dirty.  <a href="#a76325d5e0a5007e2a98d0641433d1b6c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99">handleKvmExit</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type.  <a href="#ab8129c1d639db3f569e7bf0fb240ad99"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#afa891ade544b6941a9361679fa16dd75">handleKvmExitIO</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The guest performed a legacy IO request (out/inp on x86).  <a href="#afa891ade544b6941a9361679fa16dd75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a715a3725bd34c3ec163a2a3adfbef6fa">handleKvmExitHypercall</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The guest requested a monitor service using a hypercall.  <a href="#a715a3725bd34c3ec163a2a3adfbef6fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a8846d88cf92f95473ee6d8ec52104ebf">handleKvmExitIRQWindowOpen</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The guest exited because an interrupt window was requested.  <a href="#a8846d88cf92f95473ee6d8ec52104ebf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a7ffe8b58c9b6d8b64027829174fddc83">handleKvmExitUnknown</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An unknown architecture dependent error occurred when starting the vCPU.  <a href="#a7ffe8b58c9b6d8b64027829174fddc83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ae932b779ab2e08728757e96abd56a05f">handleKvmExitException</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An unhandled virtualization exception occured.  <a href="#ae932b779ab2e08728757e96abd56a05f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#ac3ac54ad644c0e39e2939ddb8d229d53">handleKvmExitFailEntry</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM failed to start the virtualized CPU.  <a href="#ac3ac54ad644c0e39e2939ddb8d229d53"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a9fad600b008e3a6cd434473b55e88ce1">setSignalMask</a> (const sigset_t *mask)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classSet.html">Set</a> the signal mask used in <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>.  <a href="#a9fad600b008e3a6cd434473b55e88ce1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#af3b88cae602a87fe804e9d6cb55c2b52">setupCounters</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup hardware performance counters.  <a href="#af3b88cae602a87fe804e9d6cb55c2b52"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBaseKvmCPU.html#a5cc19a5e748c206aac1029fb2275afff">setupInstCounter</a> (uint64_t period=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup the guest instruction counter.  <a href="#a5cc19a5e748c206aac1029fb2275afff"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Base class for KVM based CPU models. </p>
<p>All architecture specific KVM implementation should inherit from this class. The most basic CPU models only need to override the <a class="el" href="classBaseKvmCPU.html#a74c51072421abe73972e1085f45f5f8b" title="Update the KVM state from the current thread context.">updateKvmState()</a> and <a class="el" href="classBaseKvmCPU.html#ac943446adae87cc8b93f9adc9ce26158" title="Update the current thread context with the KVM state.">updateThreadContext()</a> methods to implement state synchronization between gem5 and KVM.</p>
<p>The architecture specific implementation is also responsible for delivering interrupts into the VM. This is typically done by overriding <a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick()</a> and checking the thread context before entering into the VM. In order to deliver an interrupt, the implementation then calls <a class="el" href="group__KvmInterrupts.html#ga24f25100642b68c4a9a119e172954cf2" title="Set the status of an IRQ line using KVM_IRQ_LINE.">KvmVM::setIRQLine()</a> or <a class="el" href="group__KvmInterrupts.html#gaea8d68988b33fa1dbcc4e42f5dc762b6" title="Send a normal interrupt to the guest.">BaseKvmCPU::kvmInterrupt()</a> depending on the specifics of the underlying hardware/drivers. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00077">77</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="aa0641cc1ddeea39ae9504b45ffaab24f"></a><!-- doxytag: member="BaseKvmCPU::Status" ref="aa0641cc1ddeea39ae9504b45ffaab24f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">BaseKvmCPU::Status</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div align="center">
<img src="inline_dotgraph_1.dot.png" alt="inline_dotgraph_1.dot" border="0" usemap="#inline_dotgraph_1.dot.map">
<map name="inline_dotgraph_1.dot.map" id="inline_dotgraph_1.dot.map"><area shape="poly" id="edge4" href="classBaseKvmCPU.html#affa61aeed785f397801a60c0f685f668" title="activateContext()" alt="" coords="199,36 93,50 43,64 25,72 13,82 8,93 13,105 36,120 73,132 164,147 163,152 72,137 33,125 9,108 3,93 9,78 22,68 41,59 92,45 199,31"/><area shape="rect" id="edge4" href="classBaseKvmCPU.html#affa61aeed785f397801a60c0f685f668" title="activateContext()" alt="" coords="11,81,136,106"/><area shape="poly" id="edge14" href="classBaseKvmCPU.html#adb0b026e9d607f79ed818380a952b25f" title="drainResume()" alt="" coords="205,46 182,60 164,81 160,93 164,105 184,128 180,132 159,108 155,93 159,79 178,56 202,41"/><area shape="rect" id="edge14" href="classBaseKvmCPU.html#adb0b026e9d607f79ed818380a952b25f" title="drainResume()" alt="" coords="162,81,271,106"/><area shape="poly" id="edge10" href="classBaseKvmCPU.html#a5f5a7904a84946e0a68a848cdad4904d" title="suspendContext()" alt="" coords="258,131 274,106 277,93 274,81 263,62 268,60 279,79 282,93 279,108 262,134"/><area shape="rect" id="edge10" href="classBaseKvmCPU.html#a5f5a7904a84946e0a68a848cdad4904d" title="suspendContext()" alt="" coords="279,81,407,106"/><area shape="poly" id="edge12" href="minor.html#drain" title="drain()" alt="" coords="293,149 343,141 389,127 405,118 415,108 417,96 410,82 391,68 359,57 283,40 284,35 361,51 393,63 414,78 422,95 420,110 408,123 391,132 344,146 294,154"/><area shape="rect" id="edge12" href="minor.html#drain" title="drain()" alt="" coords="419,81,468,106"/><area shape="poly" id="edge6" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="288,142 310,145 317,149 320,156 315,165 302,169 300,164 311,160 315,156 313,153 308,150 287,147"/><area shape="rect" id="edge6" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="318,143,358,169"/><area shape="poly" id="edge8" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="216,182 159,248 155,244 212,178"/><area shape="rect" id="edge8" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="191,206,231,231"/><area shape="poly" id="edge16" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="handleKvmExit()" alt="" coords="84,306 69,318 57,330 53,343 57,356 74,368 104,380 102,385 72,373 53,359 47,343 53,327 65,314 81,302"/><area shape="rect" id="edge16" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="handleKvmExit()" alt="" coords="55,331,183,357"/><area shape="poly" id="edge18" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="229,380 240,357 248,314 249,271 241,195 246,195 255,271 253,315 245,358 234,382"/><area shape="rect" id="edge18" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="251,269,291,294"/><area shape="poly" id="edge20" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="203,382 194,357 181,332 168,317 172,313 185,329 199,355 208,380"/><area shape="rect" id="edge20" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="tick()" alt="" coords="198,331,238,357"/></map>
</div>
 <dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aa0641cc1ddeea39ae9504b45ffaab24fa406fbd7a03689308f5327d16b1312e75"></a><!-- doxytag: member="Idle" ref="aa0641cc1ddeea39ae9504b45ffaab24fa406fbd7a03689308f5327d16b1312e75" args="" -->Idle</em>&nbsp;</td><td>
<p>Context not scheduled in KVM. </p>
<p>The CPU generally enters this state when the guest execute an instruction that halts the CPU (e.g., WFI on ARM or HLT on X86) if KVM traps this instruction. Ticks are not scheduled in this state.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBaseKvmCPU.html#a5f5a7904a84946e0a68a848cdad4904d">suspendContext()</a> </dd></dl>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa0641cc1ddeea39ae9504b45ffaab24fa25cd3c68299e93e22fcb2f57eddc02a4"></a><!-- doxytag: member="Running" ref="aa0641cc1ddeea39ae9504b45ffaab24fa25cd3c68299e93e22fcb2f57eddc02a4" args="" -->Running</em>&nbsp;</td><td>
<p>Running normally. </p>
<p>This is the normal run state of the CPU. KVM will be entered next time <a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick()</a> is called. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa0641cc1ddeea39ae9504b45ffaab24fadc3ca860d51f1182428857c1c977f34d"></a><!-- doxytag: member="RunningService" ref="aa0641cc1ddeea39ae9504b45ffaab24fadc3ca860d51f1182428857c1c977f34d" args="" -->RunningService</em>&nbsp;</td><td>
<p>Requiring service at the beginning of the next cycle. </p>
<p>The virtual machine has exited and requires service, <a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick()</a> will call <a class="el" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type...">handleKvmExit()</a> on the next cycle. The next state after running service is determined in <a class="el" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type...">handleKvmExit()</a> and depends on what kind of service the guest requested: </p>
<ul>
<li>
IO/MMIO: RunningServiceCompletion </li>
<li>
Halt: Idle </li>
<li>
Others: Running </li>
</ul>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aa0641cc1ddeea39ae9504b45ffaab24fae24e0293cbc6d5261a461a6227b49f90"></a><!-- doxytag: member="RunningServiceCompletion" ref="aa0641cc1ddeea39ae9504b45ffaab24fae24e0293cbc6d5261a461a6227b49f90" args="" -->RunningServiceCompletion</em>&nbsp;</td><td>
<p>Service completion in progress. </p>
<p>The VM has requested service that requires KVM to be entered once in order to get to a consistent state. This happens in <a class="el" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type...">handleKvmExit()</a> or one of its friends after IO exits. After executing <a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick()</a>, the CPU will transition into the Running or RunningService state. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00169">169</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a68ba02e38e35ecd9d348e2efc136288b"></a><!-- doxytag: member="BaseKvmCPU::BaseKvmCPU" ref="a68ba02e38e35ecd9d348e2efc136288b" args="(BaseKvmCPUParams *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseKvmCPU::BaseKvmCPU </td>
          <td>(</td>
          <td class="paramtype">BaseKvmCPUParams *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00066">66</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="root_8cc_source.html#l00167">FullSystem</a>, <a class="el" href="simple__thread_8hh_source.html#l00170">SimpleThread::getTC()</a>, <a class="el" href="thread__context_8hh_source.html#l00117">ThreadContext::Halted</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00672">pageSize</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="simple__thread_8hh_source.html#l00212">SimpleThread::setStatus()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">tc</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>.</p>

</div>
</div>
<a class="anchor" id="a80ef0da8d4e4245f6b42a4484e13511f"></a><!-- doxytag: member="BaseKvmCPU::~BaseKvmCPU" ref="a80ef0da8d4e4245f6b42a4484e13511f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseKvmCPU::~BaseKvmCPU </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00101">101</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00654">vcpuFD</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00656">vcpuMMapSize</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="affa61aeed785f397801a60c0f685f668"></a><!-- doxytag: member="BaseKvmCPU::activateContext" ref="affa61aeed785f397801a60c0f685f668" args="(ThreadID thread_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::activateContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>thread_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00437">437</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="thread__state_8hh_source.html#l00163">ThreadState::lastActivate</a>, <a class="el" href="thread__state_8hh_source.html#l00166">ThreadState::lastSuspend</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>.</p>

</div>
</div>
<a class="anchor" id="a54071dbb3d109f869a60d06afffb46f3"></a><!-- doxytag: member="BaseKvmCPU::archIsDrained" ref="a54071dbb3d109f869a60d06afffb46f3" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool BaseKvmCPU::archIsDrained </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is the architecture specific code in a state that prevents draining? </p>
<p>This method should return false if there are any pending events in the guest vCPU that won't be carried over to the gem5 state and thus will prevent correct checkpointing or CPU handover. It might, for example, check for pending interrupts that have been passed to the vCPU but not acknowledged by the OS. Architecures implementing this method <em>must</em> override <a class="el" href="classBaseKvmCPU.html#a161d75e4dbb909622638f79c9bcf056a" title="Request the CPU to run until draining completes.">kvmRunDrain()</a>.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBaseKvmCPU.html#a161d75e4dbb909622638f79c9bcf056a" title="Request the CPU to run until draining completes.">BaseKvmCPU::kvmRunDrain()</a></dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the vCPU is drained, false otherwise. </dd></dl>

<p>Reimplemented in <a class="el" href="classX86KvmCPU.html#a91ab8fa2a3e4d458fdc7615746481c48">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00493">493</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">drain()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">tryDrain()</a>.</p>

</div>
</div>
<a class="anchor" id="a582a9d1f439e7e7f27acef9f5067b0ff"></a><!-- doxytag: member="BaseKvmCPU::deallocateContext" ref="a582a9d1f439e7e7f27acef9f5067b0ff" args="(ThreadID thread_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::deallocateContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>thread_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00478">478</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">suspendContext()</a>.</p>

</div>
</div>
<a class="anchor" id="ae38c2fb5c5bf9fa630fb6acd26d99bdf"></a><!-- doxytag: member="BaseKvmCPU::discardPendingSignal" ref="ae38c2fb5c5bf9fa630fb6acd26d99bdf" args="(int signum) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseKvmCPU::discardPendingSignal </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signum</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Discard a (potentially) pending signal. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signum</em>&nbsp;</td><td>Signal to discard </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the signal was pending, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01141">1141</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a07a449bbe8ec985a85e7409ec7832ca8"></a><!-- doxytag: member="BaseKvmCPU::doMMIOAccess" ref="a07a449bbe8ec985a85e7409ec7832ca8" args="(Addr paddr, void *data, int size, bool write)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::doMMIOAccess </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>paddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>write</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Inject a memory mapped IO request into gem5. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>paddr</em>&nbsp;</td><td>Physical address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to the source/destination buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Memory access size </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>write</em>&nbsp;</td><td>True if write, False if read </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the memory access </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">999</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="classThreadContext.html#a24eb06bed6e31118e646e47a4b5f01e4">ThreadContext::contextId()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00572">dataPort</a>, <a class="el" href="packet_8hh_source.html#l00774">Packet::dataStatic()</a>, <a class="el" href="eventq_8hh_source.html#l00672">EventManager::eventQueue()</a>, <a class="el" href="classThreadContext.html#a66f0298b284053daa1f4318c585c091f">ThreadContext::getDTBPtr()</a>, <a class="el" href="simple__thread_8hh_source.html#l00170">SimpleThread::getTC()</a>, <a class="el" href="generic_2mmapped__ipr_8hh_source.html#l00139">GenericISA::handleIprRead()</a>, <a class="el" href="generic_2mmapped__ipr_8hh_source.html#l00160">GenericISA::handleIprWrite()</a>, <a class="el" href="request_8hh_source.html#l00645">Request::isMmappedIpr()</a>, <a class="el" href="generic_2tlb_8hh_source.html#l00061">BaseTLB::Read</a>, <a class="el" href="packet_8hh_source.html#l00084">MemCmd::ReadReq</a>, <a class="el" href="port_8cc_source.html#l00165">MasterPort::sendAtomic()</a>, <a class="el" href="request_8hh_source.html#l00356">Request::setThreadContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">tc</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">threadContextDirty</a>, <a class="el" href="request_8hh_source.html#l00111">Request::UNCACHEABLE</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00144">vm</a>, <a class="el" href="base_2misc_8hh_source.html#l00207">warn</a>, <a class="el" href="generic_2tlb_8hh_source.html#l00061">BaseTLB::Write</a>, and <a class="el" href="packet_8hh_source.html#l00087">MemCmd::WriteReq</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01070">flushCoalescedMMIO()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a12cf9bff3fd41b54d961f88307c217aa"></a><!-- doxytag: member="BaseKvmCPU::drain" ref="a12cf9bff3fd41b54d961f88307c217aa" args="(DrainManager *dm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int BaseKvmCPU::drain </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classDrainManager.html">DrainManager</a> *&nbsp;</td>
          <td class="paramname"> <em>dm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>FALLTHROUGH </p>
</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">287</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00493">archIsDrained()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00756">drainManager</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00198">RunningService</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00207">RunningServiceCompletion</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>.</p>

</div>
</div>
<a class="anchor" id="adb0b026e9d607f79ed818380a952b25f"></a><!-- doxytag: member="BaseKvmCPU::drainResume" ref="adb0b026e9d607f79ed818380a952b25f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::drainResume </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00351">351</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="thread__context_8hh_source.html#l00108">ThreadContext::Active</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, <a class="el" href="classThreadContext.html#a7d99d72e903622b08fbf253c6e58b1ec">ThreadContext::status()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">tc</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00410">verifyMemoryMode()</a>.</p>

</div>
</div>
<a class="anchor" id="a42ddb8b4785004b7fa2f9970f1ca2a4d"></a><!-- doxytag: member="BaseKvmCPU::dump" ref="a42ddb8b4785004b7fa2f9970f1ca2a4d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::dump </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump the internal state to the terminal. </p>

<p>Reimplemented in <a class="el" href="classArmKvmCPU.html#a8879ad1c2b9e3f83c8eb1ef882d79e60">ArmKvmCPU</a>, <a class="el" href="classArmV8KvmCPU.html#a2938f217fc7f8ac55515d07440d0b99e">ArmV8KvmCPU</a>, and <a class="el" href="classX86KvmCPU.html#a3ae6640c5a471eb2afac3a2fb9a727c5">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">514</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00209">inform</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00982">handleKvmExitException()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00991">handleKvmExitFailEntry()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00974">handleKvmExitUnknown()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00262">serializeThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a695920bf98a271297aa3d7fbceb845ac"></a><!-- doxytag: member="BaseKvmCPU::flushCoalescedMMIO" ref="a695920bf98a271297aa3d7fbceb845ac" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::flushCoalescedMMIO </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Service MMIO requests in the mmioRing. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the MMIO requests in the MMIO ring buffer </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01070">1070</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00670">mmioRing</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00765">numCoalescedMMIO</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="a08b1c1d5204982b8904e64aced49f012"></a><!-- doxytag: member="BaseKvmCPU::getAndFormatOneReg" ref="a08b1c1d5204982b8904e64aced49f012" args="(uint64_t id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string BaseKvmCPU::getAndFormatOneReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get and format one register for printout. </p>
<p>This function call <a class="el" href="classBaseKvmCPU.html#a37fb3b90d1db602a691b8d507d8b28f8">getOneReg()</a> to retrieve the contents of one register and automatically formats it for printing.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The presence of this call depends on <a class="el" href="classKvm.html#ae7bb34f99b90fc417af396dccc3f7e2e" title="Support for reading and writing single registers.">Kvm::capOneReg()</a>. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00813">813</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, and <a class="el" href="arm_2miscregs_8hh_source.html#l01370">ArmISA::ss</a>.</p>

<p>Referenced by <a class="el" href="armv8__cpu_8cc_source.html#l00126">ArmV8KvmCPU::dump()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00523">ArmKvmCPU::dumpKvmStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00484">ArmKvmCPU::dumpKvmStateMisc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00565">ArmKvmCPU::dumpKvmStateVFP()</a>, <a class="el" href="armv8__cpu_8cc_source.html#l00188">ArmV8KvmCPU::updateKvmState()</a>, and <a class="el" href="armv8__cpu_8cc_source.html#l00230">ArmV8KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f22743c4c1dd4acb3ee5d1fad6f0dd3"></a><!-- doxytag: member="BaseKvmCPU::getContext" ref="a6f22743c4c1dd4acb3ee5d1fad6f0dd3" args="(int tn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classThreadContext.html">ThreadContext</a> * BaseKvmCPU::getContext </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tn</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00492">492</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">tc</a>.</p>

<p>Referenced by <a class="el" href="arm__cpu_8cc_source.html#l00316">ArmKvmCPU::onKvmExitHypercall()</a>.</p>

</div>
</div>
<a class="anchor" id="af932c48cdf771c679367bed4178501c2"></a><!-- doxytag: member="BaseKvmCPU::getDataPort" ref="af932c48cdf771c679367bed4178501c2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMasterPort.html">MasterPort</a>&amp; BaseKvmCPU::getDataPort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00099">99</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00572">dataPort</a>.</p>

</div>
</div>
<a class="anchor" id="aba532a4eb5890118f2957309e3ecff95"></a><!-- doxytag: member="BaseKvmCPU::getFPUState" ref="aba532a4eb5890118f2957309e3ecff95" args="(struct kvm_fpu &amp;state) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::getFPUState </td>
          <td>(</td>
          <td class="paramtype">struct kvm_fpu &amp;&nbsp;</td>
          <td class="paramname"> <em>state</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get/Set the guest FPU/vector state. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00764">764</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00580">X86KvmCPU::dumpFpuRegs()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l00935">X86KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a358d4ac29890e7b72a25eefffa68f236"></a><!-- doxytag: member="BaseKvmCPU::getGuestData" ref="a358d4ac29890e7b72a25eefffa68f236" args="(uint64_t offset) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* BaseKvmCPU::getGuestData </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>offset</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieve a pointer to guest data stored at the end of the kvm_run structure. </p>
<p>This is mainly used for PIO operations (KVM_EXIT_IO).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>Offset as specified by the kvm_run structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to guest data </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00289">289</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l01282">X86KvmCPU::handleIOMiscReg32()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l01307">X86KvmCPU::handleKvmExitIO()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1bfb2e3a128923e86f944a565d97027"></a><!-- doxytag: member="BaseKvmCPU::getHostCycles" ref="ad1bfb2e3a128923e86f944a565d97027" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t BaseKvmCPU::getHostCycles </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the value of the hardware cycle counter in the guest. </p>
<p>This method is supposed to return the total number of cycles executed in hardware mode relative to some arbitrary point in the past. It's mainly used when estimating the number of cycles actually executed by the CPU in <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>. The default behavior of this method is to use the cycles performance counter, but some architectures may want to use internal registers instead.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of host cycles executed relative to an undefined point in the past. </dd></dl>

<p>Reimplemented in <a class="el" href="classX86KvmCPU.html#a379cc48e0e33411a2cd139fbd92c30ed">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00619">619</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">hwCycles</a>, and <a class="el" href="perfevent_8cc_source.html#l00137">PerfKvmCounter::read()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="aac23de9407e4e9c1f3b45e1ddf4f3749"></a><!-- doxytag: member="BaseKvmCPU::getInstPort" ref="aac23de9407e4e9c1f3b45e1ddf4f3749" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMasterPort.html">MasterPort</a>&amp; BaseKvmCPU::getInstPort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00100">100</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00575">instPort</a>.</p>

</div>
</div>
<a class="anchor" id="ae5c568b0d8f7a76d4d89c2575ae34190"></a><!-- doxytag: member="BaseKvmCPU::getKvmRunState" ref="ae5c568b0d8f7a76d4d89c2575ae34190" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kvm_run* BaseKvmCPU::getKvmRunState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, read, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a pointer to the kvm_run structure containing all the input and output parameters from <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00279">279</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l01282">X86KvmCPU::handleIOMiscReg32()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01307">X86KvmCPU::handleKvmExitIO()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01186">X86KvmCPU::kvmRun()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01232">X86KvmCPU::kvmRunDrain()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01257">X86KvmCPU::kvmRunWrapper()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l01023">X86KvmCPU::updateThreadContextSRegs()</a>.</p>

</div>
</div>
<a class="anchor" id="a37fb3b90d1db602a691b8d507d8b28f8"></a><!-- doxytag: member="BaseKvmCPU::getOneReg" ref="a37fb3b90d1db602a691b8d507d8b28f8" args="(uint64_t id, void *addr) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::getOneReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00796">796</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00357">getOneRegU32()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00352">getOneRegU64()</a>, and <a class="el" href="armv8__cpu_8cc_source.html#l00230">ArmV8KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="aaedf1eff8b7043f0037a6340e8da0236"></a><!-- doxytag: member="BaseKvmCPU::getOneRegU32" ref="aaedf1eff8b7043f0037a6340e8da0236" args="(uint64_t id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t BaseKvmCPU::getOneRegU32 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00357">357</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00796">getOneReg()</a>.</p>

<p>Referenced by <a class="el" href="arm__cpu_8cc_source.html#l00523">ArmKvmCPU::dumpKvmStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00462">ArmKvmCPU::dumpKvmStateCore()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00789">ArmKvmCPU::updateTCStateCoProc()</a>, and <a class="el" href="arm__cpu_8cc_source.html#l00726">ArmKvmCPU::updateTCStateCore()</a>.</p>

</div>
</div>
<a class="anchor" id="a3c337154c6c20c1667b4b63088d72d6e"></a><!-- doxytag: member="BaseKvmCPU::getOneRegU64" ref="a3c337154c6c20c1667b4b63088d72d6e" args="(uint64_t id) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t BaseKvmCPU::getOneRegU64 </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00352">352</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00796">getOneReg()</a>.</p>

<p>Referenced by <a class="el" href="arm__cpu_8cc_source.html#l00789">ArmKvmCPU::updateTCStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00825">ArmKvmCPU::updateTCStateVFP()</a>, and <a class="el" href="armv8__cpu_8cc_source.html#l00230">ArmV8KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a95237771da8d72f23cbcd56516fb95"></a><!-- doxytag: member="BaseKvmCPU::getRegisters" ref="a1a95237771da8d72f23cbcd56516fb95" args="(struct kvm_regs &amp;regs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::getRegisters </td>
          <td>(</td>
          <td class="paramtype">struct kvm_regs &amp;&nbsp;</td>
          <td class="paramname"> <em>regs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get/Set the register state of the guest vCPU. </p>
<p>KVM has two different interfaces for accessing the state of the guest CPU. One interface updates 'normal' registers and one updates 'special' registers. The distinction between special and normal registers isn't very clear and is architecture dependent. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00736">736</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00588">X86KvmCPU::dumpIntRegs()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l00935">X86KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a68a6a444166fe6abb8afe391acfac324"></a><!-- doxytag: member="BaseKvmCPU::getSpecialRegisters" ref="a68a6a444166fe6abb8afe391acfac324" args="(struct kvm_sregs &amp;regs) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::getSpecialRegisters </td>
          <td>(</td>
          <td class="paramtype">struct kvm_sregs &amp;&nbsp;</td>
          <td class="paramname"> <em>regs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00750">750</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00596">X86KvmCPU::dumpSpecRegs()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l00935">X86KvmCPU::updateThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b2a1ed34a91992f0e70181c5d3c4cc7"></a><!-- doxytag: member="BaseKvmCPU::haltContext" ref="a0b2a1ed34a91992f0e70181c5d3c4cc7" args="(ThreadID thread_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::haltContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>thread_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00485">485</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">suspendContext()</a>.</p>

</div>
</div>
<a class="anchor" id="ab8129c1d639db3f569e7bf0fb240ad99"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExit" ref="ab8129c1d639db3f569e7bf0fb240ad99" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the exit request </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">884</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">dump()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00982">handleKvmExitException()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00991">handleKvmExitFailEntry()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00960">handleKvmExitHypercall()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00952">handleKvmExitIO()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00966">handleKvmExitIRQWindowOpen()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00974">handleKvmExitUnknown()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00767">numHalt</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00769">numHypercalls</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00766">numIO</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00764">numMMIO</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00198">RunningService</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00207">RunningServiceCompletion</a>, <a class="el" href="simple__thread_8cc_source.html#l00174">SimpleThread::suspend()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="ae932b779ab2e08728757e96abd56a05f"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitException" ref="ae932b779ab2e08728757e96abd56a05f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitException </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An unhandled virtualization exception occured. </p>
<p>Some KVM virtualization drivers return unhandled exceptions to the user-space monitor. This interface is currently only used by the Intel VMX KVM driver.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks delay the next CPU tick </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00982">982</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">dump()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="ac3ac54ad644c0e39e2939ddb8d229d53"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitFailEntry" ref="ac3ac54ad644c0e39e2939ddb8d229d53" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitFailEntry </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>KVM failed to start the virtualized CPU. </p>
<p>The kvm_run data structure contains the hardware-specific error code.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks delay the next CPU tick </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00991">991</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">dump()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a715a3725bd34c3ec163a2a3adfbef6fa"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitHypercall" ref="a715a3725bd34c3ec163a2a3adfbef6fa" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitHypercall </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The guest requested a monitor service using a hypercall. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the hypercall </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00960">960</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="afa891ade544b6941a9361679fa16dd75"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitIO" ref="afa891ade544b6941a9361679fa16dd75" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitIO </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The guest performed a legacy IO request (out/inp on x86). </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the IO request </dd></dl>

<p>Reimplemented in <a class="el" href="classX86KvmCPU.html#af885393c54bc8fb99e984ec430cf3772">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00952">952</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a8846d88cf92f95473ee6d8ec52104ebf"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitIRQWindowOpen" ref="a8846d88cf92f95473ee6d8ec52104ebf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitIRQWindowOpen </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The guest exited because an interrupt window was requested. </p>
<p>The guest exited because an interrupt window was requested (request_interrupt_window in the kvm_run structure was set to 1 before calling kvmRun) and it is now ready to receive</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks spent servicing the IRQ </dd></dl>

<p>Reimplemented in <a class="el" href="classX86KvmCPU.html#ac48517484813134f3c76f1149106d82d">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00966">966</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00207">warn</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a7ffe8b58c9b6d8b64027829174fddc83"></a><!-- doxytag: member="BaseKvmCPU::handleKvmExitUnknown" ref="a7ffe8b58c9b6d8b64027829174fddc83" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::handleKvmExitUnknown </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An unknown architecture dependent error occurred when starting the vCPU. </p>
<p>The kvm_run data structure contains the hardware error code. The defaults behavior of this method just prints the HW error code and panics. Architecture dependent implementations may want to override this method to provide better, hardware-aware, error messages.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks delay the next CPU tick </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00974">974</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">dump()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>.</p>

</div>
</div>
<a class="anchor" id="a34a0a1356bf1253cd249046e75f0382f"></a><!-- doxytag: member="BaseKvmCPU::init" ref="a34a0a1356bf1253cd249046e75f0382f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::init </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00109">109</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="classThreadContext.html#a24eb06bed6e31118e646e47a4b5f01e4">ThreadContext::contextId()</a>, <a class="el" href="base_2misc_8hh_source.html#l00113">fatal</a>, <a class="el" href="root_8cc_source.html#l00167">FullSystem</a>, <a class="el" href="namespaceAlphaISA.html#a06411429ba06d7939a3aedc9099788eb">AlphaISA::initCPU()</a>, <a class="el" href="classThreadContext.html#a844977d4855f84e45560b8873247783a">ThreadContext::initMemProxies()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">tc</a>.</p>

</div>
</div>
<a class="anchor" id="a7bc12b93b0848b3f3d34fb2ea5c7f6a8"></a><!-- doxytag: member="BaseKvmCPU::ioctlRun" ref="a7bc12b93b0848b3f3d34fb2ea5c7f6a8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::ioctlRun </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Execute the KVM_RUN ioctl. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01223">1223</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="acece83a503d2f23246a2c36ade56b784"></a><!-- doxytag: member="BaseKvmCPU::kick" ref="acece83a503d2f23246a2c36ade56b784" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::kick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Force an exit from KVM. </p>
<p>Send a signal to the thread owning this vCPU to get it to exit from KVM. Ignored if the vCPU is not executing. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00122">122</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00056">KVM_KICK_SIGNAL</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00593">vcpuThread</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00419">wakeup()</a>.</p>

</div>
</div>
<a class="anchor" id="a76cee3dce21295def5b0ad86a25b3835"></a><!-- doxytag: member="BaseKvmCPU::kvmRun" ref="a76cee3dce21295def5b0ad86a25b3835" args="(Tick ticks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::kvmRun </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a>&nbsp;</td>
          <td class="paramname"> <em>ticks</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classRequest.html">Request</a> KVM to run the guest for a given number of ticks. </p>
<p>The method returns the approximate number of ticks executed.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The returned number of ticks can be both larger or smaller than the requested number of ticks. A smaller number can, for example, occur when the guest executes MMIO. A larger number is typically due to performance counter inaccuracies.</dd>
<dd>
This method is virtual in order to allow implementations to check for architecture specific events (e.g., interrupts) before entering the VM.</dd>
<dd>
It is the response of the caller (normally <a class="el" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick()</a>) to make sure that the KVM state is synchronized and that the TC is invalidated after entering KVM.</dd>
<dd>
This method does not normally cause any state transitions. However, if it may suspend the CPU by suspending the thread, which leads to a transition to the Idle state. In such a case, kvm <em>must not</em> be entered.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ticks</em>&nbsp;</td><td>Number of ticks to execute, set to 0 to exit immediately after finishing pending operations. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks executed (see note) </dd></dl>

<p>Reimplemented in <a class="el" href="classArmKvmCPU.html#af5f72dcc35a2f950b9c1634f18ed2352">ArmKvmCPU</a>, <a class="el" href="classBaseArmKvmCPU.html#a401322f8f86a4ffdaa065564dc07ccb0">BaseArmKvmCPU</a>, and <a class="el" href="classX86KvmCPU.html#accccbc3713ee47ad5518b986fdc84c65">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">625</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">ctrInsts</a>, <a class="el" href="eventq_8hh_source.html#l00088">curEventQueue()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01141">discardPendingSignal()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01070">flushCoalescedMMIO()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00619">getHostCycles()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00749">hostFactor</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">hwCycles</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00728">hwInstructions</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01223">ioctlRun()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00122">kick()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00056">KVM_KICK_SIGNAL</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00760">numInsts</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00761">numVMExits</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00762">numVMHalfEntries</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00737">perfControlledByTimer</a>, <a class="el" href="perfevent_8cc_source.html#l00137">PerfKvmCounter::read()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00746">runTimer</a>, <a class="el" href="perfevent_8cc_source.html#l00109">PerfKvmCounter::start()</a>, <a class="el" href="perfevent_8cc_source.html#l00116">PerfKvmCounter::stop()</a>, and <a class="el" href="arch_2x86_2regs_2misc_8hh_source.html#l00941">X86ISA::system</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00606">kvmRunDrain()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01257">X86KvmCPU::kvmRunWrapper()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a161d75e4dbb909622638f79c9bcf056a"></a><!-- doxytag: member="BaseKvmCPU::kvmRunDrain" ref="a161d75e4dbb909622638f79c9bcf056a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643">Tick</a> BaseKvmCPU::kvmRunDrain </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classRequest.html">Request</a> the CPU to run until draining completes. </p>
<p>This function normally calls kvmRun(0) to make KVM finish pending MMIO operations. Architecures implementing <a class="el" href="classBaseKvmCPU.html#a54071dbb3d109f869a60d06afffb46f3" title="Is the architecture specific code in a state that prevents draining?">archIsDrained()</a> must override this method.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBaseKvmCPU.html#a54071dbb3d109f869a60d06afffb46f3" title="Is the architecture specific code in a state that prevents draining?">BaseKvmCPU::archIsDrained()</a></dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of ticks executed </dd></dl>

<p>Reimplemented in <a class="el" href="classX86KvmCPU.html#afc4a95e130194f87d89fdd9fdd75394d">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00606">606</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00207">RunningServiceCompletion</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d60be092a969b71a6cd00962e84e802"></a><!-- doxytag: member="BaseKvmCPU::regStats" ref="a5d60be092a969b71a6cd00962e84e802" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::regStats </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">204</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="trace_8cc_source.html#l00047">name()</a>, <a class="el" href="statistics_8hh_source.html#l00250">Stats::DataWrap&lt; Derived, InfoProxyType &gt;::name()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00765">numCoalescedMMIO</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00763">numExitSignal</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00767">numHalt</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00769">numHypercalls</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00760">numInsts</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00768">numInterrupts</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00766">numIO</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00764">numMMIO</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00761">numVMExits</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00762">numVMHalfEntries</a>.</p>

</div>
</div>
<a class="anchor" id="a0ab506ad77f06c4221e1c24a7e03d6af"></a><!-- doxytag: member="BaseKvmCPU::serializeThread" ref="a0ab506ad77f06c4221e1c24a7e03d6af" args="(std::ostream &amp;os, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::serializeThread </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>os</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00262">262</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="base_2trace_8hh_source.html#l00209">DTRACE</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00514">dump()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="classSimpleThread.html#a97155456fe991d2e7484d1babe8487d1">SimpleThread::serialize()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>.</p>

</div>
</div>
<a class="anchor" id="a7c46f81a68500486be995b37d0fd28e8"></a><!-- doxytag: member="BaseKvmCPU::setFPUState" ref="a7c46f81a68500486be995b37d0fd28e8" args="(const struct kvm_fpu &amp;state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setFPUState </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_fpu &amp;&nbsp;</td>
          <td class="paramname"> <em>state</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00771">771</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00855">X86KvmCPU::updateKvmStateFPULegacy()</a>.</p>

</div>
</div>
<a class="anchor" id="a1591055a0183d94025eff752b898ec7c"></a><!-- doxytag: member="BaseKvmCPU::setOneReg" ref="a1591055a0183d94025eff752b898ec7c" args="(uint64_t id, uint32_t value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setOneReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00350">350</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00350">setOneReg()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00350">setOneReg()</a>.</p>

</div>
</div>
<a class="anchor" id="a19be9f5454d77a76f53ccdd7a7338816"></a><!-- doxytag: member="BaseKvmCPU::setOneReg" ref="a19be9f5454d77a76f53ccdd7a7338816" args="(uint64_t id, uint64_t value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setOneReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00349">349</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00349">setOneReg()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00349">setOneReg()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0f53751a234ae4107a2ad89236e4ce7"></a><!-- doxytag: member="BaseKvmCPU::setOneReg" ref="aa0f53751a234ae4107a2ad89236e4ce7" args="(uint64_t id, const void *addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setOneReg </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>addr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get/Set single register using the KVM_(SET|GET)_ONE_REG API. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The presence of this call depends on <a class="el" href="classKvm.html#ae7bb34f99b90fc417af396dccc3f7e2e" title="Support for reading and writing single registers.">Kvm::capOneReg()</a>. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00779">779</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="arm__cpu_8cc_source.html#l00316">ArmKvmCPU::onKvmExitHypercall()</a>, <a class="el" href="armv8__cpu_8cc_source.html#l00188">ArmV8KvmCPU::updateKvmState()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00650">ArmKvmCPU::updateKvmStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00586">ArmKvmCPU::updateKvmStateCore()</a>, and <a class="el" href="arm__cpu_8cc_source.html#l00684">ArmKvmCPU::updateKvmStateVFP()</a>.</p>

</div>
</div>
<a class="anchor" id="aebc7ec36486a368d9b6a55c06a61b57c"></a><!-- doxytag: member="BaseKvmCPU::setRegisters" ref="aebc7ec36486a368d9b6a55c06a61b57c" args="(const struct kvm_regs &amp;regs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setRegisters </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_regs &amp;&nbsp;</td>
          <td class="paramname"> <em>regs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00743">743</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00683">X86KvmCPU::updateKvmStateRegs()</a>.</p>

</div>
</div>
<a class="anchor" id="a9fad600b008e3a6cd434473b55e88ce1"></a><!-- doxytag: member="BaseKvmCPU::setSignalMask" ref="a9fad600b008e3a6cd434473b55e88ce1" args="(const sigset_t *mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setSignalMask </td>
          <td>(</td>
          <td class="paramtype">const sigset_t *&nbsp;</td>
          <td class="paramname"> <em>mask</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classSet.html">Set</a> the signal mask used in <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>. </p>
<p>This method allows the signal mask of the thread executing <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a> to be overridden inside the actual system call. This allows us to mask timer signals used to force KVM exits while in gem5.</p>
<p>The signal mask can be disabled by setting it to NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mask</em>&nbsp;</td><td>Signals to mask </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01040">1040</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01112">setupSignalHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="ae1f8b031817e1a09782a240f29ba010e"></a><!-- doxytag: member="BaseKvmCPU::setSpecialRegisters" ref="ae1f8b031817e1a09782a240f29ba010e" args="(const struct kvm_sregs &amp;regs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setSpecialRegisters </td>
          <td>(</td>
          <td class="paramtype">const struct kvm_sregs &amp;&nbsp;</td>
          <td class="paramname"> <em>regs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00757">757</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00750">X86KvmCPU::updateKvmStateSRegs()</a>.</p>

</div>
</div>
<a class="anchor" id="af3b88cae602a87fe804e9d6cb55c2b52"></a><!-- doxytag: member="BaseKvmCPU::setupCounters" ref="af3b88cae602a87fe804e9d6cb55c2b52" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setupCounters </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup hardware performance counters. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">1169</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00206">PerfKvmCounter::attach()</a>, <a class="el" href="perfevent_8hh_source.html#l00112">PerfKvmCounterConfig::disabled()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="perfevent_8hh_source.html#l00143">PerfKvmCounterConfig::exclude_host()</a>, <a class="el" href="perfevent_8hh_source.html#l00158">PerfKvmCounterConfig::exclude_hv()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">hwCycles</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00737">perfControlledByTimer</a>, <a class="el" href="perfevent_8hh_source.html#l00125">PerfKvmCounterConfig::pinned()</a>, <a class="el" href="perfevent_8hh_source.html#l00087">PerfKvmCounterConfig::samplePeriod()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">setupInstCounter()</a>, and <a class="el" href="perfevent_8hh_source.html#l00100">PerfKvmCounterConfig::wakeupEvents()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a5cc19a5e748c206aac1029fb2275afff"></a><!-- doxytag: member="BaseKvmCPU::setupInstCounter" ref="a5cc19a5e748c206aac1029fb2275afff" args="(uint64_t period=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setupInstCounter </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>period</em> = <code>0</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup the guest instruction counter. </p>
<p>Setup the guest instruction counter and optionally request a signal every N instructions executed by the guest. This method will re-attach the counter if the counter has already been attached and its sampling settings have changed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>period</em>&nbsp;</td><td>Signal period, set to 0 to disable signaling. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">1246</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00705">activeInstPeriod</a>, <a class="el" href="perfevent_8hh_source.html#l00206">PerfKvmCounter::attach()</a>, <a class="el" href="perfevent_8hh_source.html#l00230">PerfKvmCounter::attached()</a>, <a class="el" href="perfevent_8cc_source.html#l00095">PerfKvmCounter::detach()</a>, <a class="el" href="perfevent_8cc_source.html#l00146">PerfKvmCounter::enableSignals()</a>, <a class="el" href="perfevent_8hh_source.html#l00143">PerfKvmCounterConfig::exclude_host()</a>, <a class="el" href="perfevent_8hh_source.html#l00158">PerfKvmCounterConfig::exclude_hv()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">hwCycles</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00728">hwInstructions</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00056">KVM_KICK_SIGNAL</a>, <a class="el" href="perfevent_8hh_source.html#l00087">PerfKvmCounterConfig::samplePeriod()</a>, and <a class="el" href="perfevent_8hh_source.html#l00100">PerfKvmCounterConfig::wakeupEvents()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">setupCounters()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01233">setupInstStop()</a>.</p>

</div>
</div>
<a class="anchor" id="a3906dd2803114a8f19e2c20edd7f3d6c"></a><!-- doxytag: member="BaseKvmCPU::setupInstStop" ref="a3906dd2803114a8f19e2c20edd7f3d6c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setupInstStop </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup an instruction break if there is one pending. </p>
<p><a class="el" href="classCheck.html">Check</a> if there are pending instruction breaks in the CPU's instruction event queue and schedule an instruction break using PerfEvent.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This method doesn't currently handle the main system instruction event queue. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01233">1233</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">ctrInsts</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">setupInstCounter()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a928a5926b569a634bb8b39f4cad1e4b0"></a><!-- doxytag: member="BaseKvmCPU::setupSignalHandler" ref="a928a5926b569a634bb8b39f4cad1e4b0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::setupSignalHandler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup a signal handler to catch the timer signal used to switch back to the monitor. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01112">1112</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00056">KVM_KICK_SIGNAL</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01107">onKickSignal()</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01040">setSignalMask()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b92e68366e23238aeb55ca8ed2d4eed"></a><!-- doxytag: member="BaseKvmCPU::startup" ref="a0b92e68366e23238aeb55ca8ed2d4eed" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::startup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classArmKvmCPU.html#a4a13df2e0225e7674127dea91de828be">ArmKvmCPU</a>, <a class="el" href="classBaseArmKvmCPU.html#a66ed34d2e35a316285f4fa64d972e555">BaseArmKvmCPU</a>, and <a class="el" href="classX86KvmCPU.html#a3a1c654bc082fa0a34308a4958abac66">X86KvmCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">124</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="vm_8cc_source.html#l00123">Kvm::capCoalescedMMIO()</a>, <a class="el" href="vm_8cc_source.html#l00314">KvmVM::cpuStartup()</a>, <a class="el" href="vm_8cc_source.html#l00506">KvmVM::createVCPU()</a>, <a class="el" href="core_8hh_source.html#l00047">curTick()</a>, <a class="el" href="vm_8hh_source.html#l00089">Kvm::getVCPUMMapSize()</a>, <a class="el" href="base_2misc_8hh_source.html#l00209">inform</a>, <a class="el" href="vm_8hh_source.html#l00399">KvmVM::kvm</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00670">mmioRing</a>, <a class="el" href="pra__constants_8hh_source.html#l00325">MipsISA::p</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00672">pageSize</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="simple__thread_8cc_source.html#l00149">SimpleThread::startup()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00654">vcpuFD</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00590">vcpuID</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00656">vcpuMMapSize</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00144">vm</a>.</p>

</div>
</div>
<a class="anchor" id="ad38c1ec8d42a60ebdc99add259fb5999"></a><!-- doxytag: member="BaseKvmCPU::startupThread" ref="ad38c1ec8d42a60ebdc99add259fb5999" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::startupThread </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Thread-specific initialization. </p>
<p>Some KVM-related initialization requires us to know the TID of the thread that is going to execute our event queue. For example, when setting up timers, we need to know the TID of the thread executing in KVM in order to deliver the timer signal to that thread. This method is called as the first event in this SimObject's event queue.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">startup</a> </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">174</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">hwCycles</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00056">KVM_KICK_SIGNAL</a>, <a class="el" href="pra__constants_8hh_source.html#l00325">MipsISA::p</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00746">runTimer</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">setupCounters()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01112">setupSignalHandler()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00593">vcpuThread</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a5f5a7904a84946e0a68a848cdad4904d"></a><!-- doxytag: member="BaseKvmCPU::suspendContext" ref="a5f5a7904a84946e0a68a848cdad4904d" args="(ThreadID thread_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::suspendContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>thread_num</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">455</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00207">RunningServiceCompletion</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00478">deallocateContext()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00485">haltContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a11f90eb56ef107e1a045d0ec18d06539"></a><!-- doxytag: member="BaseKvmCPU::switchOut" ref="a11f90eb56ef107e1a045d0ec18d06539" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::switchOut </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00374">374</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>.</p>

</div>
</div>
<a class="anchor" id="a76325d5e0a5007e2a98d0641433d1b6c"></a><!-- doxytag: member="BaseKvmCPU::syncKvmState" ref="a76325d5e0a5007e2a98d0641433d1b6c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::syncKvmState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the KVM if the thread context is dirty. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00872">872</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00587">kvmStateDirty</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">threadContextDirty</a>, and <a class="el" href="classBaseKvmCPU.html#a74c51072421abe73972e1085f45f5f8b">updateKvmState()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="ad64da0a757d283b8a01ad93b2f896bda"></a><!-- doxytag: member="BaseKvmCPU::syncThreadContext" ref="ad64da0a757d283b8a01ad93b2f896bda" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::syncThreadContext </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update a thread context if the KVM state is dirty with respect to the cached thread context. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">860</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00587">kvmStateDirty</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">threadContextDirty</a>, and <a class="el" href="classBaseKvmCPU.html#ac943446adae87cc8b93f9adc9ce26158">updateThreadContext()</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l01133">X86KvmCPU::deliverInterrupts()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">drain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00492">getContext()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l01186">X86KvmCPU::kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="ac71dc0790561722c1a80a0c08e3a2b42"></a><!-- doxytag: member="BaseKvmCPU::takeOverFrom" ref="ac71dc0790561722c1a80a0c08e3a2b42" args="(BaseCPU *cpu)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::takeOverFrom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseCPU.html">BaseCPU</a> *&nbsp;</td>
          <td class="paramname"> <em>cpu</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00388">388</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="eventq_8hh_source.html#l00330">Event::scheduled()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">threadContextDirty</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>, and <a class="el" href="classBaseKvmCPU.html#a74c51072421abe73972e1085f45f5f8b">updateKvmState()</a>.</p>

</div>
</div>
<a class="anchor" id="a42e73730c44c3783bcfda7055a72d6fe"></a><!-- doxytag: member="BaseKvmCPU::tick" ref="a42e73730c44c3783bcfda7055a72d6fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::tick </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Execute the CPU until the next event in the main event queue or until the guest needs service from gem5. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">520</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">_kvmRun</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">ctrInsts</a>, <a class="el" href="eventq_8hh_source.html#l00088">curEventQueue()</a>, <a class="el" href="core_8hh_source.html#l00047">curTick()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00756">drainManager</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00606">kvmRunDrain()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00587">kvmStateDirty</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00763">numExitSignal</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00198">RunningService</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00207">RunningServiceCompletion</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01233">setupInstStop()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00872">syncKvmState()</a>, <a class="el" href="arch_2x86_2regs_2misc_8hh_source.html#l00941">X86ISA::system</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">tickEvent</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">tryDrain()</a>.</p>

</div>
</div>
<a class="anchor" id="aa5bd19e07ebabe47ee8e3cbabf0044cc"></a><!-- doxytag: member="BaseKvmCPU::totalInsts" ref="aa5bd19e07ebabe47ee8e3cbabf0044cc" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> BaseKvmCPU::totalInsts </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00501">501</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">ctrInsts</a>.</p>

</div>
</div>
<a class="anchor" id="a85730f1a6b530a2b25bf2f7cf44160cd"></a><!-- doxytag: member="BaseKvmCPU::totalOps" ref="a85730f1a6b530a2b25bf2f7cf44160cd" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> BaseKvmCPU::totalOps </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00507">507</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">ctrInsts</a>, and <a class="el" href="base_2misc_8hh_source.html#l00218">hack_once</a>.</p>

</div>
</div>
<a class="anchor" id="a7bf0f671f0e265e9c9dd6215365053db"></a><!-- doxytag: member="BaseKvmCPU::tryDrain" ref="a7bf0f671f0e265e9c9dd6215365053db" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BaseKvmCPU::tryDrain </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Try to drain the CPU if a drain is pending. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">1200</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00493">archIsDrained()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00756">drainManager</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00185">Running</a>, and <a class="el" href="drain_8hh_source.html#l00086">DrainManager::signalDrainDone()</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a8396acb3c803a3270e3abfa99ced7344"></a><!-- doxytag: member="BaseKvmCPU::unserializeThread" ref="a8396acb3c803a3270e3abfa99ced7344" args="(Checkpoint *cp, const std::string &amp;section, ThreadID tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::unserializeThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCheckpoint.html">Checkpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>cp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>section</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b">ThreadID</a>&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00275">275</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">_status</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00179">Idle</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">threadContextDirty</a>, and <a class="el" href="simple__thread_8cc_source.html#l00142">SimpleThread::unserialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a74c51072421abe73972e1085f45f5f8b"></a><!-- doxytag: member="BaseKvmCPU::updateKvmState" ref="a74c51072421abe73972e1085f45f5f8b" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseKvmCPU::updateKvmState </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the KVM state from the current thread context. </p>
<p>The base CPU calls this method before starting the guest CPU when the contextDirty flag is set. The architecture dependent CPU implementation is expected to update all guest state (registers, special registers, and FPU state). </p>

<p>Implemented in <a class="el" href="classArmKvmCPU.html#a261f4efb903938abc6a49de07f365c8f">ArmKvmCPU</a>, <a class="el" href="classArmV8KvmCPU.html#aceb73c045ccd95c5f651a4fbc5957ce2">ArmV8KvmCPU</a>, and <a class="el" href="classX86KvmCPU.html#a5c7db943978232d2aa35e40e2dbfc475">X86KvmCPU</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00872">syncKvmState()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00388">takeOverFrom()</a>.</p>

</div>
</div>
<a class="anchor" id="ac943446adae87cc8b93f9adc9ce26158"></a><!-- doxytag: member="BaseKvmCPU::updateThreadContext" ref="ac943446adae87cc8b93f9adc9ce26158" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void BaseKvmCPU::updateThreadContext </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the current thread context with the KVM state. </p>
<p>The base CPU after the guest updates any of the KVM state. In practice, this happens after kvmRun is called. The architecture dependent code is expected to read the state of the guest CPU and update gem5's thread state. </p>

<p>Implemented in <a class="el" href="classArmKvmCPU.html#a7a9547441a9a9d2db73e02c9b3dd0fce">ArmKvmCPU</a>, <a class="el" href="classArmV8KvmCPU.html#a13ac7e75d2ca44b73861ca2170115747">ArmV8KvmCPU</a>, and <a class="el" href="classX86KvmCPU.html#a65b33bc4874f13b2a8b1f74d1f8be29e">X86KvmCPU</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>.</p>

</div>
</div>
<a class="anchor" id="a30e6d6daf5db166e2ada8c6077c026e7"></a><!-- doxytag: member="BaseKvmCPU::verifyMemoryMode" ref="a30e6d6daf5db166e2ada8c6077c026e7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::verifyMemoryMode </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00410">410</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="base_2misc_8hh_source.html#l00113">fatal</a>, and <a class="el" href="arch_2x86_2regs_2misc_8hh_source.html#l00941">X86ISA::system</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00351">drainResume()</a>.</p>

</div>
</div>
<a class="anchor" id="acf9cb37eff5a3b34b93954279b6d815e"></a><!-- doxytag: member="BaseKvmCPU::wakeup" ref="acf9cb37eff5a3b34b93954279b6d815e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BaseKvmCPU::wakeup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classBaseCPU.html#a5e11729108b8ff656a3588f21a7bf980">BaseCPU</a>.</p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00419">419</a> of file <a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a>.</p>

<p>References <a class="el" href="simple__thread_8cc_source.html#l00163">SimpleThread::activate()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00122">kick()</a>, <a class="el" href="simple__thread_8hh_source.html#l00210">SimpleThread::status()</a>, <a class="el" href="thread__context_8hh_source.html#l00112">ThreadContext::Suspended</a>, and <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">thread</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a921798423b9111b1796f4ec2eee8b2d8"></a><!-- doxytag: member="BaseKvmCPU::_kvmRun" ref="a921798423b9111b1796f4ec2eee8b2d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kvm_run* <a class="el" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8">BaseKvmCPU::_kvmRun</a><code> [read, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the kvm_run structure used to communicate parameters with KVM. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This is the base pointer of the MMAPed KVM region. The first page contains the kvm_run structure. Subsequent pages may contain other data such as the MMIO ring buffer. </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00665">665</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00289">getGuestData()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00279">getKvmRunState()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00982">handleKvmExitException()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00991">handleKvmExitFailEntry()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00952">handleKvmExitIO()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00974">handleKvmExitUnknown()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00101">~BaseKvmCPU()</a>.</p>

</div>
</div>
<a class="anchor" id="a7435ef26f94d8129433dec26236fee4b"></a><!-- doxytag: member="BaseKvmCPU::_status" ref="a7435ef26f94d8129433dec26236fee4b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">Status</a> <a class="el" href="classBaseKvmCPU.html#a7435ef26f94d8129433dec26236fee4b">BaseKvmCPU::_status</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>CPU run state. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00211">211</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00437">activateContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">drain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00351">drainResume()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01186">X86KvmCPU::kvmRun()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00606">kvmRunDrain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00262">serializeThread()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">suspendContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00374">switchOut()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00388">takeOverFrom()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">tryDrain()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00275">unserializeThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a6dcca97a3389a195e02b8bc86f3645d8"></a><!-- doxytag: member="BaseKvmCPU::activeInstPeriod" ref="a6dcca97a3389a195e02b8bc86f3645d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classBaseKvmCPU.html#a6dcca97a3389a195e02b8bc86f3645d8">BaseKvmCPU::activeInstPeriod</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Currently active instruction count breakpoint. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00705">705</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">setupInstCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="adc8cb4eaa0af1bf66a8bf06674675531"></a><!-- doxytag: member="BaseKvmCPU::ctrInsts" ref="adc8cb4eaa0af1bf66a8bf06674675531" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e">Counter</a> <a class="el" href="classBaseKvmCPU.html#adc8cb4eaa0af1bf66a8bf06674675531">BaseKvmCPU::ctrInsts</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of instructions executed by the CPU. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00773">773</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01233">setupInstStop()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00501">totalInsts()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00507">totalOps()</a>.</p>

</div>
</div>
<a class="anchor" id="a91a536e52f05c96d88a83832db91b543"></a><!-- doxytag: member="BaseKvmCPU::dataPort" ref="a91a536e52f05c96d88a83832db91b543" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseKvmCPU_1_1KVMCpuPort.html">KVMCpuPort</a> <a class="el" href="classBaseKvmCPU.html#a91a536e52f05c96d88a83832db91b543">BaseKvmCPU::dataPort</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classPort.html" title="Ports are used to interface memory objects to each other.">Port</a> for data requests. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00572">572</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00099">getDataPort()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l01307">X86KvmCPU::handleKvmExitIO()</a>.</p>

</div>
</div>
<a class="anchor" id="ae81629c1d898d8972c08024e006155e2"></a><!-- doxytag: member="BaseKvmCPU::drainManager" ref="ae81629c1d898d8972c08024e006155e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classDrainManager.html">DrainManager</a>* <a class="el" href="classBaseKvmCPU.html#ae81629c1d898d8972c08024e006155e2">BaseKvmCPU::drainManager</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Drain manager to use when signaling drain completion. </p>
<p>This pointer is non-NULL when draining and NULL otherwise. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00756">756</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">drain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01200">tryDrain()</a>.</p>

</div>
</div>
<a class="anchor" id="a68510abea47eae94e7688617fb01ad32"></a><!-- doxytag: member="BaseKvmCPU::hostFactor" ref="a68510abea47eae94e7688617fb01ad32" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classBaseKvmCPU.html#a68510abea47eae94e7688617fb01ad32">BaseKvmCPU::hostFactor</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Host factor as specified in the configuration. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00749">749</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="aea857e4c19de0868d0ee8af9ee3d55fb"></a><!-- doxytag: member="BaseKvmCPU::hwCycles" ref="aea857e4c19de0868d0ee8af9ee3d55fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> <a class="el" href="classBaseKvmCPU.html#aea857e4c19de0868d0ee8af9ee3d55fb">BaseKvmCPU::hwCycles</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Guest cycle counter. </p>
<p>This is the group leader of all performance counters measuring the guest system. It can be used in conjunction with the <a class="el" href="classPerfKvmTimer.html" title="PerfEvent based timer using the host&#39;s CPU cycle counter.">PerfKvmTimer</a> (see perfControlledByTimer) to trigger exits from KVM. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00715">715</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00619">getHostCycles()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">setupCounters()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">setupInstCounter()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>.</p>

</div>
</div>
<a class="anchor" id="afca88c702e9049ff52ff54ef46125c67"></a><!-- doxytag: member="BaseKvmCPU::hwInstructions" ref="afca88c702e9049ff52ff54ef46125c67" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> <a class="el" href="classBaseKvmCPU.html#afca88c702e9049ff52ff54ef46125c67">BaseKvmCPU::hwInstructions</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Guest instruction counter. </p>
<p>This counter is typically only used to measure the number of instructions executed by the guest. However, it can also be used to trigger exits from KVM if the configuration script requests an exit after a certain number of instructions.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>setupInstBreak </dd>
<dd>
scheduleInstStop </dd></dl>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00728">728</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">setupInstCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="ab93dc5f839cd51bc9dd874e2444246d2"></a><!-- doxytag: member="BaseKvmCPU::instPort" ref="ab93dc5f839cd51bc9dd874e2444246d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBaseKvmCPU_1_1KVMCpuPort.html">KVMCpuPort</a> <a class="el" href="classBaseKvmCPU.html#ab93dc5f839cd51bc9dd874e2444246d2">BaseKvmCPU::instPort</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unused dummy port for the instruction interface. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00575">575</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00100">getInstPort()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a3ff86d7ad1c0a61239ccd546483509"></a><!-- doxytag: member="BaseKvmCPU::kvmStateDirty" ref="a2a3ff86d7ad1c0a61239ccd546483509" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseKvmCPU.html#a2a3ff86d7ad1c0a61239ccd546483509">BaseKvmCPU::kvmStateDirty</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is the KVM state dirty? <a class="el" href="classSet.html">Set</a> to true to force an update of the KVM vCPU state upon the next call to <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00587">587</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00872">syncKvmState()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a68a8659a8d3179abe50a731f815ef747"></a><!-- doxytag: member="BaseKvmCPU::mmioRing" ref="a68a8659a8d3179abe50a731f815ef747" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct kvm_coalesced_mmio_ring* <a class="el" href="classBaseKvmCPU.html#a68a8659a8d3179abe50a731f815ef747">BaseKvmCPU::mmioRing</a><code> [read, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Coalesced MMIO ring buffer. </p>
<p>NULL if coalesced MMIO is not supported. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00670">670</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01070">flushCoalescedMMIO()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a7bce04f0abf294aca4d387b49c96ba5f"></a><!-- doxytag: member="BaseKvmCPU::numCoalescedMMIO" ref="a7bce04f0abf294aca4d387b49c96ba5f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a7bce04f0abf294aca4d387b49c96ba5f">BaseKvmCPU::numCoalescedMMIO</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00765">765</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01070">flushCoalescedMMIO()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a1a010b1f0693ae392c63c95c6d0ea6ab"></a><!-- doxytag: member="BaseKvmCPU::numExitSignal" ref="a1a010b1f0693ae392c63c95c6d0ea6ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a1a010b1f0693ae392c63c95c6d0ea6ab">BaseKvmCPU::numExitSignal</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00763">763</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a8a6e72dbcfbfc1afcdb7d9c94de162f2"></a><!-- doxytag: member="BaseKvmCPU::numHalt" ref="a8a6e72dbcfbfc1afcdb7d9c94de162f2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a8a6e72dbcfbfc1afcdb7d9c94de162f2">BaseKvmCPU::numHalt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00767">767</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a619c8830cb550ef275dd4a0a47edef8a"></a><!-- doxytag: member="BaseKvmCPU::numHypercalls" ref="a619c8830cb550ef275dd4a0a47edef8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a619c8830cb550ef275dd4a0a47edef8a">BaseKvmCPU::numHypercalls</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00769">769</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a5161d6436b08aa367b2000806fe1e5f8"></a><!-- doxytag: member="BaseKvmCPU::numInsts" ref="a5161d6436b08aa367b2000806fe1e5f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a5161d6436b08aa367b2000806fe1e5f8">BaseKvmCPU::numInsts</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00760">760</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a452e50a7b2262714498826e45339e7b5"></a><!-- doxytag: member="BaseKvmCPU::numInterrupts" ref="a452e50a7b2262714498826e45339e7b5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a452e50a7b2262714498826e45339e7b5">BaseKvmCPU::numInterrupts</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00768">768</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00728">kvmInterrupt()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00720">kvmNonMaskableInterrupt()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4429e17626f97f4b62feca39b33d945"></a><!-- doxytag: member="BaseKvmCPU::numIO" ref="aa4429e17626f97f4b62feca39b33d945" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#aa4429e17626f97f4b62feca39b33d945">BaseKvmCPU::numIO</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00766">766</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e49ef5fb12791a1db1cfe6ae08fdb5d"></a><!-- doxytag: member="BaseKvmCPU::numMMIO" ref="a9e49ef5fb12791a1db1cfe6ae08fdb5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#a9e49ef5fb12791a1db1cfe6ae08fdb5d">BaseKvmCPU::numMMIO</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00764">764</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1351d57530b3ac5f5299fcda03d31a5"></a><!-- doxytag: member="BaseKvmCPU::numVMExits" ref="ad1351d57530b3ac5f5299fcda03d31a5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#ad1351d57530b3ac5f5299fcda03d31a5">BaseKvmCPU::numVMExits</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00761">761</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="adcba58d8641d82284275bb01e1ae93fb"></a><!-- doxytag: member="BaseKvmCPU::numVMHalfEntries" ref="adcba58d8641d82284275bb01e1ae93fb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classStats_1_1Scalar.html">Stats::Scalar</a> <a class="el" href="classBaseKvmCPU.html#adcba58d8641d82284275bb01e1ae93fb">BaseKvmCPU::numVMHalfEntries</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00762">762</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00204">regStats()</a>.</p>

</div>
</div>
<a class="anchor" id="a89561c02c2cdd8e8f03999db3ad6ad11"></a><!-- doxytag: member="BaseKvmCPU::pageSize" ref="a89561c02c2cdd8e8f03999db3ad6ad11" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const long <a class="el" href="classBaseKvmCPU.html#a89561c02c2cdd8e8f03999db3ad6ad11">BaseKvmCPU::pageSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cached page size of the host. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00672">672</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00066">BaseKvmCPU()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a80b133297febc24ee0fd1180ff29202e"></a><!-- doxytag: member="BaseKvmCPU::perfControlledByTimer" ref="a80b133297febc24ee0fd1180ff29202e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseKvmCPU.html#a80b133297febc24ee0fd1180ff29202e">BaseKvmCPU::perfControlledByTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Does the runTimer control the performance counters? </p>
<p>The run timer will automatically enable and disable performance counters if a PerfEvent-based timer is used to control KVM exits. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00737">737</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">setupCounters()</a>.</p>

</div>
</div>
<a class="anchor" id="aa018c869ec7b83023f122bedf9268994"></a><!-- doxytag: member="BaseKvmCPU::runTimer" ref="aa018c869ec7b83023f122bedf9268994" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classBaseKvmTimer.html">BaseKvmTimer</a>&gt; <a class="el" href="classBaseKvmCPU.html#aa018c869ec7b83023f122bedf9268994">BaseKvmCPU::runTimer</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timer used to force execution into the monitor after a specified number of simulation tick equivalents have executed in the guest. </p>
<p>This counter generates the signal specified by KVM_TIMER_SIGNAL. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00746">746</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>.</p>

</div>
</div>
<a class="anchor" id="a37b0833de5c513bb273b2ef526ae4327"></a><!-- doxytag: member="BaseKvmCPU::tc" ref="a37b0833de5c513bb273b2ef526ae4327" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classThreadContext.html">ThreadContext</a>* <a class="el" href="classBaseKvmCPU.html#a37b0833de5c513bb273b2ef526ae4327">BaseKvmCPU::tc</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> object, provides an interface for external objects to modify this thread's state. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00142">142</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00066">BaseKvmCPU()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01133">X86KvmCPU::deliverInterrupts()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00351">drainResume()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00523">ArmKvmCPU::dumpKvmStateCoProc()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00492">getContext()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01282">X86KvmCPU::handleIOMiscReg32()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01307">X86KvmCPU::handleKvmExitIO()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00109">init()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01186">X86KvmCPU::kvmRun()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01257">X86KvmCPU::kvmRunWrapper()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00316">ArmKvmCPU::onKvmExitHypercall()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01423">X86KvmCPU::updateCPUID()</a>, <a class="el" href="armv8__cpu_8cc_source.html#l00188">ArmV8KvmCPU::updateKvmState()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00650">ArmKvmCPU::updateKvmStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00586">ArmKvmCPU::updateKvmStateCore()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00855">X86KvmCPU::updateKvmStateFPULegacy()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00879">X86KvmCPU::updateKvmStateFPUXSave()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00913">X86KvmCPU::updateKvmStateMSRs()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00683">X86KvmCPU::updateKvmStateRegs()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00750">X86KvmCPU::updateKvmStateSRegs()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00684">ArmKvmCPU::updateKvmStateVFP()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00789">ArmKvmCPU::updateTCStateCoProc()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00726">ArmKvmCPU::updateTCStateCore()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00825">ArmKvmCPU::updateTCStateVFP()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00935">X86KvmCPU::updateThreadContext()</a>, <a class="el" href="armv8__cpu_8cc_source.html#l00230">ArmV8KvmCPU::updateThreadContext()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01079">X86KvmCPU::updateThreadContextFPU()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01103">X86KvmCPU::updateThreadContextMSRs()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00969">X86KvmCPU::updateThreadContextRegs()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l01090">X86KvmCPU::updateThreadContextXSave()</a>.</p>

</div>
</div>
<a class="anchor" id="aefb406bd528f64ecb5036b600e401a87"></a><!-- doxytag: member="BaseKvmCPU::thread" ref="aefb406bd528f64ecb5036b600e401a87" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSimpleThread.html">SimpleThread</a>* <a class="el" href="classBaseKvmCPU.html#aefb406bd528f64ecb5036b600e401a87">BaseKvmCPU::thread</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A cached copy of a thread's state in the form of a <a class="el" href="classSimpleThread.html" title="The SimpleThread object provides a combination of the ThreadState object and the...">SimpleThread</a> object. </p>
<p>Normally the actual thread state is stored in the KVM vCPU. If KVM has been running this copy is will be out of date. If we recently handled some events within gem5 that required state to be updated this could be the most up-to-date copy. When <a class="el" href="classBaseKvmCPU.html#a6f22743c4c1dd4acb3ee5d1fad6f0dd3">getContext()</a> or <a class="el" href="classBaseKvmCPU.html#ac943446adae87cc8b93f9adc9ce26158" title="Update the current thread context with the KVM state.">updateThreadContext()</a> is called this copy gets updated. The method syncThreadContext can be used within a KVM CPU to update the thread context if the KVM state is dirty (i.e., the vCPU has been run since the last update). </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00137">137</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00437">activateContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00066">BaseKvmCPU()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01133">X86KvmCPU::deliverInterrupts()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00884">handleKvmExit()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00262">serializeThread()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">suspendContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00275">unserializeThread()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00419">wakeup()</a>.</p>

</div>
</div>
<a class="anchor" id="a2242ff2f4ed324f075563acbfe087bb2"></a><!-- doxytag: member="BaseKvmCPU::threadContextDirty" ref="a2242ff2f4ed324f075563acbfe087bb2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classBaseKvmCPU.html#a2242ff2f4ed324f075563acbfe087bb2">BaseKvmCPU::threadContextDirty</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is the gem5 context dirty? <a class="el" href="classSet.html">Set</a> to true to force an update of the KVM vCPU state upon the next call to <a class="el" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun()</a>. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00581">581</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l01133">X86KvmCPU::deliverInterrupts()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00872">syncKvmState()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00860">syncThreadContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00388">takeOverFrom()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00275">unserializeThread()</a>.</p>

</div>
</div>
<a class="anchor" id="aff1a2d1464cf96917d3c73470f58f6a9"></a><!-- doxytag: member="BaseKvmCPU::tickEvent" ref="aff1a2d1464cf96917d3c73470f58f6a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structBaseKvmCPU_1_1TickEvent.html">TickEvent</a> <a class="el" href="classBaseKvmCPU.html#aff1a2d1464cf96917d3c73470f58f6a9">BaseKvmCPU::tickEvent</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00674">674</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00437">activateContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00287">drain()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00351">drainResume()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00455">suspendContext()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00374">switchOut()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00388">takeOverFrom()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00520">tick()</a>.</p>

</div>
</div>
<a class="anchor" id="a7e834ee8f89ef9310d9b182ec658fcc5"></a><!-- doxytag: member="BaseKvmCPU::vcpuFD" ref="a7e834ee8f89ef9310d9b182ec658fcc5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseKvmCPU.html#a7e834ee8f89ef9310d9b182ec658fcc5">BaseKvmCPU::vcpuFD</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>KVM vCPU file descriptor. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00654">654</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01061">ioctl()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00101">~BaseKvmCPU()</a>.</p>

</div>
</div>
<a class="anchor" id="a2052ce54091f66f08c0f0dee6904710f"></a><!-- doxytag: member="BaseKvmCPU::vcpuID" ref="a2052ce54091f66f08c0f0dee6904710f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const long <a class="el" href="classBaseKvmCPU.html#a2052ce54091f66f08c0f0dee6904710f">BaseKvmCPU::vcpuID</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>KVM internal ID of the vCPU. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00590">590</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="base__cpu_8cc_source.html#l00087">BaseArmKvmCPU::kvmRun()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00271">ArmKvmCPU::kvmRun()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a2e3101897bc843bb19b057474d703c3c"></a><!-- doxytag: member="BaseKvmCPU::vcpuMMapSize" ref="a2e3101897bc843bb19b057474d703c3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classBaseKvmCPU.html#a2e3101897bc843bb19b057474d703c3c">BaseKvmCPU::vcpuMMapSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Size of MMAPed kvm_run area. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00656">656</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00101">~BaseKvmCPU()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4cdb6b70bc4e835df19e53f05dafd33"></a><!-- doxytag: member="BaseKvmCPU::vcpuThread" ref="ac4cdb6b70bc4e835df19e53f05dafd33" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t <a class="el" href="classBaseKvmCPU.html#ac4cdb6b70bc4e835df19e53f05dafd33">BaseKvmCPU::vcpuThread</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ID of the vCPU thread. </p>

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00593">593</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00122">kick()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00174">startupThread()</a>.</p>

</div>
</div>
<a class="anchor" id="adeeeb00ef99797a5acd84121aa9d48ce"></a><!-- doxytag: member="BaseKvmCPU::vm" ref="adeeeb00ef99797a5acd84121aa9d48ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKvmVM.html">KvmVM</a>&amp; <a class="el" href="classBaseKvmCPU.html#adeeeb00ef99797a5acd84121aa9d48ce">BaseKvmCPU::vm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="cpu_2kvm_2base_8hh_source.html#l00144">144</a> of file <a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00999">doMMIOAccess()</a>, <a class="el" href="x86__cpu_8cc_source.html#l00650">X86KvmCPU::dumpMSRs()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01539">X86KvmCPU::getMsrIntersection()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01307">X86KvmCPU::handleKvmExitIO()</a>, <a class="el" href="base__cpu_8cc_source.html#l00087">BaseArmKvmCPU::kvmRun()</a>, <a class="el" href="arm__cpu_8cc_source.html#l00271">ArmKvmCPU::kvmRun()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">startup()</a>, <a class="el" href="base__cpu_8cc_source.html#l00071">BaseArmKvmCPU::startup()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l00518">X86KvmCPU::X86KvmCPU()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cpu/kvm/<a class="el" href="cpu_2kvm_2base_8hh_source.html">base.hh</a></li>
<li>cpu/kvm/<a class="el" href="cpu_2kvm_2base_8cc_source.html">base.cc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:16 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
