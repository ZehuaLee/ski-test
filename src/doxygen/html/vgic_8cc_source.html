<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: dev/arm/vgic.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>dev/arm/vgic.cc</h1><a href="vgic_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2013 ARM Limited</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * The license below extends only to copyright in the software and shall</span>
<a name="l00006"></a>00006 <span class="comment"> * not be construed as granting a license to any other intellectual</span>
<a name="l00007"></a>00007 <span class="comment"> * property including but not limited to intellectual property relating</span>
<a name="l00008"></a>00008 <span class="comment"> * to a hardware implementation of the functionality of the software</span>
<a name="l00009"></a>00009 <span class="comment"> * licensed hereunder.  You may use the software subject to the license</span>
<a name="l00010"></a>00010 <span class="comment"> * terms below provided that you ensure that this notice is replicated</span>
<a name="l00011"></a>00011 <span class="comment"> * unmodified and in its entirety in all distributions of the software,</span>
<a name="l00012"></a>00012 <span class="comment"> * modified or unmodified, in source code or in binary form.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00016"></a>00016 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00017"></a>00017 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00018"></a>00018 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00019"></a>00019 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00020"></a>00020 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00021"></a>00021 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00022"></a>00022 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00023"></a>00023 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00026"></a>00026 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00027"></a>00027 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00028"></a>00028 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00029"></a>00029 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00030"></a>00030 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00031"></a>00031 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00032"></a>00032 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00033"></a>00033 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00034"></a>00034 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00035"></a>00035 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00036"></a>00036 <span class="comment"> *</span>
<a name="l00037"></a>00037 <span class="comment"> * Authors: Matt Evans</span>
<a name="l00038"></a>00038 <span class="comment"> */</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="base_2trace_8hh.html">base/trace.hh</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;debug/Checkpoint.hh&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;debug/VGIC.hh&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="base__gic_8hh.html" title="Base class for ARM GIC implementations.">dev/arm/base_gic.hh</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="vgic_8hh.html" title="Implementiation of a GIC-400 List Register-based VGIC interface.">dev/arm/vgic.hh</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="terminal_8hh.html">dev/terminal.hh</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="packet_8hh.html" title="Declaration of the Packet class.">mem/packet.hh</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="packet__access_8hh.html">mem/packet_access.hh</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="classVGic.html#ade5a48c4a73059a8b336d202c35965d3">00049</a> <a class="code" href="classVGic.html#ade5a48c4a73059a8b336d202c35965d3">VGic::VGic</a>(<span class="keyword">const</span> Params *<a class="code" href="namespaceMipsISA.html#ae12ae9e12fab22594609e2fefce7f7c2">p</a>)
<a name="l00050"></a>00050     : <a class="code" href="classPioDevice.html" title="This device is the base class which all devices senstive to an address range inherit...">PioDevice</a>(p), platform(p-&gt;platform), gic(p-&gt;gic), vcpuAddr(p-&gt;vcpu_addr),
<a name="l00051"></a>00051       hvAddr(p-&gt;hv_addr), pioDelay(p-&gt;pio_delay),
<a name="l00052"></a>00052       maintInt(p-&gt;ppint)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a> = 0; <a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a> &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>; <a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a>++) {
<a name="l00055"></a>00055         <a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[<a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a>] = <span class="keyword">new</span> <a class="code" href="classVGic_1_1PostVIntEvent.html" title="Event definition to post interrupt to CPU after a delay.">PostVIntEvent</a>(<a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a>, p-&gt;platform);
<a name="l00056"></a>00056         <a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>[<a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a>] = <span class="keyword">false</span>;
<a name="l00057"></a>00057         <a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>[<a class="code" href="namespaceX86ISA.html#a7329cbd3da39e27c5b311899bac95a04">x</a>] = <span class="keyword">false</span>;
<a name="l00058"></a>00058     }
<a name="l00059"></a>00059     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a> = 0; <a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a> &lt; VGIC_CPU_MAX; <a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a>++) {
<a name="l00060"></a>00060         memset(&amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[<a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a>], 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> vcpuIntData));
<a name="l00061"></a>00061     }
<a name="l00062"></a>00062     assert(<a class="code" href="classPioDevice.html#ae9a625f7038edc40a855f58b011bd2d4">sys</a>-&gt;<a class="code" href="classSystem.html#a1dd55932d5de44449c1de45616835daf" title="Return number of running (non-halted) thread contexts in system.">numRunningContexts</a>() &lt;= VGIC_CPU_MAX);
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a>00065 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00066"></a><a class="code" href="classVGic.html#ad73b50189ce1d8f5e05c0b184b825ffe">00066</a> <a class="code" href="classVGic.html#ad73b50189ce1d8f5e05c0b184b825ffe" title="Pure virtual function that the device must implement.">VGic::read</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00067"></a>00067 {
<a name="l00068"></a>00068     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a> = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>();
<a name="l00069"></a>00069 
<a name="l00070"></a>00070     <span class="keywordflow">if</span> (addr &gt;= <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a> &amp;&amp; addr &lt; <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a> + <a class="code" href="classVGic.html#a2ae71102f3612a39b561e4cac8ef3077">GICV_SIZE</a>)
<a name="l00071"></a>00071         <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a7788ec753ba0595743e9ec03a5233f2b">readVCpu</a>(pkt);
<a name="l00072"></a>00072     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addr &gt;= <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a> &amp;&amp; addr &lt; <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a> + <a class="code" href="classVGic.html#a554c4b86628edcb6bf0809635e5fd981">GICH_REG_SIZE</a>)
<a name="l00073"></a>00073         <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a2ff0f6fe7879f70ecbabb9465be9cc65">readCtrl</a>(pkt);
<a name="l00074"></a>00074     <span class="keywordflow">else</span>
<a name="l00075"></a>00075         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Read to unknown address %#x\n&quot;</span>, pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>());
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00079"></a><a class="code" href="classVGic.html#ab3fb2b6fe1acd07658c9231a83f0a9c9">00079</a> <a class="code" href="classVGic.html#ab3fb2b6fe1acd07658c9231a83f0a9c9" title="Pure virtual function that the device must implement.">VGic::write</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00080"></a>00080 {
<a name="l00081"></a>00081     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a> = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>();
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="keywordflow">if</span> (addr &gt;= <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a> &amp;&amp; addr &lt; <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a> + <a class="code" href="classVGic.html#a2ae71102f3612a39b561e4cac8ef3077">GICV_SIZE</a>)
<a name="l00084"></a>00084         <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a3f24e43d1590891eea1609fc5259dbe5">writeVCpu</a>(pkt);
<a name="l00085"></a>00085     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addr &gt;= <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a> &amp;&amp; addr &lt; <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a> + <a class="code" href="classVGic.html#a554c4b86628edcb6bf0809635e5fd981">GICH_REG_SIZE</a>)
<a name="l00086"></a>00086         <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a274ce47ad03ab948fec809d98da04290">writeCtrl</a>(pkt);
<a name="l00087"></a>00087     <span class="keywordflow">else</span>
<a name="l00088"></a>00088         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Write to unknown address %#x\n&quot;</span>, pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>());
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00092"></a><a class="code" href="classVGic.html#a7788ec753ba0595743e9ec03a5233f2b">00092</a> <a class="code" href="classVGic.html#a7788ec753ba0595743e9ec03a5233f2b">VGic::readVCpu</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>() - <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a>;
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="keywordtype">int</span> ctx_id = pkt-&gt;<a class="code" href="classPacket.html#af08e5e99e9dbed0709d921f3edbb4ec6" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a49fb5bcad2ab0d274bdb4f5efb8cf8d9" title="Accessor function for context ID.">contextId</a>();
<a name="l00097"></a>00097     assert(ctx_id &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00098"></a>00098     <span class="keyword">struct </span>vcpuIntData *vid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[ctx_id];
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;VGIC VCPU read register %#x\n&quot;</span>, daddr);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">switch</span> (daddr) {
<a name="l00103"></a>00103       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a14d424b418c13f295468c8f93b268e47">GICV_CTLR</a>:
<a name="l00104"></a>00104         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(vid-&gt;vctrl);
<a name="l00105"></a>00105         <span class="keywordflow">break</span>;
<a name="l00106"></a>00106       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a3288a737445a9e16355ad0a619575a59">GICV_IAR</a>: {
<a name="l00107"></a>00107           <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = <a class="code" href="classVGic.html#a0b7c9874f5032b63cb12c40febb93f23" title="Returns LR index or -1 if none pending.">findHighestPendingLR</a>(vid);
<a name="l00108"></a>00108           <span class="keywordflow">if</span> (i &lt; 0 || !vid-&gt;vctrl.En) {
<a name="l00109"></a>00109               pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(1023); <span class="comment">// &quot;No int&quot; marker</span>
<a name="l00110"></a>00110           } <span class="keywordflow">else</span> {
<a name="l00111"></a>00111               ListReg *lr = &amp;vid-&gt;LR[i];
<a name="l00112"></a>00112 
<a name="l00113"></a>00113               pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(lr-&gt;VirtualID |
<a name="l00114"></a>00114                                  (((int)lr-&gt;CpuID) &lt;&lt; 10));
<a name="l00115"></a>00115               <span class="comment">// We don&apos;t support auto-EOI of HW interrupts via real GIC!</span>
<a name="l00116"></a>00116               <span class="comment">// Fortunately, KVM doesn&apos;t use this.  How about Xen...? Ulp!</span>
<a name="l00117"></a>00117               <span class="keywordflow">if</span> (lr-&gt;HW)
<a name="l00118"></a>00118                   <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC does not support &apos;HW&apos; List Register feature (LR %#x)!\n&quot;</span>,
<a name="l00119"></a>00119                         *lr);
<a name="l00120"></a>00120               lr-&gt;State = <a class="code" href="classVGic.html#ab8273d6edcd19bdc4d82ef05de7ece14">LR_ACTIVE</a>;
<a name="l00121"></a>00121               <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;Consumed interrupt %d (cpu%d) from LR%d (EOI%d)\n&quot;</span>,
<a name="l00122"></a>00122                       lr-&gt;VirtualID, lr-&gt;CpuID, i, lr-&gt;EOI);
<a name="l00123"></a>00123           }
<a name="l00124"></a>00124       } <span class="keywordflow">break</span>;
<a name="l00125"></a>00125       <span class="keywordflow">default</span>:
<a name="l00126"></a>00126         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC VCPU read of bad address %#x\n&quot;</span>, daddr);
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00129"></a>00129     <a class="code" href="classVGic.html#ab0b59d466e1d82b435bcd4270394eb07">updateIntState</a>(ctx_id);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131     pkt-&gt;<a class="code" href="classPacket.html#a79f71e6885712d4951e70eaba2e364cb">makeAtomicResponse</a>();
<a name="l00132"></a>00132     <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>;
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00136"></a><a class="code" href="classVGic.html#a2ff0f6fe7879f70ecbabb9465be9cc65">00136</a> <a class="code" href="classVGic.html#a2ff0f6fe7879f70ecbabb9465be9cc65">VGic::readCtrl</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00137"></a>00137 {
<a name="l00138"></a>00138     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>() - <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a>;
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="keywordtype">int</span> ctx_id = pkt-&gt;<a class="code" href="classPacket.html#af08e5e99e9dbed0709d921f3edbb4ec6" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a49fb5bcad2ab0d274bdb4f5efb8cf8d9" title="Accessor function for context ID.">contextId</a>();
<a name="l00141"></a>00141 
<a name="l00142"></a>00142     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;VGIC HVCtrl read register %#x\n&quot;</span>, daddr);
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <span class="comment">/* Munge the address: 0-0xfff is the usual space banked by requester CPU.</span>
<a name="l00145"></a>00145 <span class="comment">     * Anything &gt; that is 0x200-sized slices of &apos;per CPU&apos; regs.</span>
<a name="l00146"></a>00146 <span class="comment">     */</span>
<a name="l00147"></a>00147     <span class="keywordflow">if</span> (daddr &amp; ~0x1ff) {
<a name="l00148"></a>00148         ctx_id = (daddr &gt;&gt; 9);
<a name="l00149"></a>00149         <span class="keywordflow">if</span> (ctx_id &gt; 8)
<a name="l00150"></a>00150             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC: Weird unbanked hv ctrl address %#x!\n&quot;</span>, daddr);
<a name="l00151"></a>00151         daddr &amp;= ~0x1ff;
<a name="l00152"></a>00152     }
<a name="l00153"></a>00153     assert(ctx_id &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00154"></a>00154     <span class="keyword">struct </span>vcpuIntData *vid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[ctx_id];
<a name="l00155"></a>00155 
<a name="l00156"></a>00156     <span class="keywordflow">switch</span> (daddr) {
<a name="l00157"></a>00157       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#af6e0e96ebd0a13266be8a033fed97cf4">GICH_HCR</a>:
<a name="l00158"></a>00158         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(vid-&gt;hcr);
<a name="l00159"></a>00159         <span class="keywordflow">break</span>;
<a name="l00160"></a>00160 
<a name="l00161"></a>00161       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a7800ef713ccf0203d7f6052822371ada">GICH_VTR</a>:
<a name="l00162"></a>00162         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(0x44000000 | (<a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a> - 1));
<a name="l00163"></a>00163         <span class="keywordflow">break</span>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#af25b4eaa6f5f8773b4ecb11bdfddb9c1">GICH_VMCR</a>:
<a name="l00166"></a>00166         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(
<a name="l00167"></a>00167             ((uint32_t)vid-&gt;VMPriMask &lt;&lt; 27) |
<a name="l00168"></a>00168             ((uint32_t)vid-&gt;VMBP &lt;&lt; 21) |
<a name="l00169"></a>00169             ((uint32_t)vid-&gt;VMABP &lt;&lt; 18) |
<a name="l00170"></a>00170             ((uint32_t)vid-&gt;VEM &lt;&lt; 9) |
<a name="l00171"></a>00171             ((uint32_t)vid-&gt;VMCBPR &lt;&lt; 4) |
<a name="l00172"></a>00172             ((uint32_t)vid-&gt;VMFiqEn &lt;&lt; 3) |
<a name="l00173"></a>00173             ((uint32_t)vid-&gt;VMAckCtl &lt;&lt; 2) |
<a name="l00174"></a>00174             ((uint32_t)vid-&gt;VMGrp1En &lt;&lt; 1) |
<a name="l00175"></a>00175             ((uint32_t)vid-&gt;VMGrp0En &lt;&lt; 0)
<a name="l00176"></a>00176             );
<a name="l00177"></a>00177         <span class="keywordflow">break</span>;
<a name="l00178"></a>00178 
<a name="l00179"></a>00179       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a0d7fa31c2af6955e449623d9389ca7ec">GICH_MISR</a>:
<a name="l00180"></a>00180         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(<a class="code" href="classVGic.html#ad4e1c81ee77f5a771923adf5a5923ba2">getMISR</a>(vid));
<a name="l00181"></a>00181         <span class="keywordflow">break</span>;
<a name="l00182"></a>00182 
<a name="l00183"></a>00183       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a2a2ca63d0413350dc09b74eee2fe6002">GICH_EISR0</a>:
<a name="l00184"></a>00184         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(vid-&gt;eisr &amp; 0xffffffff);
<a name="l00185"></a>00185         <span class="keywordflow">break</span>;
<a name="l00186"></a>00186 
<a name="l00187"></a>00187       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a6c12bb38ec84482ad7ef1586b48cdf8f">GICH_EISR1</a>:
<a name="l00188"></a>00188         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(vid-&gt;eisr &gt;&gt; 32);
<a name="l00189"></a>00189         <span class="keywordflow">break</span>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a7e76fd5c6b08792a28b191f3c61da1f4">GICH_ELSR0</a>: {
<a name="l00192"></a>00192           uint32_t bm = 0;
<a name="l00193"></a>00193           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; ((<a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a> &lt; 32) ? <a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a> : 32); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00194"></a>00194               <span class="keywordflow">if</span> (!vid-&gt;LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>].State)
<a name="l00195"></a>00195                   bm |= 1 &lt;&lt; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>;
<a name="l00196"></a>00196           }
<a name="l00197"></a>00197           pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(bm);
<a name="l00198"></a>00198       } <span class="keywordflow">break</span>;
<a name="l00199"></a>00199 
<a name="l00200"></a>00200       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a969b7624f294670f4aad4a5e3a3bcac6">GICH_ELSR1</a>: {
<a name="l00201"></a>00201           uint32_t bm = 0;
<a name="l00202"></a>00202           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 32; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; <a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a>; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00203"></a>00203               <span class="keywordflow">if</span> (!vid-&gt;LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>].State)
<a name="l00204"></a>00204                   bm |= 1 &lt;&lt; (<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>-32);
<a name="l00205"></a>00205           }
<a name="l00206"></a>00206           pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(bm);
<a name="l00207"></a>00207       } <span class="keywordflow">break</span>;
<a name="l00208"></a>00208 
<a name="l00209"></a>00209       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#aecaaf1752dbed7cdf341898eee29b80c">GICH_APR0</a>:
<a name="l00210"></a>00210         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;VGIC GICH_APR read!\n&quot;</span>);
<a name="l00211"></a>00211         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(0);
<a name="l00212"></a>00212         <span class="keywordflow">break</span>;
<a name="l00213"></a>00213 
<a name="l00214"></a>00214       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a8b13555efe57440bccdc5133b33ab539">GICH_LR0</a>:
<a name="l00215"></a>00215       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#aac44b3d66f807fb8072639cead99284f">GICH_LR1</a>:
<a name="l00216"></a>00216       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a0564c031fd415a151a258d2b010665fc">GICH_LR2</a>:
<a name="l00217"></a>00217       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#ab8b34e6cfd2a66876f55afefc4710454">GICH_LR3</a>:
<a name="l00218"></a>00218         pkt-&gt;<a class="code" href="classPacket.html#ac63debc6335e01dcb4941e4c760a6962" title="set the value in the data pointer to v.">set</a>&lt;uint32_t&gt;(vid-&gt;LR[(daddr - <a class="code" href="classVGic.html#a8b13555efe57440bccdc5133b33ab539">GICH_LR0</a>) &gt;&gt; 2]);
<a name="l00219"></a>00219         <span class="keywordflow">break</span>;
<a name="l00220"></a>00220 
<a name="l00221"></a>00221       <span class="keywordflow">default</span>:
<a name="l00222"></a>00222         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC HVCtrl read of bad address %#x\n&quot;</span>, daddr);
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     pkt-&gt;<a class="code" href="classPacket.html#a79f71e6885712d4951e70eaba2e364cb">makeAtomicResponse</a>();
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>;
<a name="l00227"></a>00227 }
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00230"></a><a class="code" href="classVGic.html#a3f24e43d1590891eea1609fc5259dbe5">00230</a> <a class="code" href="classVGic.html#a3f24e43d1590891eea1609fc5259dbe5">VGic::writeVCpu</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00231"></a>00231 {
<a name="l00232"></a>00232     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>() - <a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keywordtype">int</span> ctx_id = pkt-&gt;<a class="code" href="classPacket.html#af08e5e99e9dbed0709d921f3edbb4ec6" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a49fb5bcad2ab0d274bdb4f5efb8cf8d9" title="Accessor function for context ID.">contextId</a>();
<a name="l00235"></a>00235     assert(ctx_id &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00236"></a>00236     <span class="keyword">struct </span>vcpuIntData *vid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[ctx_id];
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;VGIC VCPU write register %#x &lt;= %#x\n&quot;</span>, daddr, pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;());
<a name="l00239"></a>00239 
<a name="l00240"></a>00240     <span class="keywordflow">switch</span> (daddr) {
<a name="l00241"></a>00241       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a14d424b418c13f295468c8f93b268e47">GICV_CTLR</a>:
<a name="l00242"></a>00242         vid-&gt;vctrl = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00243"></a>00243         <span class="keywordflow">break</span>;
<a name="l00244"></a>00244       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a3c1266ce03b5fad9145faf1b2c0fec25">GICV_PMR</a>:
<a name="l00245"></a>00245         vid-&gt;VMPriMask = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00246"></a>00246         <span class="keywordflow">break</span>;
<a name="l00247"></a>00247       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a0a1c24f445dc96697a0feb0b10c22fae">GICV_EOIR</a>: {
<a name="l00248"></a>00248           <span class="comment">// We don&apos;t handle the split EOI-then-DIR mode.  Linux (guest)</span>
<a name="l00249"></a>00249           <span class="comment">// doesn&apos;t need it though.</span>
<a name="l00250"></a>00250           assert(!vid-&gt;vctrl.EOImode);
<a name="l00251"></a>00251           uint32_t <a class="code" href="namespaceMipsISA.html#abbf89a8639f14e61b3b9a72ea14a06a8">w</a> = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00252"></a>00252           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> virq = w &amp; 0x3ff;
<a name="l00253"></a>00253           <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vcpu = (w &gt;&gt; 10) &amp; 7;
<a name="l00254"></a>00254           <span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = <a class="code" href="classVGic.html#ad452fbe714f780b04a613cc309aa6d0a">findLRForVIRQ</a>(vid, virq, vcpu);
<a name="l00255"></a>00255           <span class="keywordflow">if</span> (i &lt; 0) {
<a name="l00256"></a>00256               <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;EOIR: No LR for irq %d(cpu%d)\n&quot;</span>, virq, vcpu);
<a name="l00257"></a>00257           } <span class="keywordflow">else</span> {
<a name="l00258"></a>00258               <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;EOIR: Found LR%d for irq %d(cpu%d)\n&quot;</span>, i, virq, vcpu);
<a name="l00259"></a>00259               ListReg *lr = &amp;vid-&gt;LR[i];
<a name="l00260"></a>00260               lr-&gt;State = 0;
<a name="l00261"></a>00261               <span class="comment">// Maintenance interrupt -- via eisr -- is flagged when</span>
<a name="l00262"></a>00262               <span class="comment">// LRs have EOI=1 and State=INVALID!</span>
<a name="l00263"></a>00263           }
<a name="l00264"></a>00264       } <span class="keywordflow">break</span>;
<a name="l00265"></a>00265       <span class="keywordflow">default</span>:
<a name="l00266"></a>00266         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC VCPU write %#x to unk address %#x\n&quot;</span>, pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;(), daddr);
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268 
<a name="l00269"></a>00269     <span class="comment">// This updates the EISRs and flags IRQs:</span>
<a name="l00270"></a>00270     <a class="code" href="classVGic.html#ab0b59d466e1d82b435bcd4270394eb07">updateIntState</a>(ctx_id);
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     pkt-&gt;<a class="code" href="classPacket.html#a79f71e6885712d4951e70eaba2e364cb">makeAtomicResponse</a>();
<a name="l00273"></a>00273     <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>;
<a name="l00274"></a>00274 }
<a name="l00275"></a>00275 
<a name="l00276"></a>00276 <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a>
<a name="l00277"></a><a class="code" href="classVGic.html#a274ce47ad03ab948fec809d98da04290">00277</a> <a class="code" href="classVGic.html#a274ce47ad03ab948fec809d98da04290">VGic::writeCtrl</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00278"></a>00278 {
<a name="l00279"></a>00279     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> daddr = pkt-&gt;<a class="code" href="classPacket.html#a1c04785186ba5aa70a40cac9b2bfc86e">getAddr</a>() - <a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a>;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="keywordtype">int</span> ctx_id = pkt-&gt;<a class="code" href="classPacket.html#af08e5e99e9dbed0709d921f3edbb4ec6" title="A pointer to the original request.">req</a>-&gt;<a class="code" href="classRequest.html#a49fb5bcad2ab0d274bdb4f5efb8cf8d9" title="Accessor function for context ID.">contextId</a>();
<a name="l00282"></a>00282 
<a name="l00283"></a>00283     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;VGIC HVCtrl write register %#x &lt;= %#x\n&quot;</span>, daddr, pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;());
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <span class="comment">/* Munge the address: 0-0xfff is the usual space banked by requester CPU.</span>
<a name="l00286"></a>00286 <span class="comment">     * Anything &gt; that is 0x200-sized slices of &apos;per CPU&apos; regs.</span>
<a name="l00287"></a>00287 <span class="comment">     */</span>
<a name="l00288"></a>00288     <span class="keywordflow">if</span> (daddr &amp; ~0x1ff) {
<a name="l00289"></a>00289         ctx_id = (daddr &gt;&gt; 9);
<a name="l00290"></a>00290         <span class="keywordflow">if</span> (ctx_id &gt; 8)
<a name="l00291"></a>00291             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC: Weird unbanked hv ctrl address %#x!\n&quot;</span>, daddr);
<a name="l00292"></a>00292         daddr &amp;= ~0x1ff;
<a name="l00293"></a>00293     }
<a name="l00294"></a>00294     assert(ctx_id &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00295"></a>00295     <span class="keyword">struct </span>vcpuIntData *vid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[ctx_id];
<a name="l00296"></a>00296 
<a name="l00297"></a>00297     <span class="keywordflow">switch</span> (daddr) {
<a name="l00298"></a>00298       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#af6e0e96ebd0a13266be8a033fed97cf4">GICH_HCR</a>:
<a name="l00299"></a>00299         vid-&gt;hcr = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00300"></a>00300         <span class="comment">// update int state</span>
<a name="l00301"></a>00301         <span class="keywordflow">break</span>;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#af25b4eaa6f5f8773b4ecb11bdfddb9c1">GICH_VMCR</a>: {
<a name="l00304"></a>00304           uint32_t <a class="code" href="namespaceArmISA.html#ab3be624d2ce2e84d65a45d2b81a9828c">d</a> = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00305"></a>00305           vid-&gt;VMPriMask = d &gt;&gt; 27;
<a name="l00306"></a>00306           vid-&gt;VMBP = (d &gt;&gt; 21) &amp; 7;
<a name="l00307"></a>00307           vid-&gt;VMABP = (d &gt;&gt; 18) &amp; 7;
<a name="l00308"></a>00308           vid-&gt;VEM = (d &gt;&gt; 9) &amp; 1;
<a name="l00309"></a>00309           vid-&gt;VMCBPR = (d &gt;&gt; 4) &amp; 1;
<a name="l00310"></a>00310           vid-&gt;VMFiqEn = (d &gt;&gt; 3) &amp; 1;
<a name="l00311"></a>00311           vid-&gt;VMAckCtl = (d &gt;&gt; 2) &amp; 1;
<a name="l00312"></a>00312           vid-&gt;VMGrp1En = (d &gt;&gt; 1) &amp; 1;
<a name="l00313"></a>00313           vid-&gt;VMGrp0En = d &amp; 1;
<a name="l00314"></a>00314       } <span class="keywordflow">break</span>;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#aecaaf1752dbed7cdf341898eee29b80c">GICH_APR0</a>:
<a name="l00317"></a>00317         <a class="code" href="base_2misc_8hh.html#abb243c15dfbeedf4ae64aa213f4f18c7">warn_once</a>(<span class="stringliteral">&quot;VGIC GICH_APR0 written, ignored\n&quot;</span>);
<a name="l00318"></a>00318         <span class="keywordflow">break</span>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a8b13555efe57440bccdc5133b33ab539">GICH_LR0</a>:
<a name="l00321"></a>00321       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#aac44b3d66f807fb8072639cead99284f">GICH_LR1</a>:
<a name="l00322"></a>00322       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#a0564c031fd415a151a258d2b010665fc">GICH_LR2</a>:
<a name="l00323"></a>00323       <span class="keywordflow">case</span> <a class="code" href="classVGic.html#ab8b34e6cfd2a66876f55afefc4710454">GICH_LR3</a>:
<a name="l00324"></a>00324         vid-&gt;LR[(daddr - <a class="code" href="classVGic.html#a8b13555efe57440bccdc5133b33ab539">GICH_LR0</a>) &gt;&gt; 2] = pkt-&gt;<a class="code" href="classPacket.html#a8d770519cb0e5f874bab168362f54082" title="return the value of what is pointed to in the packet.">get</a>&lt;uint32_t&gt;();
<a name="l00325"></a>00325         <span class="comment">// update int state</span>
<a name="l00326"></a>00326         <span class="keywordflow">break</span>;
<a name="l00327"></a>00327 
<a name="l00328"></a>00328       <span class="keywordflow">default</span>:
<a name="l00329"></a>00329         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;VGIC HVCtrl write to bad address %#x\n&quot;</span>, daddr);
<a name="l00330"></a>00330     }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332     <a class="code" href="classVGic.html#ab0b59d466e1d82b435bcd4270394eb07">updateIntState</a>(ctx_id);
<a name="l00333"></a>00333 
<a name="l00334"></a>00334     pkt-&gt;<a class="code" href="classPacket.html#a79f71e6885712d4951e70eaba2e364cb">makeAtomicResponse</a>();
<a name="l00335"></a>00335     <span class="keywordflow">return</span> <a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>;
<a name="l00336"></a>00336 }
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 uint32_t
<a name="l00340"></a><a class="code" href="classVGic.html#ad4e1c81ee77f5a771923adf5a5923ba2">00340</a> <a class="code" href="classVGic.html#ad4e1c81ee77f5a771923adf5a5923ba2">VGic::getMISR</a>(<span class="keyword">struct</span> vcpuIntData *vid)
<a name="l00341"></a>00341 {
<a name="l00342"></a>00342     <span class="keywordflow">return</span> (!!vid-&gt;hcr.VGrp1DIE &amp;&amp; !vid-&gt;VMGrp1En ? 0x80 : 0) |
<a name="l00343"></a>00343         (!!vid-&gt;hcr.VGrp1EIE &amp;&amp;  vid-&gt;VMGrp1En ? 0x40 : 0) |
<a name="l00344"></a>00344         (!!vid-&gt;hcr.VGrp0DIE &amp;&amp; !vid-&gt;VMGrp0En ? 0x20 : 0) |
<a name="l00345"></a>00345         (!!vid-&gt;hcr.VGrp0EIE &amp;&amp;  vid-&gt;VMGrp0En ? 0x10 : 0) |
<a name="l00346"></a>00346         (!!vid-&gt;hcr.NPIE &amp;&amp; !<a class="code" href="classVGic.html#a09d2d9a0a4dfb11f71c2ae323a7dc23e">lrPending</a>(vid) ? 0x08 : 0) |
<a name="l00347"></a>00347         (!!vid-&gt;hcr.LRENPIE &amp;&amp; vid-&gt;hcr.EOICount ? 0x04 : 0) |
<a name="l00348"></a>00348         (!!vid-&gt;hcr.UIE &amp;&amp; <a class="code" href="classVGic.html#a9171b84c7149e5e90560238f07a5603d">lrValid</a>(vid) &lt;= 1 ? 0x02 : 0) |
<a name="l00349"></a>00349         (vid-&gt;eisr ? 0x01 : 0);
<a name="l00350"></a>00350 }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="keywordtype">void</span>
<a name="l00353"></a><a class="code" href="classVGic.html#a0d8700fcc9421dafe76d601bce90d2ab">00353</a> <a class="code" href="classVGic.html#a0d8700fcc9421dafe76d601bce90d2ab">VGic::postVInt</a>(uint32_t cpu, <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> when)
<a name="l00354"></a>00354 {
<a name="l00355"></a>00355     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;Posting VIRQ to %d\n&quot;</span>, cpu);
<a name="l00356"></a>00356     <span class="keywordflow">if</span> (!(<a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[cpu]-&gt;scheduled()))
<a name="l00357"></a>00357         <a class="code" href="classEventManager.html#ae80b5045b34395c55d6c482335a4a0da" title="A pointer to this object&amp;#39;s event queue.">eventq</a>-&gt;<a class="code" href="classEventQueue.html#a1338ae563bf12a5500696de63dd4a4f5" title="Schedule the given event on this queue.">schedule</a>(<a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[cpu], when);
<a name="l00358"></a>00358 }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 <span class="keywordtype">void</span>
<a name="l00361"></a><a class="code" href="classVGic.html#a727b439e851049ae938eda013ce610ba">00361</a> <a class="code" href="classVGic.html#a727b439e851049ae938eda013ce610ba">VGic::unPostVInt</a>(uint32_t cpu)
<a name="l00362"></a>00362 {
<a name="l00363"></a>00363     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;Unposting VIRQ to %d\n&quot;</span>, cpu);
<a name="l00364"></a>00364     <a class="code" href="classVGic.html#a5da7fa1ac196922a4869cccf4d4ae145">platform</a>-&gt;<a class="code" href="classPlatform.html#aded19fbf727f801b4cbdb0b7f9385273" title="Pointer to the interrupt controller.">intrctrl</a>-&gt;<a class="code" href="classIntrControl.html#a5104256caa6b91777c84883e48658e7c">clear</a>(cpu, <a class="code" href="namespaceArmISA.html#a5944639e8d6a3ef3fd6a51234896148aacb28e5b9567a3c4b6327c35656abc3e4">ArmISA::INT_VIRT_IRQ</a>, 0);
<a name="l00365"></a>00365 }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="keywordtype">void</span>
<a name="l00368"></a><a class="code" href="classVGic.html#ac48c0f42ae440130baedb10c38e12861">00368</a> <a class="code" href="classVGic.html#ac48c0f42ae440130baedb10c38e12861">VGic::postMaintInt</a>(uint32_t cpu)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;Posting maintenance PPI to GIC/cpu%d\n&quot;</span>, cpu);
<a name="l00371"></a>00371     <span class="comment">// Linux DT configures this as Level.</span>
<a name="l00372"></a>00372     <a class="code" href="classVGic.html#a09d6999dadb540d59121c8c73ed54b94">gic</a>-&gt;<a class="code" href="classBaseGic.html#a74e7f72f094aa1282759dd4aa54803f4" title="Interface call for private peripheral interrupts.">sendPPInt</a>(<a class="code" href="classVGic.html#a7f2624e27d36af4f00e3b7331b10c852">maintInt</a>, cpu);
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 <span class="keywordtype">void</span>
<a name="l00376"></a><a class="code" href="classVGic.html#aa31b422d58aaf2aae9c954e89c09de86">00376</a> <a class="code" href="classVGic.html#aa31b422d58aaf2aae9c954e89c09de86">VGic::unPostMaintInt</a>(uint32_t cpu)
<a name="l00377"></a>00377 {
<a name="l00378"></a>00378     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(VGIC, <span class="stringliteral">&quot;Unposting maintenance PPI to GIC/cpu%d\n&quot;</span>, cpu);
<a name="l00379"></a>00379     <a class="code" href="classVGic.html#a09d6999dadb540d59121c8c73ed54b94">gic</a>-&gt;<a class="code" href="classBaseGic.html#ae1fd866700365074ec0571f06fae9412">clearPPInt</a>(<a class="code" href="classVGic.html#a7f2624e27d36af4f00e3b7331b10c852">maintInt</a>, cpu);
<a name="l00380"></a>00380 }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382 <span class="comment">/* Update state (in general); something concerned with ctx_id has changed.</span>
<a name="l00383"></a>00383 <span class="comment"> * This may raise a maintenance interrupt.</span>
<a name="l00384"></a>00384 <span class="comment"> */</span>
<a name="l00385"></a>00385 <span class="keywordtype">void</span>
<a name="l00386"></a><a class="code" href="classVGic.html#ab0b59d466e1d82b435bcd4270394eb07">00386</a> <a class="code" href="classVGic.html#ab0b59d466e1d82b435bcd4270394eb07">VGic::updateIntState</a>(<span class="keywordtype">int</span> ctx_id)
<a name="l00387"></a>00387 {
<a name="l00388"></a>00388     <span class="comment">// @todo This should update APRs!</span>
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     <span class="comment">// Build EISR contents:</span>
<a name="l00391"></a>00391     <span class="comment">// (Cached so that regs can read them without messing about again)</span>
<a name="l00392"></a>00392     <span class="keyword">struct </span>vcpuIntData *tvid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[ctx_id];
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     tvid-&gt;eisr = 0;
<a name="l00395"></a>00395     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; <a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a>; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (!tvid-&gt;LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>].State &amp;&amp; tvid-&gt;LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>].EOI) {
<a name="l00397"></a>00397             tvid-&gt;eisr |= 1 &lt;&lt; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>;
<a name="l00398"></a>00398         }
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400 
<a name="l00401"></a>00401     assert(<a class="code" href="classPioDevice.html#ae9a625f7038edc40a855f58b011bd2d4">sys</a>-&gt;<a class="code" href="classSystem.html#a1dd55932d5de44449c1de45616835daf" title="Return number of running (non-halted) thread contexts in system.">numRunningContexts</a>() &lt;= <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00402"></a>00402     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; <a class="code" href="classPioDevice.html#ae9a625f7038edc40a855f58b011bd2d4">sys</a>-&gt;<a class="code" href="classSystem.html#a1dd55932d5de44449c1de45616835daf" title="Return number of running (non-halted) thread contexts in system.">numRunningContexts</a>(); <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00403"></a>00403         <span class="keyword">struct </span>vcpuIntData *vid = &amp;<a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>];
<a name="l00404"></a>00404         <span class="comment">// Are any LRs active that weren&apos;t before?</span>
<a name="l00405"></a>00405         <span class="keywordflow">if</span> (!<a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>]) {
<a name="l00406"></a>00406             <span class="keywordflow">if</span> (<a class="code" href="classVGic.html#a09d2d9a0a4dfb11f71c2ae323a7dc23e">lrPending</a>(vid) &amp;&amp; vid-&gt;vctrl.En) {
<a name="l00407"></a>00407                 <a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>[i] = <span class="keyword">true</span>;
<a name="l00408"></a>00408                 <a class="code" href="classVGic.html#a0d8700fcc9421dafe76d601bce90d2ab">postVInt</a>(i, <a class="code" href="statistics_8hh.html#a7acdccbf0d35ce0c159c0cdd36371b22" title="The current simulated tick.">curTick</a>() + 1);
<a name="l00409"></a>00409             }
<a name="l00410"></a>00410         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classVGic.html#a09d2d9a0a4dfb11f71c2ae323a7dc23e">lrPending</a>(vid)) {
<a name="l00411"></a>00411             <a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>[i] = <span class="keyword">false</span>;
<a name="l00412"></a>00412             <a class="code" href="classVGic.html#a727b439e851049ae938eda013ce610ba">unPostVInt</a>(i);
<a name="l00413"></a>00413         }
<a name="l00414"></a>00414 
<a name="l00415"></a>00415         <span class="comment">// Any maintenance ints to send?</span>
<a name="l00416"></a>00416         <span class="keywordflow">if</span> (!<a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>[i]) {
<a name="l00417"></a>00417             <span class="keywordflow">if</span> (vid-&gt;hcr.En &amp;&amp; <a class="code" href="classVGic.html#ad4e1c81ee77f5a771923adf5a5923ba2">getMISR</a>(vid)) {
<a name="l00418"></a>00418                 <a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>[i] = <span class="keyword">true</span>;
<a name="l00419"></a>00419                 <a class="code" href="classVGic.html#ac48c0f42ae440130baedb10c38e12861">postMaintInt</a>(i);
<a name="l00420"></a>00420             }
<a name="l00421"></a>00421         } <span class="keywordflow">else</span> {
<a name="l00422"></a>00422             <span class="keywordflow">if</span> (!vid-&gt;hcr.En || !<a class="code" href="classVGic.html#ad4e1c81ee77f5a771923adf5a5923ba2">getMISR</a>(vid)) {
<a name="l00423"></a>00423                 <a class="code" href="classVGic.html#aa31b422d58aaf2aae9c954e89c09de86">unPostMaintInt</a>(i);
<a name="l00424"></a>00424                 <a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>[i] = <span class="keyword">false</span>;
<a name="l00425"></a>00425             }
<a name="l00426"></a>00426         }
<a name="l00427"></a>00427     }
<a name="l00428"></a>00428 }
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <a class="code" href="classstd_1_1list.html">AddrRangeList</a>
<a name="l00431"></a><a class="code" href="classVGic.html#a8789fb1b75f0002c9e69e3339bfd47f5">00431</a> <a class="code" href="classVGic.html#a8789fb1b75f0002c9e69e3339bfd47f5" title="Every PIO device is obliged to provide an implementation that returns the address...">VGic::getAddrRanges</a>()<span class="keyword"> const</span>
<a name="l00432"></a>00432 <span class="keyword"></span>{
<a name="l00433"></a>00433     <a class="code" href="classstd_1_1list.html">AddrRangeList</a> ranges;
<a name="l00434"></a>00434     ranges.push_back(<a class="code" href="addr__range_8hh.html#a59cd089c5b2fbc6eecd8507757432740">RangeSize</a>(<a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a>, <a class="code" href="classVGic.html#a554c4b86628edcb6bf0809635e5fd981">GICH_REG_SIZE</a>));
<a name="l00435"></a>00435     ranges.push_back(<a class="code" href="addr__range_8hh.html#a59cd089c5b2fbc6eecd8507757432740">RangeSize</a>(<a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a>, <a class="code" href="classVGic.html#a2ae71102f3612a39b561e4cac8ef3077">GICV_SIZE</a>));
<a name="l00436"></a>00436     <span class="keywordflow">return</span> ranges;
<a name="l00437"></a>00437 }
<a name="l00438"></a>00438 
<a name="l00439"></a>00439 <span class="keywordtype">void</span>
<a name="l00440"></a><a class="code" href="classVGic.html#af78e621258cb49adce1b032e086e02ed">00440</a> <a class="code" href="classVGic.html#af78e621258cb49adce1b032e086e02ed">VGic::serialize</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#aea9fbab71662ba06cf536e05edfaaad1">os</a>)
<a name="l00441"></a>00441 {
<a name="l00442"></a>00442     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> interrupt_time[<a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>];
<a name="l00443"></a>00443     <span class="keywordflow">for</span> (uint32_t cpu = 0; cpu &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>; cpu++) {
<a name="l00444"></a>00444         interrupt_time[cpu] = 0;
<a name="l00445"></a>00445         <span class="keywordflow">if</span> (<a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[cpu]-&gt;scheduled()) {
<a name="l00446"></a>00446             interrupt_time[cpu] = <a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[cpu]-&gt;<a class="code" href="classEvent.html#a3ff737aa0692f1ea9b8dd232778f2fcb" title="Get the time that the event is scheduled.">when</a>();
<a name="l00447"></a>00447         }
<a name="l00448"></a>00448     }
<a name="l00449"></a>00449 
<a name="l00450"></a>00450     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a>, <span class="stringliteral">&quot;Serializing VGIC\n&quot;</span>);
<a name="l00451"></a>00451 
<a name="l00452"></a>00452     <a class="code" href="serialize_8hh.html#a9aa03522128bc19a3bc0294501226f8b">SERIALIZE_ARRAY</a>(interrupt_time, VGIC_CPU_MAX);
<a name="l00453"></a>00453     <a class="code" href="serialize_8hh.html#a9aa03522128bc19a3bc0294501226f8b">SERIALIZE_ARRAY</a>(<a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>, VGIC_CPU_MAX);
<a name="l00454"></a>00454     <a class="code" href="serialize_8hh.html#a9aa03522128bc19a3bc0294501226f8b">SERIALIZE_ARRAY</a>(<a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>, VGIC_CPU_MAX);
<a name="l00455"></a>00455     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a>);
<a name="l00456"></a>00456     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a>);
<a name="l00457"></a>00457     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>);
<a name="l00458"></a>00458     <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a7f2624e27d36af4f00e3b7331b10c852">maintInt</a>);
<a name="l00459"></a>00459 
<a name="l00460"></a>00460     <span class="keywordflow">for</span> (uint32_t cpu = 0; cpu &lt; VGIC_CPU_MAX; cpu++) {
<a name="l00461"></a>00461         <a class="code" href="classSerializable.html#a23ac872f198ad03a95312016697de6b8">nameOut</a>(os, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, <a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>(), cpu));
<a name="l00462"></a>00462         uint32_t vctrl_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].vctrl;
<a name="l00463"></a>00463         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(vctrl_val);
<a name="l00464"></a>00464         uint32_t hcr_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].hcr;
<a name="l00465"></a>00465         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(hcr_val);
<a name="l00466"></a>00466         uint64_t eisr_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].eisr;
<a name="l00467"></a>00467         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(eisr_val);
<a name="l00468"></a>00468         uint8_t VMGrp0En_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMGrp0En;
<a name="l00469"></a>00469         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMGrp0En_val);
<a name="l00470"></a>00470         uint8_t VMGrp1En_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMGrp1En;
<a name="l00471"></a>00471         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMGrp1En_val);
<a name="l00472"></a>00472         uint8_t VMAckCtl_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMAckCtl;
<a name="l00473"></a>00473         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMAckCtl_val);
<a name="l00474"></a>00474         uint8_t VMFiqEn_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMFiqEn;
<a name="l00475"></a>00475         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMFiqEn_val);
<a name="l00476"></a>00476         uint8_t VMCBPR_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMCBPR;
<a name="l00477"></a>00477         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMCBPR_val);
<a name="l00478"></a>00478         uint8_t VEM_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VEM;
<a name="l00479"></a>00479         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VEM_val);
<a name="l00480"></a>00480         uint8_t VMABP_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMABP;
<a name="l00481"></a>00481         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMABP_val);
<a name="l00482"></a>00482         uint8_t VMBP_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMBP;
<a name="l00483"></a>00483         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMBP_val);
<a name="l00484"></a>00484         uint8_t VMPriMask_val = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMPriMask;
<a name="l00485"></a>00485         <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(VMPriMask_val);
<a name="l00486"></a>00486 
<a name="l00487"></a>00487         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; <a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a>; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00488"></a>00488             uint32_t lr = <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>];
<a name="l00489"></a>00489             <a class="code" href="classSerializable.html#a23ac872f198ad03a95312016697de6b8">nameOut</a>(os, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d.LR%d&quot;</span>, <a class="code" href="classSimObject.html#a96c36bff06d98deb79d09e93652667ae">name</a>(), cpu, <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>));
<a name="l00490"></a>00490             <a class="code" href="serialize_8hh.html#a49163149ec656ffecff0e46aee418e29">SERIALIZE_SCALAR</a>(lr);
<a name="l00491"></a>00491         }
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493 }
<a name="l00494"></a>00494 
<a name="l00495"></a><a class="code" href="classVGic.html#a26e336d38c036ceaf92ecf876fd8657c">00495</a> <span class="keywordtype">void</span> <a class="code" href="classVGic.html#a26e336d38c036ceaf92ecf876fd8657c">VGic::unserialize</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section)
<a name="l00496"></a>00496 {
<a name="l00497"></a>00497     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a>, <span class="stringliteral">&quot;Unserializing Arm GIC\n&quot;</span>);
<a name="l00498"></a>00498 
<a name="l00499"></a>00499     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> interrupt_time[<a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>];
<a name="l00500"></a>00500     <a class="code" href="serialize_8hh.html#a8de12bf68d0f92f7ab8585820607932e">UNSERIALIZE_ARRAY</a>(interrupt_time, <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>);
<a name="l00501"></a>00501     <span class="keywordflow">for</span> (uint32_t cpu = 0; cpu &lt; <a class="code" href="classVGic.html#a20ca524b87190bfe830816e4145f9bcf">VGIC_CPU_MAX</a>; cpu++) {
<a name="l00502"></a>00502         <span class="keywordflow">if</span> (interrupt_time[cpu])
<a name="l00503"></a>00503             <a class="code" href="classEventManager.html#a749a10828b2dd5017a2582960d04e400">schedule</a>(<a class="code" href="classVGic.html#a1c03a1209ac995086357e44d686347e2">postVIntEvent</a>[cpu], interrupt_time[cpu]);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505         uint32_t tmp;
<a name="l00506"></a>00506         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00507"></a>00507                 <span class="stringliteral">&quot;vctrl_val&quot;</span>, tmp);
<a name="l00508"></a>00508         <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].vctrl = tmp;
<a name="l00509"></a>00509         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00510"></a>00510                 <span class="stringliteral">&quot;hcr_val&quot;</span>, tmp);
<a name="l00511"></a>00511         <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].hcr = tmp;
<a name="l00512"></a>00512         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00513"></a>00513                 <span class="stringliteral">&quot;eisr_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].eisr);
<a name="l00514"></a>00514         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00515"></a>00515                 <span class="stringliteral">&quot;VMGrp0En_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMGrp0En);
<a name="l00516"></a>00516         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00517"></a>00517                 <span class="stringliteral">&quot;VMGrp1En_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMGrp1En);
<a name="l00518"></a>00518         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00519"></a>00519                 <span class="stringliteral">&quot;VMAckCtl_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMAckCtl);
<a name="l00520"></a>00520         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00521"></a>00521                 <span class="stringliteral">&quot;VMFiqEn_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMFiqEn);
<a name="l00522"></a>00522         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00523"></a>00523                 <span class="stringliteral">&quot;VMCBPR_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMCBPR);
<a name="l00524"></a>00524         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00525"></a>00525                 <span class="stringliteral">&quot;VEM_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VEM);
<a name="l00526"></a>00526         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00527"></a>00527                 <span class="stringliteral">&quot;VMABP_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMABP);
<a name="l00528"></a>00528         <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d&quot;</span>, section, cpu),
<a name="l00529"></a>00529                 <span class="stringliteral">&quot;VMPriMask_val&quot;</span>, <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].VMPriMask);
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> = 0; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a> &lt; <a class="code" href="classVGic.html#a2984c1f90aa174dc88e2706852a5f9c7">NUM_LR</a>; <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>++) {
<a name="l00532"></a>00532             <a class="code" href="arch_2x86_2types_8cc.html#a2c99d2d69578d585494e1182085cb158">paramIn</a>(cp, <a class="code" href="cprintf_8hh.html#a6d479f953c49f7538f6b4fac54cbf201">csprintf</a>(<span class="stringliteral">&quot;%s.vcpuData%d.LR%d&quot;</span>, section, cpu, <a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>),
<a name="l00533"></a>00533                     <span class="stringliteral">&quot;lr&quot;</span>, tmp);
<a name="l00534"></a>00534             <a class="code" href="classVGic.html#a99f72d80bd0a2a2a232f2421a12c7f3f">vcpuData</a>[cpu].LR[<a class="code" href="namespaceArmISA.html#a07402644ed55c19e1a116116c548c2ac">i</a>] = tmp;
<a name="l00535"></a>00535         }
<a name="l00536"></a>00536     }
<a name="l00537"></a>00537     <a class="code" href="serialize_8hh.html#a8de12bf68d0f92f7ab8585820607932e">UNSERIALIZE_ARRAY</a>(<a class="code" href="classVGic.html#a153b48ceffb41f821ddc6aea70bcc661">maintIntPosted</a>, VGIC_CPU_MAX);
<a name="l00538"></a>00538     <a class="code" href="serialize_8hh.html#a8de12bf68d0f92f7ab8585820607932e">UNSERIALIZE_ARRAY</a>(<a class="code" href="classVGic.html#a36d0bf9b7410bdc6bf0f22d4296a9e36">vIntPosted</a>, VGIC_CPU_MAX);
<a name="l00539"></a>00539     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a5a6da812a4e7d4492dfe8333d649085d">vcpuAddr</a>);
<a name="l00540"></a>00540     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a1b0d99f6b6957cd76930333e1e7f1b1b">hvAddr</a>);
<a name="l00541"></a>00541     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a22be5d4d86b0f553d7ef02cc289257f3">pioDelay</a>);
<a name="l00542"></a>00542     <a class="code" href="serialize_8hh.html#a13d18ccba3d8bcbcd5aab2e37c380bff">UNSERIALIZE_SCALAR</a>(<a class="code" href="classVGic.html#a7f2624e27d36af4f00e3b7331b10c852">maintInt</a>);
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <a class="code" href="classVGic.html">VGic</a> *
<a name="l00546"></a>00546 VGicParams::create()
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548     <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classVGic.html#ade5a48c4a73059a8b336d202c35965d3">VGic</a>(<span class="keyword">this</span>);
<a name="l00549"></a>00549 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:11 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
