<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: KvmVM Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>KvmVM Class Reference</h1><!-- doxytag: class="KvmVM" --><!-- doxytag: inherits="SimObject" -->
<p>KVM VM container.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="vm_8hh_source.html">vm.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for KvmVM:</div>
<div class="dynsection">
 <div class="center">
  <img src="classKvmVM.gif" usemap="#KvmVM_map" alt=""/>
  <map id="KvmVM_map" name="KvmVM_map">
<area href="classSimObject.html" alt="SimObject" shape="rect" coords="105,56,200,80"/>
<area href="classEventManager.html" alt="EventManager" shape="rect" coords="0,0,95,24"/>
<area href="classSerializable.html" alt="Serializable" shape="rect" coords="105,0,200,24"/>
<area href="classDrainable.html" alt="Drainable" shape="rect" coords="210,0,305,24"/>
</map>
 </div>
</div>

<p><a href="classKvmVM-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM_1_1MemorySlot.html">MemorySlot</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Structures tracking memory slots.  <a href="classKvmVM_1_1MemorySlot.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a3a5d1d5a4e2ed2a6bb9e7c30fee7efe0">KvmVM</a> (KvmVMParams *params)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ab964be8326d93a73fdc34537e8b8dc56">~KvmVM</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a0212f69eec89e520f03aa26b5d6b7572">setTSSAddress</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> tss_address)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup a shared three-page memory region used by the internals of KVM.  <a href="#a0212f69eec89e520f03aa26b5d6b7572"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmInterrupts.html#ga5c9b5cc62a3f301cd9b3b91be951a6c0">createIRQChip</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an in-kernel interrupt controller.  <a href="group__KvmInterrupts.html#ga5c9b5cc62a3f301cd9b3b91be951a6c0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmInterrupts.html#ga24f25100642b68c4a9a119e172954cf2">setIRQLine</a> (uint32_t irq, bool high)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classSet.html">Set</a> the status of an IRQ line using KVM_IRQ_LINE.  <a href="group__KvmInterrupts.html#ga24f25100642b68c4a9a119e172954cf2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmInterrupts.html#ga24414a8c373a72fa3caf63fc3ff9111a">hasKernelIRQChip</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is in-kernel IRQ chip emulation enabled?  <a href="group__KvmInterrupts.html#ga24414a8c373a72fa3caf63fc3ff9111a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a72e9b29a6c06242b77e4af156d22e13b">allocMemSlot</a> (uint64_t size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate a memory slot within the VM.  <a href="#a72e9b29a6c06242b77e4af156d22e13b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a133a946aa69cd95abbeedddaa90707f6">setupMemSlot</a> (const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a> slot, void *host_addr, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> guest_addr, uint32_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup a region of physical memory in the guest.  <a href="#a133a946aa69cd95abbeedddaa90707f6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ac685c6dceabd51659a2ff9e9a4b18028">disableMemSlot</a> (const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a> slot)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable a memory slot.  <a href="#ac685c6dceabd51659a2ff9e9a4b18028"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a014045551908eabda19729199945fe12">freeMemSlot</a> (const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a> slot)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a previously allocated memory slot.  <a href="#a014045551908eabda19729199945fe12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a9754b75c1fa9626db90d838470ae095d">createDevice</a> (uint32_t type, uint32_t flags=0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create an in-kernel device model.  <a href="#a9754b75c1fa9626db90d838470ae095d"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKvm.html">Kvm</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a32fdd2477c6b421de8cc34dd2f89b691">kvm</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Global KVM interface.  <a href="#a32fdd2477c6b421de8cc34dd2f89b691"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ab37c67dafe30c50a44976d0f4c239689">cpuStartup</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">VM CPU initialization code.  <a href="#ab37c67dafe30c50a44976d0f4c239689"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a030f852e34614d74bcbbad6f22ec84af">delayedStartup</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Delayed initialization, executed once before the first CPU starts.  <a href="#a030f852e34614d74bcbbad6f22ec84af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#aed670dbfb66064cd8eba1c488298aa73">createVCPU</a> (long vcpuID)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new vCPU within a VM.  <a href="#aed670dbfb66064cd8eba1c488298aa73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ac1c2a9e6be2a125e5aaac1063281ba90">allocVCPUID</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate a new vCPU ID within the VM.  <a href="#ac1c2a9e6be2a125e5aaac1063281ba90"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#gab857a08e31592e3971646cc7d399d2d3">ioctl</a> (int request, long p1) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM VM ioctl interface.  <a href="group__KvmIoctl.html#gab857a08e31592e3971646cc7d399d2d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#gab62cabdeb468cea4bd5e0f751f31788e">ioctl</a> (int request, void *p1) const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__KvmIoctl.html#gaa3c05e73c95490265b1f3a3cf235d97b">ioctl</a> (int request) const </td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a97d7354434273221c8b42f876ec4f085">KvmVM</a> (const <a class="el" href="classKvmVM.html">KvmVM</a> &amp;vm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classKvmVM.html">KvmVM</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#aa5e8976bb27cc31c248334efa8bf2ae6">operator=</a> (const <a class="el" href="classKvmVM.html">KvmVM</a> &amp;vm)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classSystem.html">System</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#af695030e1d862a6672918f4deed41485">system</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#af8224146399124f67d1719e5ae4f03e2">vmFD</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">KVM VM file descriptor.  <a href="#af8224146399124f67d1719e5ae4f03e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a2eb62c117f9c13f79271915aef0795ef">started</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Has <a class="el" href="classKvmVM.html#a030f852e34614d74bcbbad6f22ec84af" title="Delayed initialization, executed once before the first CPU starts.">delayedStartup()</a> already been called?  <a href="#a2eb62c117f9c13f79271915aef0795ef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#acf4411a92311a3647c4a239be43b73e6">_hasKernelIRQChip</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do we have in-kernel IRQ-chip emulation enabled?  <a href="#acf4411a92311a3647c4a239be43b73e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a0b163fbcb4da042d42a64ece744bb306">nextVCPUID</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Next unallocated vCPU ID.  <a href="#a0b163fbcb4da042d42a64ece744bb306"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt; <a class="el" href="classKvmVM_1_1MemorySlot.html">MemorySlot</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a6656129fa246aeeaf3aa1a02741b21ab">memorySlots</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a3cfeb653669c062e650436a181862ba2">maxMemorySlot</a></td></tr>
<tr><td colspan="2"><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a61d1fc6581a443ce7c1106a1b6922d40">BaseKvmCPU</a></td></tr>
<tr><td colspan="2"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#a6a118f1b6427280d9f1a6c8304127cbf">coalesceMMIO</a> (<a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> start, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classRequest.html">Request</a> coalescing MMIO for a memory range.  <a href="#a6a118f1b6427280d9f1a6c8304127cbf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ad59091dda8a7e725f2bf9a41462fb94d">coalesceMMIO</a> (const <a class="el" href="classAddrRange.html">AddrRange</a> &amp;range)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classRequest.html">Request</a> coalescing MMIO for a memory range.  <a href="#ad59091dda8a7e725f2bf9a41462fb94d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKvmVM.html#ac1f6769c8533ff99b589555b84349080">setUserMemoryRegion</a> (uint32_t slot, void *host_addr, <a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a> guest_addr, uint64_t len, uint32_t flags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup a region of physical memory in the guest.  <a href="#ac1f6769c8533ff99b589555b84349080"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>KVM VM container. </p>
<p>A KVM VM container normally contains all the CPUs in a shared memory machine. The VM container handles things like physical memory and to some extent interrupts. Normally, the VM API is only used for interrupts when the PIC is emulated by the kernel, which is a feature we do not use. However, some architectures (notably ARM) use the VM interface to deliver interrupts to specific CPUs as well.</p>
<p>VM initialization is a bit different from that of other SimObjects. When we initialize the VM, we discover all physical memory mappings in the system. Since <a class="el" href="thread__context_8hh.html#aab2bbbf3710db70a2886ed6c49038af7">AbstractMem::unserialize</a> re-maps the guests memory, we need to make sure that this is done after the memory has been re-mapped, but before the vCPUs are initialized (KVM requires memory mappings to be setup before CPUs can be created). Normally, we would just initialize the VM in <a class="el" href="classSimObject.html#a2a1c25d4de5184cccaca7f9b0b703a5d" title="init() is called after all C++ SimObjects have been created and all ports are connected...">init()</a> or <a class="el" href="classSimObject.html#a15d30a398e82cab3686d2e9d54fd71a4" title="startup() is the final initialization call before simulation.">startup()</a>, however, we can not use <a class="el" href="classSimObject.html#a2a1c25d4de5184cccaca7f9b0b703a5d" title="init() is called after all C++ SimObjects have been created and all ports are connected...">init()</a> since this is called before <a class="el" href="thread__context_8cc.html#aab2bbbf3710db70a2886ed6c49038af7">AbstractMem::unserialize()</a> and we can not use <a class="el" href="classSimObject.html#a15d30a398e82cab3686d2e9d54fd71a4" title="startup() is the final initialization call before simulation.">startup()</a> since it must be called before <a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">BaseKvmCPU::startup()</a> and the simulator framework does not guarantee call order. We therefore call <a class="el" href="classKvmVM.html#ab37c67dafe30c50a44976d0f4c239689" title="VM CPU initialization code.">cpuStartup()</a> from <a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">BaseKvmCPU::startup()</a> instead and execute the initialization code once when the first CPU in the VM is starting. </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00290">290</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3a5d1d5a4e2ed2a6bb9e7c30fee7efe0"></a><!-- doxytag: member="KvmVM::KvmVM" ref="a3a5d1d5a4e2ed2a6bb9e7c30fee7efe0" args="(KvmVMParams *params)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KvmVM::KvmVM </td>
          <td>(</td>
          <td class="paramtype">KvmVMParams *&nbsp;</td>
          <td class="paramname"> <em>params</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00292">292</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00129">Kvm::capNumMemSlots()</a>, <a class="el" href="vm_8cc_source.html#l00438">coalesceMMIO()</a>, <a class="el" href="arm_2miscregs_8hh_source.html#l01377">ArmISA::i</a>, <a class="el" href="vm_8hh_source.html#l00399">kvm</a>, and <a class="el" href="vm_8hh_source.html#l00529">maxMemorySlot</a>.</p>

</div>
</div>
<a class="anchor" id="ab964be8326d93a73fdc34537e8b8dc56"></a><!-- doxytag: member="KvmVM::~KvmVM" ref="ab964be8326d93a73fdc34537e8b8dc56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KvmVM::~KvmVM </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00308">308</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8hh_source.html#l00507">vmFD</a>.</p>

</div>
</div>
<a class="anchor" id="a97d7354434273221c8b42f876ec4f085"></a><!-- doxytag: member="KvmVM::KvmVM" ref="a97d7354434273221c8b42f876ec4f085" args="(const KvmVM &amp;vm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">KvmVM::KvmVM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classKvmVM.html">KvmVM</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a72e9b29a6c06242b77e4af156d22e13b"></a><!-- doxytag: member="KvmVM::allocMemSlot" ref="a72e9b29a6c06242b77e4af156d22e13b" args="(uint64_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structKvmVM_1_1MemSlot.html">KvmVM::MemSlot</a> KvmVM::allocMemSlot </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate a memory slot within the VM. </p>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00353">353</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8hh_source.html#l00526">KvmVM::MemorySlot::active</a>, <a class="el" href="vm_8hh_source.html#l00529">maxMemorySlot</a>, <a class="el" href="vm_8hh_source.html#l00528">memorySlots</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="vm_8hh_source.html#l00524">KvmVM::MemorySlot::size</a>, and <a class="el" href="vm_8hh_source.html#l00525">KvmVM::MemorySlot::slot</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00324">delayedStartup()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1c2a9e6be2a125e5aaac1063281ba90"></a><!-- doxytag: member="KvmVM::allocVCPUID" ref="ac1c2a9e6be2a125e5aaac1063281ba90" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long KvmVM::allocVCPUID </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate a new vCPU ID within the VM. </p>
<p>The returned vCPU ID is guaranteed to be unique within the VM. New IDs are allocated sequentially starting from 0.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>ID of the new vCPU </dd></dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00518">518</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8hh_source.html#l00516">nextVCPUID</a>.</p>

</div>
</div>
<a class="anchor" id="ad59091dda8a7e725f2bf9a41462fb94d"></a><!-- doxytag: member="KvmVM::coalesceMMIO" ref="ad59091dda8a7e725f2bf9a41462fb94d" args="(const AddrRange &amp;range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::coalesceMMIO </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classAddrRange.html">AddrRange</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>range</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classRequest.html">Request</a> coalescing MMIO for a memory range. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>range</em>&nbsp;</td><td>Coalesced MMIO range </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00432">432</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00438">coalesceMMIO()</a>, <a class="el" href="addr__range_8hh_source.html#l00214">AddrRange::size()</a>, and <a class="el" href="addr__range_8hh_source.html#l00227">AddrRange::start()</a>.</p>

</div>
</div>
<a class="anchor" id="a6a118f1b6427280d9f1a6c8304127cbf"></a><!-- doxytag: member="KvmVM::coalesceMMIO" ref="a6a118f1b6427280d9f1a6c8304127cbf" args="(Addr start, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::coalesceMMIO </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classRequest.html">Request</a> coalescing MMIO for a memory range. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>Physical start address in guest </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the MMIO region </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00438">438</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00432">coalesceMMIO()</a>, and <a class="el" href="vm_8cc_source.html#l00292">KvmVM()</a>.</p>

</div>
</div>
<a class="anchor" id="ab37c67dafe30c50a44976d0f4c239689"></a><!-- doxytag: member="KvmVM::cpuStartup" ref="ab37c67dafe30c50a44976d0f4c239689" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::cpuStartup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>VM CPU initialization code. </p>
<p>This method is called from <a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">BaseKvmCPU::startup()</a> when a CPU in the VM executes its <a class="el" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">BaseKvmCPU::startup()</a> method. The first time method is executed on a VM, it calls the <a class="el" href="classKvmVM.html#a030f852e34614d74bcbbad6f22ec84af" title="Delayed initialization, executed once before the first CPU starts.">delayedStartup()</a> method. </p>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00314">314</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00324">delayedStartup()</a>, and <a class="el" href="vm_8hh_source.html#l00510">started</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">BaseKvmCPU::startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a9754b75c1fa9626db90d838470ae095d"></a><!-- doxytag: member="KvmVM::createDevice" ref="a9754b75c1fa9626db90d838470ae095d" args="(uint32_t type, uint32_t flags=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KvmVM::createDevice </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create an in-kernel device model. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Device type (KVM_DEV_TYPE_xxx) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>Creation flags (KVM_CREATE_DEVICE_xxx) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Device file descriptor </dd></dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00489">489</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

</div>
</div>
<a class="anchor" id="aed670dbfb66064cd8eba1c488298aa73"></a><!-- doxytag: member="KvmVM::createVCPU" ref="aed670dbfb66064cd8eba1c488298aa73" args="(long vcpuID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int KvmVM::createVCPU </td>
          <td>(</td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>vcpuID</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new vCPU within a VM. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>vcpuID</em>&nbsp;</td><td>ID of the new CPU within the VM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>File descriptor referencing the CPU. </dd></dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00506">506</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="arch_2arm_2types_8hh_source.html#l00156">ArmISA::fd</a>, <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">BaseKvmCPU::startup()</a>.</p>

</div>
</div>
<a class="anchor" id="a030f852e34614d74bcbbad6f22ec84af"></a><!-- doxytag: member="KvmVM::delayedStartup" ref="a030f852e34614d74bcbbad6f22ec84af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::delayedStartup </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delayed initialization, executed once before the first CPU starts. </p>
<p>This method provides a way to do VM initialization once before the first CPU in a VM starts. It is needed since some resources (e.g., memory mappings) can change in the normal <a class="el" href="classSimObject.html#a15d30a398e82cab3686d2e9d54fd71a4" title="startup() is the final initialization call before simulation.">SimObject::startup()</a> path. Since the call order of <a class="el" href="classSimObject.html#a15d30a398e82cab3686d2e9d54fd71a4" title="startup() is the final initialization call before simulation.">SimObject::startup()</a> is not guaranteed, we simply defer some initialization until a CPU is about to start. </p>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00324">324</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00353">allocMemSlot()</a>, <a class="el" href="base_2trace_8hh_source.html#l00211">DPRINTF</a>, <a class="el" href="physical_8hh_source.html#l00170">PhysicalMemory::getBackingStore()</a>, <a class="el" href="sim_2system_8hh_source.html#l00263">System::getPhysMem()</a>, <a class="el" href="base_2misc_8hh_source.html#l00211">hack</a>, <a class="el" href="addr__range_8hh_source.html#l00184">AddrRange::interleaved()</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="vm_8cc_source.html#l00381">setupMemSlot()</a>, <a class="el" href="addr__range_8hh_source.html#l00214">AddrRange::size()</a>, <a class="el" href="addr__range_8hh_source.html#l00227">AddrRange::start()</a>, and <a class="el" href="vm_8hh_source.html#l00504">system</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00314">cpuStartup()</a>.</p>

</div>
</div>
<a class="anchor" id="ac685c6dceabd51659a2ff9e9a4b18028"></a><!-- doxytag: member="KvmVM::disableMemSlot" ref="ac685c6dceabd51659a2ff9e9a4b18028" args="(const MemSlot slot)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::disableMemSlot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a>&nbsp;</td>
          <td class="paramname"> <em>slot</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable a memory slot. </p>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00390">390</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8hh_source.html#l00526">KvmVM::MemorySlot::active</a>, <a class="el" href="vm_8hh_source.html#l00528">memorySlots</a>, <a class="el" href="vm_8hh_source.html#l00360">KvmVM::MemSlot::num</a>, and <a class="el" href="vm_8cc_source.html#l00407">setUserMemoryRegion()</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00399">freeMemSlot()</a>.</p>

</div>
</div>
<a class="anchor" id="a014045551908eabda19729199945fe12"></a><!-- doxytag: member="KvmVM::freeMemSlot" ref="a014045551908eabda19729199945fe12" args="(const MemSlot slot)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::freeMemSlot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a>&nbsp;</td>
          <td class="paramname"> <em>slot</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Free a previously allocated memory slot. </p>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00399">399</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00390">disableMemSlot()</a>, <a class="el" href="vm_8hh_source.html#l00528">memorySlots</a>, <a class="el" href="vm_8hh_source.html#l00360">KvmVM::MemSlot::num</a>, and <a class="el" href="vm_8hh_source.html#l00524">KvmVM::MemorySlot::size</a>.</p>

</div>
</div>
<a class="anchor" id="aa5e8976bb27cc31c248334efa8bf2ae6"></a><!-- doxytag: member="KvmVM::operator=" ref="aa5e8976bb27cc31c248334efa8bf2ae6" args="(const KvmVM &amp;vm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKvmVM.html">KvmVM</a>&amp; KvmVM::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classKvmVM.html">KvmVM</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0212f69eec89e520f03aa26b5d6b7572"></a><!-- doxytag: member="KvmVM::setTSSAddress" ref="a0212f69eec89e520f03aa26b5d6b7572" args="(Addr tss_address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::setTSSAddress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>tss_address</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup a shared three-page memory region used by the internals of KVM. </p>
<p>This is currently only needed by x86 implementations.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tss_address</em>&nbsp;</td><td>Physical address of the start of the TSS </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00454">454</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

</div>
</div>
<a class="anchor" id="a133a946aa69cd95abbeedddaa90707f6"></a><!-- doxytag: member="KvmVM::setupMemSlot" ref="a133a946aa69cd95abbeedddaa90707f6" args="(const MemSlot slot, void *host_addr, Addr guest_addr, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::setupMemSlot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structKvmVM_1_1MemSlot.html">MemSlot</a>&nbsp;</td>
          <td class="paramname"> <em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>host_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>guest_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup a region of physical memory in the guest. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>slot</em>&nbsp;</td><td>KVM memory slot ID returned by allocMemSlot </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>host_addr</em>&nbsp;</td><td>Memory allocation backing the memory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>guest_addr</em>&nbsp;</td><td><a class="el" href="classAddress.html">Address</a> in the guest </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td><a class="el" href="classFlags.html">Flags</a> (see the KVM API documentation) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00381">381</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8hh_source.html#l00526">KvmVM::MemorySlot::active</a>, <a class="el" href="vm_8hh_source.html#l00528">memorySlots</a>, <a class="el" href="vm_8hh_source.html#l00360">KvmVM::MemSlot::num</a>, <a class="el" href="vm_8cc_source.html#l00407">setUserMemoryRegion()</a>, and <a class="el" href="vm_8hh_source.html#l00524">KvmVM::MemorySlot::size</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00324">delayedStartup()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1f6769c8533ff99b589555b84349080"></a><!-- doxytag: member="KvmVM::setUserMemoryRegion" ref="ac1f6769c8533ff99b589555b84349080" args="(uint32_t slot, void *host_addr, Addr guest_addr, uint64_t len, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KvmVM::setUserMemoryRegion </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>host_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232">Addr</a>&nbsp;</td>
          <td class="paramname"> <em>guest_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup a region of physical memory in the guest. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>slot</em>&nbsp;</td><td>KVM memory slot ID (must be unique) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>host_addr</em>&nbsp;</td><td>Memory allocation backing the memory </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>guest_addr</em>&nbsp;</td><td><a class="el" href="classAddress.html">Address</a> in the guest </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Size of the allocation in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td><a class="el" href="classFlags.html">Flags</a> (see the KVM API documentation) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="vm_8cc_source.html#l00407">407</a> of file <a class="el" href="vm_8cc_source.html">vm.cc</a>.</p>

<p>References <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00390">disableMemSlot()</a>, and <a class="el" href="vm_8cc_source.html#l00381">setupMemSlot()</a>.</p>

</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="a61d1fc6581a443ce7c1106a1b6922d40"></a><!-- doxytag: member="KvmVM::BaseKvmCPU" ref="a61d1fc6581a443ce7c1106a1b6922d40" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classBaseKvmCPU.html">BaseKvmCPU</a><code> [friend]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00292">292</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="acf4411a92311a3647c4a239be43b73e6"></a><!-- doxytag: member="KvmVM::_hasKernelIRQChip" ref="acf4411a92311a3647c4a239be43b73e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classKvmVM.html#acf4411a92311a3647c4a239be43b73e6">KvmVM::_hasKernelIRQChip</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Do we have in-kernel IRQ-chip emulation enabled? </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00513">513</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00461">createIRQChip()</a>, and <a class="el" href="vm_8hh_source.html#l00350">hasKernelIRQChip()</a>.</p>

</div>
</div>
<a class="anchor" id="a32fdd2477c6b421de8cc34dd2f89b691"></a><!-- doxytag: member="KvmVM::kvm" ref="a32fdd2477c6b421de8cc34dd2f89b691" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classKvm.html">Kvm</a> <a class="el" href="classKvmVM.html#a32fdd2477c6b421de8cc34dd2f89b691">KvmVM::kvm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Global KVM interface. </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00399">399</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="x86__cpu_8cc_source.html#l00650">X86KvmCPU::dumpMSRs()</a>, <a class="el" href="x86__cpu_8cc_source.html#l01539">X86KvmCPU::getMsrIntersection()</a>, <a class="el" href="vm_8cc_source.html#l00292">KvmVM()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00124">BaseKvmCPU::startup()</a>, and <a class="el" href="x86__cpu_8cc_source.html#l00518">X86KvmCPU::X86KvmCPU()</a>.</p>

</div>
</div>
<a class="anchor" id="a3cfeb653669c062e650436a181862ba2"></a><!-- doxytag: member="KvmVM::maxMemorySlot" ref="a3cfeb653669c062e650436a181862ba2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t <a class="el" href="classKvmVM.html#a3cfeb653669c062e650436a181862ba2">KvmVM::maxMemorySlot</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00529">529</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00353">allocMemSlot()</a>, and <a class="el" href="vm_8cc_source.html#l00292">KvmVM()</a>.</p>

</div>
</div>
<a class="anchor" id="a6656129fa246aeeaf3aa1a02741b21ab"></a><!-- doxytag: member="KvmVM::memorySlots" ref="a6656129fa246aeeaf3aa1a02741b21ab" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classstd_1_1vector.html">std::vector</a>&lt;<a class="el" href="classKvmVM_1_1MemorySlot.html">MemorySlot</a>&gt; <a class="el" href="classKvmVM.html#a6656129fa246aeeaf3aa1a02741b21ab">KvmVM::memorySlots</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00528">528</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00353">allocMemSlot()</a>, <a class="el" href="vm_8cc_source.html#l00390">disableMemSlot()</a>, <a class="el" href="vm_8cc_source.html#l00399">freeMemSlot()</a>, and <a class="el" href="vm_8cc_source.html#l00381">setupMemSlot()</a>.</p>

</div>
</div>
<a class="anchor" id="a0b163fbcb4da042d42a64ece744bb306"></a><!-- doxytag: member="KvmVM::nextVCPUID" ref="a0b163fbcb4da042d42a64ece744bb306" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classKvmVM.html#a0b163fbcb4da042d42a64ece744bb306">KvmVM::nextVCPUID</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Next unallocated vCPU ID. </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00516">516</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00518">allocVCPUID()</a>.</p>

</div>
</div>
<a class="anchor" id="a2eb62c117f9c13f79271915aef0795ef"></a><!-- doxytag: member="KvmVM::started" ref="a2eb62c117f9c13f79271915aef0795ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classKvmVM.html#a2eb62c117f9c13f79271915aef0795ef">KvmVM::started</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Has <a class="el" href="classKvmVM.html#a030f852e34614d74bcbbad6f22ec84af" title="Delayed initialization, executed once before the first CPU starts.">delayedStartup()</a> already been called? </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00510">510</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00314">cpuStartup()</a>.</p>

</div>
</div>
<a class="anchor" id="af695030e1d862a6672918f4deed41485"></a><!-- doxytag: member="KvmVM::system" ref="af695030e1d862a6672918f4deed41485" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classSystem.html">System</a>* <a class="el" href="classKvmVM.html#af695030e1d862a6672918f4deed41485">KvmVM::system</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00504">504</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00324">delayedStartup()</a>.</p>

</div>
</div>
<a class="anchor" id="af8224146399124f67d1719e5ae4f03e2"></a><!-- doxytag: member="KvmVM::vmFD" ref="af8224146399124f67d1719e5ae4f03e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classKvmVM.html#af8224146399124f67d1719e5ae4f03e2">KvmVM::vmFD</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>KVM VM file descriptor. </p>

<p>Definition at line <a class="el" href="vm_8hh_source.html#l00507">507</a> of file <a class="el" href="vm_8hh_source.html">vm.hh</a>.</p>

<p>Referenced by <a class="el" href="vm_8cc_source.html#l00535">ioctl()</a>, and <a class="el" href="vm_8cc_source.html#l00308">~KvmVM()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cpu/kvm/<a class="el" href="vm_8hh_source.html">vm.hh</a></li>
<li>cpu/kvm/<a class="el" href="vm_8cc_source.html">vm.cc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:20 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
