<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: PerfKvmCounter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PerfKvmCounter Class Reference</h1><!-- doxytag: class="PerfKvmCounter" -->
<p>An instance of a performance counter.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>&gt;</code></p>

<p><a href="classPerfKvmCounter-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a04109dddf971bc3fa633cb02924a91e6">PerfKvmCounter</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and attach a new counter group.  <a href="#a04109dddf971bc3fa633cb02924a91e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a18c7ee654c949ebe2d589ce136c0ca0a">PerfKvmCounter</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;parent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create and attach a new counter and make it a member of an exist counter group.  <a href="#a18c7ee654c949ebe2d589ce136c0ca0a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a03dd01e5af63e5444b6cecc2c56f408e">PerfKvmCounter</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new counter, but don't attach it.  <a href="#a03dd01e5af63e5444b6cecc2c56f408e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a6c5564a77873981c1d4b0dfc324531d4">~PerfKvmCounter</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a52fe78af261cef0d29cb7e3ef353edd4">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attach a counter.  <a href="#a52fe78af261cef0d29cb7e3ef353edd4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a2a4373d79577238a74a33e9fc7347881">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;parent)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attach a counter and make it a member of an existing counter group.  <a href="#a2a4373d79577238a74a33e9fc7347881"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a513fe1fda49f4c7815d9bbf2130dc8f8">detach</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Detach a counter from PerfEvent.  <a href="#a513fe1fda49f4c7815d9bbf2130dc8f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a8979f0a436a01616065f0cfcad6dd875">attached</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="classCheck.html">Check</a> if a counter is attached.  <a href="#a8979f0a436a01616065f0cfcad6dd875"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a5aa773f86248318c3601d36461ec9d4f">start</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start counting.  <a href="#a5aa773f86248318c3601d36461ec9d4f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ad30a0be4ca2dd2101f4e1ea5b34f690d">stop</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop counting.  <a href="#ad30a0be4ca2dd2101f4e1ea5b34f690d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a783736987df878785e0e9de13f1b996b">period</a> (uint64_t period)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update the period of an overflow counter.  <a href="#a783736987df878785e0e9de13f1b996b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#acfe20429cd56f4f1b89ce9521ea95ffe">refresh</a> (int refresh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable a counter for a fixed number of events.  <a href="#acfe20429cd56f4f1b89ce9521ea95ffe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a810bfae360bd4672cbdc61442192cff7">read</a> () const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read the current value of a counter.  <a href="#a810bfae360bd4672cbdc61442192cff7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a0529f82e3cd912a079a75a5aab276108">enableSignals</a> (pid_t tid, int signal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable signal delivery to a thread on counter overflow.  <a href="#a0529f82e3cd912a079a75a5aab276108"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a8dd24f8eb474924c47917e9065a74d95">enableSignals</a> (int signal)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable signal delivery on counter overflow.  <a href="#a8dd24f8eb474924c47917e9065a74d95"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a0212182e8c619f861e52bc763a392b62">PerfKvmCounter</a> (const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;that)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ae3c927ebd508723e362740ef7d2806f2">operator=</a> (const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;that)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a8e6238ea143ec192819eeb8f35f48a17">attach</a> (<a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;config, pid_t tid, int group_fd)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a50722dfe99ee132a516d786b66279a4e">gettid</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the TID of the current thread.  <a href="#a50722dfe99ee132a516d786b66279a4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#af3ca32cc29f00874bc1435e80696ce78">mmapPerf</a> (int pages)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">MMAP the PerfEvent file descriptor.  <a href="#af3ca32cc29f00874bc1435e80696ce78"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a9dbf8ddfe9e22b5f2f9dfd276ff442f0">read</a> (void *buf, size_t size) const </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform a read from the counter file descriptor.  <a href="#a9dbf8ddfe9e22b5f2f9dfd276ff442f0"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
<br/><br/></div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a887f5f41866fe13e24cbf7d070ecfbf1">fcntl</a> (int cmd, long p1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PerfEvent fnctl interface.  <a href="#a887f5f41866fe13e24cbf7d070ecfbf1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a43aa44b229ef3fbce6bcada50819bd45">fcntl</a> (int cmd, void *p1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a837c62ac761daa787efd7d49e4494950">ioctl</a> (int request, long p1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PerfEvent ioctl interface.  <a href="#a837c62ac761daa787efd7d49e4494950"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#ae4563abacd69ff022ead49bf273054de">ioctl</a> (int request, void *p1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a5e9aa8be71af4c27274f1fb8bf87c99b">ioctl</a> (int request)</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a3f7639f73056627b89a919e8863fb8c7">fd</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PerfEvent file descriptor associated with counter.  <a href="#a3f7639f73056627b89a919e8863fb8c7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct perf_event_mmap_page *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#adc55f1dd2af13081e5134a6b7433d07d">ringBuffer</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Memory mapped PerfEvent sample ring buffer.  <a href="#adc55f1dd2af13081e5134a6b7433d07d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#acd4a7b534367937baa78a2ab8131872e">ringNumPages</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of pages in ring buffer.  <a href="#acd4a7b534367937baa78a2ab8131872e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPerfKvmCounter.html#a642d20e957841e0ba683b0a2fa99237a">pageSize</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cached host page size.  <a href="#a642d20e957841e0ba683b0a2fa99237a"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>An instance of a performance counter. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00170">170</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a04109dddf971bc3fa633cb02924a91e6"></a><!-- doxytag: member="PerfKvmCounter::PerfKvmCounter" ref="a04109dddf971bc3fa633cb02924a91e6" args="(PerfKvmCounterConfig &amp;config, pid_t tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and attach a new counter group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Counter configuration </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>Thread to sample (0 indicates current thread) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00070">70</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00206">attach()</a>.</p>

</div>
</div>
<a class="anchor" id="a18c7ee654c949ebe2d589ce136c0ca0a"></a><!-- doxytag: member="PerfKvmCounter::PerfKvmCounter" ref="a18c7ee654c949ebe2d589ce136c0ca0a" args="(PerfKvmCounterConfig &amp;config, pid_t tid, const PerfKvmCounter &amp;parent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and attach a new counter and make it a member of an exist counter group. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Counter configuration </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>Thread to sample (0 indicates current thread) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Group leader </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00076">76</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00206">attach()</a>.</p>

</div>
</div>
<a class="anchor" id="a03dd01e5af63e5444b6cecc2c56f408e"></a><!-- doxytag: member="PerfKvmCounter::PerfKvmCounter" ref="a03dd01e5af63e5444b6cecc2c56f408e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a new counter, but don't attach it. </p>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00083">83</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6c5564a77873981c1d4b0dfc324531d4"></a><!-- doxytag: member="PerfKvmCounter::~PerfKvmCounter" ref="a6c5564a77873981c1d4b0dfc324531d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::~PerfKvmCounter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00088">88</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>.</p>

</div>
</div>
<a class="anchor" id="a0212182e8c619f861e52bc763a392b62"></a><!-- doxytag: member="PerfKvmCounter::PerfKvmCounter" ref="a0212182e8c619f861e52bc763a392b62" args="(const PerfKvmCounter &amp;that)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PerfKvmCounter::PerfKvmCounter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>that</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8e6238ea143ec192819eeb8f35f48a17"></a><!-- doxytag: member="PerfKvmCounter::attach" ref="a8e6238ea143ec192819eeb8f35f48a17" args="(PerfKvmCounterConfig &amp;config, pid_t tid, int group_fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>group_fd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00161">161</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00164">PerfKvmCounterConfig::attr</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

</div>
</div>
<a class="anchor" id="a2a4373d79577238a74a33e9fc7347881"></a><!-- doxytag: member="PerfKvmCounter::attach" ref="a2a4373d79577238a74a33e9fc7347881" args="(PerfKvmCounterConfig &amp;config, pid_t tid, const PerfKvmCounter &amp;parent)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>parent</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attach a counter and make it a member of an existing counter group. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This operation is only supported if the counter isn't already attached.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Counter configuration </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>Thread to sample (0 indicates current thread) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>parent</em>&nbsp;</td><td>Group leader </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00221">221</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00206">attach()</a>, and <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

</div>
</div>
<a class="anchor" id="a52fe78af261cef0d29cb7e3ef353edd4"></a><!-- doxytag: member="PerfKvmCounter::attach" ref="a52fe78af261cef0d29cb7e3ef353edd4" args="(PerfKvmCounterConfig &amp;config, pid_t tid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::attach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPerfKvmCounterConfig.html">PerfKvmCounterConfig</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attach a counter. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This operation is only supported if the counter isn't already attached.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>Counter configuration </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>Thread to sample (0 indicates current thread) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00206">206</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00221">attach()</a>, <a class="el" href="perfevent_8cc_source.html#l00070">PerfKvmCounter()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01169">BaseKvmCPU::setupCounters()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">BaseKvmCPU::setupInstCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="a8979f0a436a01616065f0cfcad6dd875"></a><!-- doxytag: member="PerfKvmCounter::attached" ref="a8979f0a436a01616065f0cfcad6dd875" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PerfKvmCounter::attached </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="classCheck.html">Check</a> if a counter is attached. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00230">230</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>, <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, <a class="el" href="perfevent_8cc_source.html#l00207">fcntl()</a>, <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>, <a class="el" href="perfevent_8cc_source.html#l00221">read()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">BaseKvmCPU::setupInstCounter()</a>, and <a class="el" href="perfevent_8cc_source.html#l00088">~PerfKvmCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="a513fe1fda49f4c7815d9bbf2130dc8f8"></a><!-- doxytag: member="PerfKvmCounter::detach" ref="a513fe1fda49f4c7815d9bbf2130dc8f8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::detach </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Detach a counter from PerfEvent. </p>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00095">95</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8hh_source.html#l00380">pageSize</a>, <a class="el" href="perfevent_8hh_source.html#l00375">ringBuffer</a>, <a class="el" href="perfevent_8hh_source.html#l00377">ringNumPages</a>, and <a class="el" href="base_2misc_8hh_source.html#l00207">warn</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">BaseKvmCPU::setupInstCounter()</a>, and <a class="el" href="perfevent_8cc_source.html#l00088">~PerfKvmCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="a8dd24f8eb474924c47917e9065a74d95"></a><!-- doxytag: member="PerfKvmCounter::enableSignals" ref="a8dd24f8eb474924c47917e9065a74d95" args="(int signal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::enableSignals </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signal</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable signal delivery on counter overflow. </p>
<p>Identical to enableSignals(pid_t) when called with the current TID as its parameter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>signal</em>&nbsp;</td><td>Signal to send upon overflow </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00300">300</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00300">enableSignals()</a>, and <a class="el" href="perfevent_8cc_source.html#l00178">gettid()</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00300">enableSignals()</a>.</p>

</div>
</div>
<a class="anchor" id="a0529f82e3cd912a079a75a5aab276108"></a><!-- doxytag: member="PerfKvmCounter::enableSignals" ref="a0529f82e3cd912a079a75a5aab276108" args="(pid_t tid, int signal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::enableSignals </td>
          <td>(</td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>signal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable signal delivery to a thread on counter overflow. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tid</em>&nbsp;</td><td>Thread to deliver signal to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>signal</em>&nbsp;</td><td>Signal to send upon overflow </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00146">146</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8cc_source.html#l00207">fcntl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="timer_8cc_source.html#l00159">PerfKvmTimer::PerfKvmTimer()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l01246">BaseKvmCPU::setupInstCounter()</a>.</p>

</div>
</div>
<a class="anchor" id="a43aa44b229ef3fbce6bcada50819bd45"></a><!-- doxytag: member="PerfKvmCounter::fcntl" ref="a43aa44b229ef3fbce6bcada50819bd45" args="(int cmd, void *p1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::fcntl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>p1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00342">342</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00342">fcntl()</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00342">fcntl()</a>.</p>

</div>
</div>
<a class="anchor" id="a887f5f41866fe13e24cbf7d070ecfbf1"></a><!-- doxytag: member="PerfKvmCounter::fcntl" ref="a887f5f41866fe13e24cbf7d070ecfbf1" args="(int cmd, long p1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::fcntl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>p1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PerfEvent fnctl interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>fcntl command </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p1</em>&nbsp;</td><td><a class="el" href="classRequest.html">Request</a> parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 on error (error number in errno), ioctl dependent value otherwise. </dd></dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00207">207</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00146">enableSignals()</a>.</p>

</div>
</div>
<a class="anchor" id="a50722dfe99ee132a516d786b66279a4e"></a><!-- doxytag: member="PerfKvmCounter::gettid" ref="a50722dfe99ee132a516d786b66279a4e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pid_t PerfKvmCounter::gettid </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the TID of the current thread. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current thread's TID </dd></dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00178">178</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00300">enableSignals()</a>.</p>

</div>
</div>
<a class="anchor" id="a5e9aa8be71af4c27274f1fb8bf87c99b"></a><!-- doxytag: member="PerfKvmCounter::ioctl" ref="a5e9aa8be71af4c27274f1fb8bf87c99b" args="(int request)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>request</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00357">357</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00357">ioctl()</a>, and <a class="el" href="int_8hh_source.html#l00059">X86ISA::L</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00357">ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="ae4563abacd69ff022ead49bf273054de"></a><!-- doxytag: member="PerfKvmCounter::ioctl" ref="ae4563abacd69ff022ead49bf273054de" args="(int request, void *p1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>p1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00356">356</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00356">ioctl()</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8hh_source.html#l00356">ioctl()</a>.</p>

</div>
</div>
<a class="anchor" id="a837c62ac761daa787efd7d49e4494950"></a><!-- doxytag: member="PerfKvmCounter::ioctl" ref="a837c62ac761daa787efd7d49e4494950" args="(int request, long p1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PerfKvmCounter::ioctl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>p1</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PerfEvent ioctl interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>request</em>&nbsp;</td><td>PerfEvent request </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p1</em>&nbsp;</td><td>Optional request parameter</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 on error (error number in errno), ioctl dependent value otherwise. </dd></dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00214">214</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, and <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00123">period()</a>, <a class="el" href="perfevent_8cc_source.html#l00130">refresh()</a>, <a class="el" href="perfevent_8cc_source.html#l00109">start()</a>, and <a class="el" href="perfevent_8cc_source.html#l00116">stop()</a>.</p>

</div>
</div>
<a class="anchor" id="af3ca32cc29f00874bc1435e80696ce78"></a><!-- doxytag: member="PerfKvmCounter::mmapPerf" ref="af3ca32cc29f00874bc1435e80696ce78" args="(int pages)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::mmapPerf </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pages</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>MMAP the PerfEvent file descriptor. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>We currently don't use the ring buffer, but PerfEvent requires this to be mapped for overflow handling to work.</dd>
<dd>
Overflow handling requires at least one buf_page to be mapped.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pages</em>&nbsp;</td><td>number of pages in circular sample buffer. Must be an even power of 2. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00184">184</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="perfevent_8hh_source.html#l00380">pageSize</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, <a class="el" href="perfevent_8hh_source.html#l00375">ringBuffer</a>, and <a class="el" href="perfevent_8hh_source.html#l00377">ringNumPages</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3c927ebd508723e362740ef7d2806f2"></a><!-- doxytag: member="PerfKvmCounter::operator=" ref="ae3c927ebd508723e362740ef7d2806f2" args="(const PerfKvmCounter &amp;that)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a>&amp; PerfKvmCounter::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPerfKvmCounter.html">PerfKvmCounter</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>that</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a783736987df878785e0e9de13f1b996b"></a><!-- doxytag: member="PerfKvmCounter::period" ref="a783736987df878785e0e9de13f1b996b" args="(uint64_t period)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::period </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>period</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the period of an overflow counter. </p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>This ioctl has some pretty bizarre semantics. It seems like the new period isn't effective until after the next counter overflow. If you use this method to change the sample period, you will see one sample with the old period and then start sampling with the new period. This problem was fixed for ARM in version 3.7 of the kernel.</dd>
<dd>
This method doesn't work at all on some 2.6.3x kernels since it has inverted check for the return value when copying parameters from userspace.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>period</em>&nbsp;</td><td>Overflow period in events </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00123">123</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="timer_8cc_source.html#l00172">PerfKvmTimer::arm()</a>.</p>

</div>
</div>
<a class="anchor" id="a9dbf8ddfe9e22b5f2f9dfd276ff442f0"></a><!-- doxytag: member="PerfKvmCounter::read" ref="a9dbf8ddfe9e22b5f2f9dfd276ff442f0" args="(void *buf, size_t size) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::read </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td> const<code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform a read from the counter file descriptor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>Destination buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Amount of data to read </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00221">221</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8hh_source.html#l00372">fd</a>, <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>, and <a class="el" href="perfevent_8cc_source.html#l00137">read()</a>.</p>

</div>
</div>
<a class="anchor" id="a810bfae360bd4672cbdc61442192cff7"></a><!-- doxytag: member="PerfKvmCounter::read" ref="a810bfae360bd4672cbdc61442192cff7" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t PerfKvmCounter::read </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the current value of a counter. </p>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00137">137</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00619">BaseKvmCPU::getHostCycles()</a>, <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">BaseKvmCPU::kvmRun()</a>, and <a class="el" href="perfevent_8cc_source.html#l00221">read()</a>.</p>

</div>
</div>
<a class="anchor" id="acfe20429cd56f4f1b89ce9521ea95ffe"></a><!-- doxytag: member="PerfKvmCounter::refresh" ref="acfe20429cd56f4f1b89ce9521ea95ffe" args="(int refresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::refresh </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>refresh</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable a counter for a fixed number of events. </p>
<p>When this method is called, perf event enables the counter if it was disabled. It then leaves the counter enabled until it has overflowed a refresh times.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This does not update the period of the counter.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>refresh</em>&nbsp;</td><td>Number of overflows before disabling the counter. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00130">130</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="timer_8cc_source.html#l00172">PerfKvmTimer::arm()</a>.</p>

</div>
</div>
<a class="anchor" id="a5aa773f86248318c3601d36461ec9d4f"></a><!-- doxytag: member="PerfKvmCounter::start" ref="a5aa773f86248318c3601d36461ec9d4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::start </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start counting. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>If this counter is a group leader, it will start the entire group. </dd></dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00109">109</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">BaseKvmCPU::kvmRun()</a>.</p>

</div>
</div>
<a class="anchor" id="ad30a0be4ca2dd2101f4e1ea5b34f690d"></a><!-- doxytag: member="PerfKvmCounter::stop" ref="ad30a0be4ca2dd2101f4e1ea5b34f690d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PerfKvmCounter::stop </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop counting. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>If this counter is a group leader, it will stop the entire group. </dd></dl>

<p>Definition at line <a class="el" href="perfevent_8cc_source.html#l00116">116</a> of file <a class="el" href="perfevent_8cc_source.html">perfevent.cc</a>.</p>

<p>References <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, and <a class="el" href="base_2misc_8hh_source.html#l00104">panic</a>.</p>

<p>Referenced by <a class="el" href="timer_8cc_source.html#l00179">PerfKvmTimer::disarm()</a>, and <a class="el" href="cpu_2kvm_2base_8cc_source.html#l00625">BaseKvmCPU::kvmRun()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a3f7639f73056627b89a919e8863fb8c7"></a><!-- doxytag: member="PerfKvmCounter::fd" ref="a3f7639f73056627b89a919e8863fb8c7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPerfKvmCounter.html#a3f7639f73056627b89a919e8863fb8c7">PerfKvmCounter::fd</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PerfEvent file descriptor associated with counter. </p>
<p>-1 if not attached to PerfEvent. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00372">372</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00161">attach()</a>, <a class="el" href="perfevent_8hh_source.html#l00230">attached()</a>, <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, <a class="el" href="perfevent_8cc_source.html#l00207">fcntl()</a>, <a class="el" href="perfevent_8cc_source.html#l00214">ioctl()</a>, <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>, and <a class="el" href="perfevent_8cc_source.html#l00221">read()</a>.</p>

</div>
</div>
<a class="anchor" id="a642d20e957841e0ba683b0a2fa99237a"></a><!-- doxytag: member="PerfKvmCounter::pageSize" ref="a642d20e957841e0ba683b0a2fa99237a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classPerfKvmCounter.html#a642d20e957841e0ba683b0a2fa99237a">PerfKvmCounter::pageSize</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Cached host page size. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00380">380</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>.</p>

</div>
</div>
<a class="anchor" id="adc55f1dd2af13081e5134a6b7433d07d"></a><!-- doxytag: member="PerfKvmCounter::ringBuffer" ref="adc55f1dd2af13081e5134a6b7433d07d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct perf_event_mmap_page* <a class="el" href="classPerfKvmCounter.html#adc55f1dd2af13081e5134a6b7433d07d">PerfKvmCounter::ringBuffer</a><code> [read, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Memory mapped PerfEvent sample ring buffer. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00375">375</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>.</p>

</div>
</div>
<a class="anchor" id="acd4a7b534367937baa78a2ab8131872e"></a><!-- doxytag: member="PerfKvmCounter::ringNumPages" ref="acd4a7b534367937baa78a2ab8131872e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classPerfKvmCounter.html#acd4a7b534367937baa78a2ab8131872e">PerfKvmCounter::ringNumPages</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Total number of pages in ring buffer. </p>

<p>Definition at line <a class="el" href="perfevent_8hh_source.html#l00377">377</a> of file <a class="el" href="perfevent_8hh_source.html">perfevent.hh</a>.</p>

<p>Referenced by <a class="el" href="perfevent_8cc_source.html#l00095">detach()</a>, and <a class="el" href="perfevent_8cc_source.html#l00184">mmapPerf()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>cpu/kvm/<a class="el" href="perfevent_8hh_source.html">perfevent.hh</a></li>
<li>cpu/kvm/<a class="el" href="perfevent_8cc_source.html">perfevent.cc</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:21 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
