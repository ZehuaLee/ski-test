<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: arch/arm/faults.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>arch/arm/faults.cc</h1><a href="arch_2arm_2faults_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2010, 2012-2014 ARM Limited</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * The license below extends only to copyright in the software and shall</span>
<a name="l00006"></a>00006 <span class="comment"> * not be construed as granting a license to any other intellectual</span>
<a name="l00007"></a>00007 <span class="comment"> * property including but not limited to intellectual property relating</span>
<a name="l00008"></a>00008 <span class="comment"> * to a hardware implementation of the functionality of the software</span>
<a name="l00009"></a>00009 <span class="comment"> * licensed hereunder.  You may use the software subject to the license</span>
<a name="l00010"></a>00010 <span class="comment"> * terms below provided that you ensure that this notice is replicated</span>
<a name="l00011"></a>00011 <span class="comment"> * unmodified and in its entirety in all distributions of the software,</span>
<a name="l00012"></a>00012 <span class="comment"> * modified or unmodified, in source code or in binary form.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Copyright (c) 2003-2005 The Regents of The University of Michigan</span>
<a name="l00015"></a>00015 <span class="comment"> * Copyright (c) 2007-2008 The Florida State University</span>
<a name="l00016"></a>00016 <span class="comment"> * All rights reserved.</span>
<a name="l00017"></a>00017 <span class="comment"> *</span>
<a name="l00018"></a>00018 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00019"></a>00019 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00020"></a>00020 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00021"></a>00021 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00022"></a>00022 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00023"></a>00023 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00024"></a>00024 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00025"></a>00025 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00026"></a>00026 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00027"></a>00027 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00028"></a>00028 <span class="comment"> *</span>
<a name="l00029"></a>00029 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00030"></a>00030 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00031"></a>00031 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00032"></a>00032 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00033"></a>00033 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00034"></a>00034 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00035"></a>00035 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00036"></a>00036 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00037"></a>00037 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00038"></a>00038 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00039"></a>00039 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00040"></a>00040 <span class="comment"> *</span>
<a name="l00041"></a>00041 <span class="comment"> * Authors: Ali Saidi</span>
<a name="l00042"></a>00042 <span class="comment"> *          Gabe Black</span>
<a name="l00043"></a>00043 <span class="comment"> *          Giacomo Gabrielli</span>
<a name="l00044"></a>00044 <span class="comment"> *          Thomas Grocutt</span>
<a name="l00045"></a>00045 <span class="comment"> */</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="arch_2arm_2faults_8hh.html">arch/arm/faults.hh</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="arch_2arm_2system_8hh.html">arch/arm/system.hh</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="arm_2utility_8hh.html">arch/arm/utility.hh</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="arch_2arm_2insts_2static__inst_8hh.html">arch/arm/insts/static_inst.hh</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="compiler_8hh.html">base/compiler.hh</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="base_2trace_8hh.html">base/trace.hh</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="cpu_2base_8hh.html">cpu/base.hh</a>&quot;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#include &quot;<a class="code" href="thread__context_8hh.html">cpu/thread_context.hh</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#include &quot;debug/Faults.hh&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;<a class="code" href="full__system_8hh.html">sim/full_system.hh</a>&quot;</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="keyword">namespace </span>ArmISA
<a name="l00059"></a>00059 {
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 uint8_t <a class="code" href="classArmISA_1_1ArmFault.html#acc16bc2426ca96300dedc803a8b24ce2" title="Encodings of the fault sources when the short-desc.">ArmFault::shortDescFaultSources</a>[] = {
<a name="l00062"></a>00062     0x01,  <span class="comment">// AlignmentFault</span>
<a name="l00063"></a>00063     0x04,  <span class="comment">// InstructionCacheMaintenance</span>
<a name="l00064"></a>00064     0xff,  <span class="comment">// SynchExtAbtOnTranslTableWalkL0 (INVALID)</span>
<a name="l00065"></a>00065     0x0c,  <span class="comment">// SynchExtAbtOnTranslTableWalkL1</span>
<a name="l00066"></a>00066     0x0e,  <span class="comment">// SynchExtAbtOnTranslTableWalkL2</span>
<a name="l00067"></a>00067     0xff,  <span class="comment">// SynchExtAbtOnTranslTableWalkL3 (INVALID)</span>
<a name="l00068"></a>00068     0xff,  <span class="comment">// SynchPtyErrOnTranslTableWalkL0 (INVALID)</span>
<a name="l00069"></a>00069     0x1c,  <span class="comment">// SynchPtyErrOnTranslTableWalkL1</span>
<a name="l00070"></a>00070     0x1e,  <span class="comment">// SynchPtyErrOnTranslTableWalkL2</span>
<a name="l00071"></a>00071     0xff,  <span class="comment">// SynchPtyErrOnTranslTableWalkL3 (INVALID)</span>
<a name="l00072"></a>00072     0xff,  <span class="comment">// TranslationL0 (INVALID)</span>
<a name="l00073"></a>00073     0x05,  <span class="comment">// TranslationL1</span>
<a name="l00074"></a>00074     0x07,  <span class="comment">// TranslationL2</span>
<a name="l00075"></a>00075     0xff,  <span class="comment">// TranslationL3 (INVALID)</span>
<a name="l00076"></a>00076     0xff,  <span class="comment">// AccessFlagL0 (INVALID)</span>
<a name="l00077"></a>00077     0x03,  <span class="comment">// AccessFlagL1</span>
<a name="l00078"></a>00078     0x06,  <span class="comment">// AccessFlagL2</span>
<a name="l00079"></a>00079     0xff,  <span class="comment">// AccessFlagL3 (INVALID)</span>
<a name="l00080"></a>00080     0xff,  <span class="comment">// DomainL0 (INVALID)</span>
<a name="l00081"></a>00081     0x09,  <span class="comment">// DomainL1</span>
<a name="l00082"></a>00082     0x0b,  <span class="comment">// DomainL2</span>
<a name="l00083"></a>00083     0xff,  <span class="comment">// DomainL3 (INVALID)</span>
<a name="l00084"></a>00084     0xff,  <span class="comment">// PermissionL0 (INVALID)</span>
<a name="l00085"></a>00085     0x0d,  <span class="comment">// PermissionL1</span>
<a name="l00086"></a>00086     0x0f,  <span class="comment">// PermissionL2</span>
<a name="l00087"></a>00087     0xff,  <span class="comment">// PermissionL3 (INVALID)</span>
<a name="l00088"></a>00088     0x02,  <span class="comment">// DebugEvent</span>
<a name="l00089"></a>00089     0x08,  <span class="comment">// SynchronousExternalAbort</span>
<a name="l00090"></a>00090     0x10,  <span class="comment">// TLBConflictAbort</span>
<a name="l00091"></a>00091     0x19,  <span class="comment">// SynchPtyErrOnMemoryAccess</span>
<a name="l00092"></a>00092     0x16,  <span class="comment">// AsynchronousExternalAbort</span>
<a name="l00093"></a>00093     0x18,  <span class="comment">// AsynchPtyErrOnMemoryAccess</span>
<a name="l00094"></a>00094     0xff,  <span class="comment">// AddressSizeL0 (INVALID)</span>
<a name="l00095"></a>00095     0xff,  <span class="comment">// AddressSizeL1 (INVALID)</span>
<a name="l00096"></a>00096     0xff,  <span class="comment">// AddressSizeL2 (INVALID)</span>
<a name="l00097"></a>00097     0xff,  <span class="comment">// AddressSizeL3 (INVALID)</span>
<a name="l00098"></a>00098     0x40,  <span class="comment">// PrefetchTLBMiss</span>
<a name="l00099"></a>00099     0x80   <span class="comment">// PrefetchUncacheable</span>
<a name="l00100"></a>00100 };
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <a class="code" href="namespaceArmISA.html#a807a31461864ef4e3306fb6879fe34b5">static_assert</a>(<span class="keyword">sizeof</span>(<a class="code" href="classArmISA_1_1ArmFault.html#acc16bc2426ca96300dedc803a8b24ce2" title="Encodings of the fault sources when the short-desc.">ArmFault::shortDescFaultSources</a>) ==
<a name="l00103"></a>00103               <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa608a21bb93389523d7f4a59ab8fb5a9">ArmFault::NumFaultSources</a>,
<a name="l00104"></a>00104               <span class="stringliteral">&quot;Invalid size of ArmFault::shortDescFaultSources[]&quot;</span>);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 uint8_t <a class="code" href="classArmISA_1_1ArmFault.html#a6d42bb90e15863fb1c45a7c1f2dfa3b2" title="Encodings of the fault sources when the long-desc.">ArmFault::longDescFaultSources</a>[] = {
<a name="l00107"></a>00107     0x21,  <span class="comment">// AlignmentFault</span>
<a name="l00108"></a>00108     0xff,  <span class="comment">// InstructionCacheMaintenance (INVALID)</span>
<a name="l00109"></a>00109     0xff,  <span class="comment">// SynchExtAbtOnTranslTableWalkL0 (INVALID)</span>
<a name="l00110"></a>00110     0x15,  <span class="comment">// SynchExtAbtOnTranslTableWalkL1</span>
<a name="l00111"></a>00111     0x16,  <span class="comment">// SynchExtAbtOnTranslTableWalkL2</span>
<a name="l00112"></a>00112     0x17,  <span class="comment">// SynchExtAbtOnTranslTableWalkL3</span>
<a name="l00113"></a>00113     0xff,  <span class="comment">// SynchPtyErrOnTranslTableWalkL0 (INVALID)</span>
<a name="l00114"></a>00114     0x1d,  <span class="comment">// SynchPtyErrOnTranslTableWalkL1</span>
<a name="l00115"></a>00115     0x1e,  <span class="comment">// SynchPtyErrOnTranslTableWalkL2</span>
<a name="l00116"></a>00116     0x1f,  <span class="comment">// SynchPtyErrOnTranslTableWalkL3</span>
<a name="l00117"></a>00117     0xff,  <span class="comment">// TranslationL0 (INVALID)</span>
<a name="l00118"></a>00118     0x05,  <span class="comment">// TranslationL1</span>
<a name="l00119"></a>00119     0x06,  <span class="comment">// TranslationL2</span>
<a name="l00120"></a>00120     0x07,  <span class="comment">// TranslationL3</span>
<a name="l00121"></a>00121     0xff,  <span class="comment">// AccessFlagL0 (INVALID)</span>
<a name="l00122"></a>00122     0x09,  <span class="comment">// AccessFlagL1</span>
<a name="l00123"></a>00123     0x0a,  <span class="comment">// AccessFlagL2</span>
<a name="l00124"></a>00124     0x0b,  <span class="comment">// AccessFlagL3</span>
<a name="l00125"></a>00125     0xff,  <span class="comment">// DomainL0 (INVALID)</span>
<a name="l00126"></a>00126     0x3d,  <span class="comment">// DomainL1</span>
<a name="l00127"></a>00127     0x3e,  <span class="comment">// DomainL2</span>
<a name="l00128"></a>00128     0xff,  <span class="comment">// DomainL3 (RESERVED)</span>
<a name="l00129"></a>00129     0xff,  <span class="comment">// PermissionL0 (INVALID)</span>
<a name="l00130"></a>00130     0x0d,  <span class="comment">// PermissionL1</span>
<a name="l00131"></a>00131     0x0e,  <span class="comment">// PermissionL2</span>
<a name="l00132"></a>00132     0x0f,  <span class="comment">// PermissionL3</span>
<a name="l00133"></a>00133     0x22,  <span class="comment">// DebugEvent</span>
<a name="l00134"></a>00134     0x10,  <span class="comment">// SynchronousExternalAbort</span>
<a name="l00135"></a>00135     0x30,  <span class="comment">// TLBConflictAbort</span>
<a name="l00136"></a>00136     0x18,  <span class="comment">// SynchPtyErrOnMemoryAccess</span>
<a name="l00137"></a>00137     0x11,  <span class="comment">// AsynchronousExternalAbort</span>
<a name="l00138"></a>00138     0x19,  <span class="comment">// AsynchPtyErrOnMemoryAccess</span>
<a name="l00139"></a>00139     0xff,  <span class="comment">// AddressSizeL0 (INVALID)</span>
<a name="l00140"></a>00140     0xff,  <span class="comment">// AddressSizeL1 (INVALID)</span>
<a name="l00141"></a>00141     0xff,  <span class="comment">// AddressSizeL2 (INVALID)</span>
<a name="l00142"></a>00142     0xff,  <span class="comment">// AddressSizeL3 (INVALID)</span>
<a name="l00143"></a>00143     0x40,  <span class="comment">// PrefetchTLBMiss</span>
<a name="l00144"></a>00144     0x80   <span class="comment">// PrefetchUncacheable</span>
<a name="l00145"></a>00145 };
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <a class="code" href="namespaceArmISA.html#a807a31461864ef4e3306fb6879fe34b5">static_assert</a>(<span class="keyword">sizeof</span>(<a class="code" href="classArmISA_1_1ArmFault.html#a6d42bb90e15863fb1c45a7c1f2dfa3b2" title="Encodings of the fault sources when the long-desc.">ArmFault::longDescFaultSources</a>) ==
<a name="l00148"></a>00148               <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa608a21bb93389523d7f4a59ab8fb5a9">ArmFault::NumFaultSources</a>,
<a name="l00149"></a>00149               <span class="stringliteral">&quot;Invalid size of ArmFault::longDescFaultSources[]&quot;</span>);
<a name="l00150"></a>00150 
<a name="l00151"></a>00151 uint8_t <a class="code" href="classArmISA_1_1ArmFault.html#a1d068459d7b3f859b562a7a009f6cde6" title="Encodings of the fault sources in AArch64 state.">ArmFault::aarch64FaultSources</a>[] = {
<a name="l00152"></a>00152     0x21,  <span class="comment">// AlignmentFault</span>
<a name="l00153"></a>00153     0xff,  <span class="comment">// InstructionCacheMaintenance (INVALID)</span>
<a name="l00154"></a>00154     0x14,  <span class="comment">// SynchExtAbtOnTranslTableWalkL0</span>
<a name="l00155"></a>00155     0x15,  <span class="comment">// SynchExtAbtOnTranslTableWalkL1</span>
<a name="l00156"></a>00156     0x16,  <span class="comment">// SynchExtAbtOnTranslTableWalkL2</span>
<a name="l00157"></a>00157     0x17,  <span class="comment">// SynchExtAbtOnTranslTableWalkL3</span>
<a name="l00158"></a>00158     0x1c,  <span class="comment">// SynchPtyErrOnTranslTableWalkL0</span>
<a name="l00159"></a>00159     0x1d,  <span class="comment">// SynchPtyErrOnTranslTableWalkL1</span>
<a name="l00160"></a>00160     0x1e,  <span class="comment">// SynchPtyErrOnTranslTableWalkL2</span>
<a name="l00161"></a>00161     0x1f,  <span class="comment">// SynchPtyErrOnTranslTableWalkL3</span>
<a name="l00162"></a>00162     0x04,  <span class="comment">// TranslationL0</span>
<a name="l00163"></a>00163     0x05,  <span class="comment">// TranslationL1</span>
<a name="l00164"></a>00164     0x06,  <span class="comment">// TranslationL2</span>
<a name="l00165"></a>00165     0x07,  <span class="comment">// TranslationL3</span>
<a name="l00166"></a>00166     0x08,  <span class="comment">// AccessFlagL0</span>
<a name="l00167"></a>00167     0x09,  <span class="comment">// AccessFlagL1</span>
<a name="l00168"></a>00168     0x0a,  <span class="comment">// AccessFlagL2</span>
<a name="l00169"></a>00169     0x0b,  <span class="comment">// AccessFlagL3</span>
<a name="l00170"></a>00170     <span class="comment">// @todo: Section &amp; Page Domain Fault in AArch64?</span>
<a name="l00171"></a>00171     0xff,  <span class="comment">// DomainL0 (INVALID)</span>
<a name="l00172"></a>00172     0xff,  <span class="comment">// DomainL1 (INVALID)</span>
<a name="l00173"></a>00173     0xff,  <span class="comment">// DomainL2 (INVALID)</span>
<a name="l00174"></a>00174     0xff,  <span class="comment">// DomainL3 (INVALID)</span>
<a name="l00175"></a>00175     0x0c,  <span class="comment">// PermissionL0</span>
<a name="l00176"></a>00176     0x0d,  <span class="comment">// PermissionL1</span>
<a name="l00177"></a>00177     0x0e,  <span class="comment">// PermissionL2</span>
<a name="l00178"></a>00178     0x0f,  <span class="comment">// PermissionL3</span>
<a name="l00179"></a>00179     0xff,  <span class="comment">// DebugEvent (INVALID)</span>
<a name="l00180"></a>00180     0x10,  <span class="comment">// SynchronousExternalAbort</span>
<a name="l00181"></a>00181     0x30,  <span class="comment">// TLBConflictAbort</span>
<a name="l00182"></a>00182     0x18,  <span class="comment">// SynchPtyErrOnMemoryAccess</span>
<a name="l00183"></a>00183     0xff,  <span class="comment">// AsynchronousExternalAbort (INVALID)</span>
<a name="l00184"></a>00184     0xff,  <span class="comment">// AsynchPtyErrOnMemoryAccess (INVALID)</span>
<a name="l00185"></a>00185     0x00,  <span class="comment">// AddressSizeL0</span>
<a name="l00186"></a>00186     0x01,  <span class="comment">// AddressSizeL1</span>
<a name="l00187"></a>00187     0x02,  <span class="comment">// AddressSizeL2</span>
<a name="l00188"></a>00188     0x03,  <span class="comment">// AddressSizeL3</span>
<a name="l00189"></a>00189     0x40,  <span class="comment">// PrefetchTLBMiss</span>
<a name="l00190"></a>00190     0x80   <span class="comment">// PrefetchUncacheable</span>
<a name="l00191"></a>00191 };
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <a class="code" href="namespaceArmISA.html#a807a31461864ef4e3306fb6879fe34b5">static_assert</a>(<span class="keyword">sizeof</span>(<a class="code" href="classArmISA_1_1ArmFault.html#a1d068459d7b3f859b562a7a009f6cde6" title="Encodings of the fault sources in AArch64 state.">ArmFault::aarch64FaultSources</a>) ==
<a name="l00194"></a>00194               <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa608a21bb93389523d7f4a59ab8fb5a9">ArmFault::NumFaultSources</a>,
<a name="l00195"></a>00195               <span class="stringliteral">&quot;Invalid size of ArmFault::aarch64FaultSources[]&quot;</span>);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">// Fields: name, offset, cur{ELT,ELH}Offset, lowerEL{64,32}Offset, next mode,</span>
<a name="l00198"></a>00198 <span class="comment">//         {ARM, Thumb, ARM_ELR, Thumb_ELR} PC offset, hyp trap,</span>
<a name="l00199"></a>00199 <span class="comment">//         {A, F} disable, class, stat</span>
<a name="l00200"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a5aeab8fa75eff3fc0cec0c01a2dea13a">00200</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;Reset&gt;::vals</a> = {
<a name="l00201"></a>00201     <span class="comment">// Some dummy values (the reset vector has an IMPLEMENTATION DEFINED</span>
<a name="l00202"></a>00202     <span class="comment">// location in AArch64)</span>
<a name="l00203"></a>00203     <span class="stringliteral">&quot;Reset&quot;</span>,                 0x000, 0x000, 0x000, 0x000, 0x000, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00204"></a>00204     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00205"></a>00205 };
<a name="l00206"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a14d157bf9fba1d2f91c91f44e4e5ce36">00206</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;UndefinedInstruction&gt;::vals</a> = {
<a name="l00207"></a>00207     <span class="stringliteral">&quot;Undefined Instruction&quot;</span>, 0x004, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa10cc39a52b92ebf858ea22641d4b8f67">MODE_UNDEFINED</a>,
<a name="l00208"></a>00208     4, 2, 0, 0, <span class="keyword">true</span>,  <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00209"></a>00209 };
<a name="l00210"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a31fc87f89dd44915a8508976d411b799">00210</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SupervisorCall&gt;::vals</a> = {
<a name="l00211"></a>00211     <span class="stringliteral">&quot;Supervisor Call&quot;</span>,       0x008, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00212"></a>00212     4, 2, 4, 2, <span class="keyword">true</span>,  <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba8b9c891cbcd7341a3cd18b3d5484ec49">EC_SVC_TO_HYP</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00213"></a>00213 };
<a name="l00214"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#ad1fb011ccc61f3b76ee26c47061b61ca">00214</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SecureMonitorCall&gt;::vals</a> = {
<a name="l00215"></a>00215     <span class="stringliteral">&quot;Secure Monitor Call&quot;</span>,   0x008, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>,
<a name="l00216"></a>00216     4, 4, 4, 4, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112bac3172217def2d8d02c3d60972a46d44b">EC_SMC_TO_HYP</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00217"></a>00217 };
<a name="l00218"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#afd845fac895f5b3247adca0222724b7e">00218</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;HypervisorCall&gt;::vals</a> = {
<a name="l00219"></a>00219     <span class="stringliteral">&quot;Hypervisor Call&quot;</span>,       0x008, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>,
<a name="l00220"></a>00220     4, 4, 4, 4, <span class="keyword">true</span>,  <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba6a1cd84fc308ea5817b0513b81373415">EC_HVC</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00221"></a>00221 };
<a name="l00222"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#ac32c979e20a37af0999ea072b5303f86">00222</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;PrefetchAbort&gt;::vals</a> = {
<a name="l00223"></a>00223     <span class="stringliteral">&quot;Prefetch Abort&quot;</span>,        0x00C, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa30dcc6cd75f082e88b37560c616eb085">MODE_ABORT</a>,
<a name="l00224"></a>00224     4, 4, 0, 0, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baae117f9fa8045e0433602fa6caf1da6d">EC_PREFETCH_ABORT_TO_HYP</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00225"></a>00225 };
<a name="l00226"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#abe1afb9a9d8ce29d044c42522fae29a4">00226</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;DataAbort&gt;::vals</a> = {
<a name="l00227"></a>00227     <span class="stringliteral">&quot;Data Abort&quot;</span>,            0x010, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa30dcc6cd75f082e88b37560c616eb085">MODE_ABORT</a>,
<a name="l00228"></a>00228     8, 8, 0, 0, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba92c71c02cfb0508f02f719812b05921f">EC_DATA_ABORT_TO_HYP</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00229"></a>00229 };
<a name="l00230"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a560fa08d2f505c900471e9b5ca4023dc">00230</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualDataAbort&gt;::vals</a> = {
<a name="l00231"></a>00231     <span class="stringliteral">&quot;Virtual Data Abort&quot;</span>,    0x010, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa30dcc6cd75f082e88b37560c616eb085">MODE_ABORT</a>,
<a name="l00232"></a>00232     8, 8, 0, 0, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00233"></a>00233 };
<a name="l00234"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a47e8c0fe9de49e3cd65077bce0c0d00b">00234</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;HypervisorTrap&gt;::vals</a> = {
<a name="l00235"></a>00235     <span class="comment">// @todo: double check these values</span>
<a name="l00236"></a>00236     <span class="stringliteral">&quot;Hypervisor Trap&quot;</span>,       0x014, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>,
<a name="l00237"></a>00237     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00238"></a>00238 };
<a name="l00239"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#aca08091eeb357cf83fc73a0698455671">00239</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;Interrupt&gt;::vals</a> = {
<a name="l00240"></a>00240     <span class="stringliteral">&quot;IRQ&quot;</span>,                   0x018, 0x080, 0x280, 0x480, 0x680, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa8b093879d9c3d3c53b43dc742fefb20d">MODE_IRQ</a>,
<a name="l00241"></a>00241     4, 4, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00242"></a>00242 };
<a name="l00243"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#af3524ef9b53a894048ee22364eccc05b">00243</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualInterrupt&gt;::vals</a> = {
<a name="l00244"></a>00244     <span class="stringliteral">&quot;Virtual IRQ&quot;</span>,           0x018, 0x080, 0x280, 0x480, 0x680, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa8b093879d9c3d3c53b43dc742fefb20d">MODE_IRQ</a>,
<a name="l00245"></a>00245     4, 4, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00246"></a>00246 };
<a name="l00247"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a04679e4f1434d90d057eede990212194">00247</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;FastInterrupt&gt;::vals</a> = {
<a name="l00248"></a>00248     <span class="stringliteral">&quot;FIQ&quot;</span>,                   0x01C, 0x100, 0x300, 0x500, 0x700, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa86013c5c3682ecc03deaf42c249be495">MODE_FIQ</a>,
<a name="l00249"></a>00249     4, 4, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00250"></a>00250 };
<a name="l00251"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#aa97fe728b4960b3a36282dc38c7cd30a">00251</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualFastInterrupt&gt;::vals</a> = {
<a name="l00252"></a>00252     <span class="stringliteral">&quot;Virtual FIQ&quot;</span>,           0x01C, 0x100, 0x300, 0x500, 0x700, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa86013c5c3682ecc03deaf42c249be495">MODE_FIQ</a>,
<a name="l00253"></a>00253     4, 4, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00254"></a>00254 };
<a name="l00255"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#ad707a0a3e33f81fed732cfe543b66308">00255</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SupervisorTrap&gt;::vals</a> = {
<a name="l00256"></a>00256     <span class="comment">// Some dummy values (SupervisorTrap is AArch64-only)</span>
<a name="l00257"></a>00257     <span class="stringliteral">&quot;Supervisor Trap&quot;</span>,   0x014, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00258"></a>00258     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00259"></a>00259 };
<a name="l00260"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a7a8186088715c3840c281a826d350172">00260</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SecureMonitorTrap&gt;::vals</a> = {
<a name="l00261"></a>00261     <span class="comment">// Some dummy values (SecureMonitorTrap is AArch64-only)</span>
<a name="l00262"></a>00262     <span class="stringliteral">&quot;Secure Monitor Trap&quot;</span>,   0x014, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>,
<a name="l00263"></a>00263     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00264"></a>00264 };
<a name="l00265"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a5d8536ef32e2f93493f638f8ca272b6b">00265</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;PCAlignmentFault&gt;::vals</a> = {
<a name="l00266"></a>00266     <span class="comment">// Some dummy values (PCAlignmentFault is AArch64-only)</span>
<a name="l00267"></a>00267     <span class="stringliteral">&quot;PC Alignment Fault&quot;</span>,   0x000, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00268"></a>00268     0, 0, 0, 0, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112bacf75ea90cbb99d13fa8344000072d9dc">EC_PC_ALIGNMENT</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00269"></a>00269 };
<a name="l00270"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#abfa4c87339e7c3359aeeea8d1da76a3b">00270</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SPAlignmentFault&gt;::vals</a> = {
<a name="l00271"></a>00271     <span class="comment">// Some dummy values (SPAlignmentFault is AArch64-only)</span>
<a name="l00272"></a>00272     <span class="stringliteral">&quot;SP Alignment Fault&quot;</span>,   0x000, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00273"></a>00273     0, 0, 0, 0, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba785d14726adf8fcf1c62e9c78be7e612">EC_STACK_PTR_ALIGNMENT</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00274"></a>00274 };
<a name="l00275"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#af180295ba9eca27aaa32b6a8381e8b04">00275</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SystemError&gt;::vals</a> = {
<a name="l00276"></a>00276     <span class="comment">// Some dummy values (SError is AArch64-only)</span>
<a name="l00277"></a>00277     <span class="stringliteral">&quot;SError&quot;</span>,                0x000, 0x180, 0x380, 0x580, 0x780, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00278"></a>00278     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112bab6d9ddb9c9c9ef45b02ae4a62aa03f9a">EC_SERROR</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00279"></a>00279 };
<a name="l00280"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a750ff641a60f95903493d57b2c8db7e9">00280</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;FlushPipe&gt;::vals</a> = {
<a name="l00281"></a>00281     <span class="comment">// Some dummy values</span>
<a name="l00282"></a>00282     <span class="stringliteral">&quot;Pipe Flush&quot;</span>,            0x000, 0x000, 0x000, 0x000, 0x000, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00283"></a>00283     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00284"></a>00284 };
<a name="l00285"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a44fb4d829274aba7974daab03e8bb9c1">00285</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;ArmSev&gt;::vals</a> = {
<a name="l00286"></a>00286     <span class="comment">// Some dummy values</span>
<a name="l00287"></a>00287     <span class="stringliteral">&quot;ArmSev Flush&quot;</span>,          0x000, 0x000, 0x000, 0x000, 0x000, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00288"></a>00288     0, 0, 0, 0, <span class="keyword">false</span>, <span class="keyword">true</span>,  <span class="keyword">true</span>,  <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00289"></a>00289 };
<a name="l00290"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#a1aa5b3ffb6239c9954c6a1f8c10d75b5">00290</a> <span class="keyword">template</span>&lt;&gt; <a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html">ArmFault::FaultVals</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;IllegalInstSetStateFault&gt;::vals</a> = {
<a name="l00291"></a>00291     <span class="comment">// Some dummy values (SPAlignmentFault is AArch64-only)</span>
<a name="l00292"></a>00292     <span class="stringliteral">&quot;Illegal Inst Set State Fault&quot;</span>,   0x000, 0x000, 0x200, 0x400, 0x600, <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>,
<a name="l00293"></a>00293     0, 0, 0, 0, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112bacfa38b9658aa17d558dd31ffab819131">EC_ILLEGAL_INST</a>, <a class="code" href="sim_2faults_8hh.html#afd21824d6eba50d78a4785991e6d122e">FaultStat</a>()
<a name="l00294"></a>00294 };
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a>
<a name="l00297"></a><a class="code" href="classArmISA_1_1ArmFault.html#a881164d3e4888fa066b6beee21b94bfa">00297</a> <a class="code" href="classArmISA_1_1ArmFault.html#a881164d3e4888fa066b6beee21b94bfa">ArmFault::getVector</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l00298"></a>00298 {
<a name="l00299"></a>00299     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> <a class="code" href="namespaceX86ISA.html#aa3826b335948154c40c1b6a32cbd10f5">base</a>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301     <span class="comment">// ARM ARM issue C B1.8.1</span>
<a name="l00302"></a>00302     <span class="keywordtype">bool</span> haveSecurity = <a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">// panic if SCTLR.VE because I have no idea what to do with vectored</span>
<a name="l00305"></a>00305     <span class="comment">// interrupts</span>
<a name="l00306"></a>00306     SCTLR sctlr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca540af25d1d321d1891bf4d9292c227c1">MISCREG_SCTLR</a>);
<a name="l00307"></a>00307     assert(!sctlr.ve);
<a name="l00308"></a>00308     <span class="comment">// Check for invalid modes</span>
<a name="l00309"></a>00309     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00310"></a>00310     assert(haveSecurity                      || cpsr.mode != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>);
<a name="l00311"></a>00311     assert(<a class="code" href="classArmSystem.html#a56fe69900ac88701fdec086573b2be18" title="Returns true if this system implements the virtualization Extensions.">ArmSystem::haveVirtualization</a>(tc) || cpsr.mode != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313     <span class="keywordflow">switch</span> (cpsr.mode)
<a name="l00314"></a>00314     {
<a name="l00315"></a>00315       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>:
<a name="l00316"></a>00316         base = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cac81ed598242aa264e2a1ae14f8eb8710">MISCREG_MVBAR</a>);
<a name="l00317"></a>00317         <span class="keywordflow">break</span>;
<a name="l00318"></a>00318       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>:
<a name="l00319"></a>00319         base = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad31e9d4cb740f361765b5604985f048f">MISCREG_HVBAR</a>);
<a name="l00320"></a>00320         <span class="keywordflow">break</span>;
<a name="l00321"></a>00321       <span class="keywordflow">default</span>:
<a name="l00322"></a>00322         <span class="keywordflow">if</span> (sctlr.v) {
<a name="l00323"></a>00323             base = <a class="code" href="namespaceArmISA.html#a77e6fd49ff51fff04b662beb0a5f2f33">HighVecs</a>;
<a name="l00324"></a>00324         } <span class="keywordflow">else</span> {
<a name="l00325"></a>00325             base = haveSecurity ? tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca7c75d790c0b82fa49e3891e5fa334e1e">MISCREG_VBAR</a>) : 0;
<a name="l00326"></a>00326         }
<a name="l00327"></a>00327         <span class="keywordflow">break</span>;
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329     <span class="keywordflow">return</span> base + <a class="code" href="classArmISA_1_1ArmFault.html#acf9ee082bcc7ce90acaf912c6ebfc52a">offset</a>(tc);
<a name="l00330"></a>00330 }
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a>
<a name="l00333"></a><a class="code" href="classArmISA_1_1ArmFault.html#aa76a02fe201f9449151eb7411741f1df">00333</a> <a class="code" href="classArmISA_1_1ArmFault.html#aa76a02fe201f9449151eb7411741f1df">ArmFault::getVector64</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l00334"></a>00334 {
<a name="l00335"></a>00335     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> vbar;
<a name="l00336"></a>00336     <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>) {
<a name="l00337"></a>00337       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98da3dcb0a3ebc6bb1438051b3e943ae5325">EL3</a>:
<a name="l00338"></a>00338         assert(<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc));
<a name="l00339"></a>00339         vbar = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca7c66ffd5b1be0a9bdeacff320694a62f">MISCREG_VBAR_EL3</a>);
<a name="l00340"></a>00340         <span class="keywordflow">break</span>;
<a name="l00341"></a>00341       <span class="comment">// @todo: uncomment this to enable Virtualization</span>
<a name="l00342"></a>00342       <span class="comment">// case EL2:</span>
<a name="l00343"></a>00343       <span class="comment">//   assert(ArmSystem::haveVirtualization(tc));</span>
<a name="l00344"></a>00344       <span class="comment">//   vbar = tc-&gt;readMiscReg(MISCREG_VBAR_EL2);</span>
<a name="l00345"></a>00345       <span class="comment">//   break;</span>
<a name="l00346"></a>00346       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98dad1b4a69ba239877df9def4576845dfe5">EL1</a>:
<a name="l00347"></a>00347         vbar = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca4d415fa145a5b12231d0ceeb4c910e32">MISCREG_VBAR_EL1</a>);
<a name="l00348"></a>00348         <span class="keywordflow">break</span>;
<a name="l00349"></a>00349       <span class="keywordflow">default</span>:
<a name="l00350"></a>00350         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid target exception level&quot;</span>);
<a name="l00351"></a>00351         <span class="keywordflow">break</span>;
<a name="l00352"></a>00352     }
<a name="l00353"></a>00353     <span class="keywordflow">return</span> vbar + <a class="code" href="classArmISA_1_1ArmFault.html#aff38b1f82217001cb1471b6445192cfd">offset64</a>();
<a name="l00354"></a>00354 }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919c">MiscRegIndex</a>
<a name="l00357"></a><a class="code" href="classArmISA_1_1ArmFault.html#a7348355e97915a88c09e3492b00f4abe">00357</a> <a class="code" href="classArmISA_1_1ArmFault.html#a7348355e97915a88c09e3492b00f4abe">ArmFault::getSyndromeReg64</a>()<span class="keyword"> const</span>
<a name="l00358"></a>00358 <span class="keyword"></span>{
<a name="l00359"></a>00359     <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>) {
<a name="l00360"></a>00360       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98dad1b4a69ba239877df9def4576845dfe5">EL1</a>:
<a name="l00361"></a>00361         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca9c3fbdad885dc58484a15fbb7efbb88a">MISCREG_ESR_EL1</a>;
<a name="l00362"></a>00362       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98daa4c3712f2de98a3c6557776ed120b2ed">EL2</a>:
<a name="l00363"></a>00363         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca852880390e7b97cca94dd92985898c2b">MISCREG_ESR_EL2</a>;
<a name="l00364"></a>00364       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98da3dcb0a3ebc6bb1438051b3e943ae5325">EL3</a>:
<a name="l00365"></a>00365         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cadfb1a0b52fdcd6e03f8182bd45af4d77">MISCREG_ESR_EL3</a>;
<a name="l00366"></a>00366       <span class="keywordflow">default</span>:
<a name="l00367"></a>00367         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid exception level&quot;</span>);
<a name="l00368"></a>00368         <span class="keywordflow">break</span>;
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 }
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919c">MiscRegIndex</a>
<a name="l00373"></a><a class="code" href="classArmISA_1_1ArmFault.html#aa944d89c650d5e1f53b421b9c7bf037a">00373</a> <a class="code" href="classArmISA_1_1ArmFault.html#aa944d89c650d5e1f53b421b9c7bf037a">ArmFault::getFaultAddrReg64</a>()<span class="keyword"> const</span>
<a name="l00374"></a>00374 <span class="keyword"></span>{
<a name="l00375"></a>00375     <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>) {
<a name="l00376"></a>00376       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98dad1b4a69ba239877df9def4576845dfe5">EL1</a>:
<a name="l00377"></a>00377         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6e1c29f8f88c8befb0737028c053d3c4">MISCREG_FAR_EL1</a>;
<a name="l00378"></a>00378       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98daa4c3712f2de98a3c6557776ed120b2ed">EL2</a>:
<a name="l00379"></a>00379         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919caa29f08635f388d3c388635bd77940829">MISCREG_FAR_EL2</a>;
<a name="l00380"></a>00380       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98da3dcb0a3ebc6bb1438051b3e943ae5325">EL3</a>:
<a name="l00381"></a>00381         <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca947307fca8bc903a3786a606758e4a41">MISCREG_FAR_EL3</a>;
<a name="l00382"></a>00382       <span class="keywordflow">default</span>:
<a name="l00383"></a>00383         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid exception level&quot;</span>);
<a name="l00384"></a>00384         <span class="keywordflow">break</span>;
<a name="l00385"></a>00385     }
<a name="l00386"></a>00386 }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388 <span class="keywordtype">void</span>
<a name="l00389"></a><a class="code" href="classArmISA_1_1ArmFault.html#aa34b66d795b0b6467b7138d5818bc347">00389</a> <a class="code" href="classArmISA_1_1ArmFault.html#aa34b66d795b0b6467b7138d5818bc347">ArmFault::setSyndrome</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919c">MiscRegIndex</a> syndrome_reg)
<a name="l00390"></a>00390 {
<a name="l00391"></a>00391     uint32_t value;
<a name="l00392"></a>00392     uint32_t exc_class = (uint32_t) <a class="code" href="classArmISA_1_1ArmFault.html#ad0027240bc70da565755a65a19044cbf">ec</a>(tc);
<a name="l00393"></a>00393     uint32_t issVal = <a class="code" href="classArmISA_1_1ArmFault.html#af9738c784531315bb4ba685487e3104f">iss</a>();
<a name="l00394"></a>00394     assert(!<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> || <a class="code" href="classArmSystem.html#a72878f01ee57214d9f61ab22dfd56f71" title="Returns true if the register width of the highest implemented exception level is...">ArmSystem::highestELIs64</a>(tc));
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     value = exc_class &lt;&lt; 26;
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="comment">// HSR.IL not valid for Prefetch Aborts (0x20, 0x21) and Data Aborts (0x24,</span>
<a name="l00399"></a>00399     <span class="comment">// 0x25) for which the ISS information is not valid (ARMv7).</span>
<a name="l00400"></a>00400     <span class="comment">// @todo: ARMv8 revises AArch32 functionality: when HSR.IL is not</span>
<a name="l00401"></a>00401     <span class="comment">// valid it is treated as RES1.</span>
<a name="l00402"></a>00402     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#af80763dbb287cc2cca0d08abfccfb33f">to64</a>) {
<a name="l00403"></a>00403         value |= 1 &lt;&lt; 25;
<a name="l00404"></a>00404     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(exc_class, 5, 3) != 4) ||
<a name="l00405"></a>00405                (<a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(exc_class, 2) &amp;&amp; <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(issVal, 24))) {
<a name="l00406"></a>00406         <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>.thumb || <a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>.bigThumb)
<a name="l00407"></a>00407             value |= 1 &lt;&lt; 25;
<a name="l00408"></a>00408     }
<a name="l00409"></a>00409     <span class="comment">// Condition code valid for EC[5:4] nonzero</span>
<a name="l00410"></a>00410     <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> &amp;&amp; ((<a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(exc_class, 5, 4) == 0) &amp;&amp;
<a name="l00411"></a>00411                     (<a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(exc_class, 3, 0) != 0))) {
<a name="l00412"></a>00412         <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>.thumb) {
<a name="l00413"></a>00413             uint32_t      <a class="code" href="namespaceArmISA.html#a997e13ea56e791849c1c12d7d5369798">cond</a>;
<a name="l00414"></a>00414             <a class="code" href="namespaceArmISA.html#a579034b38a29d99f94233b886eaeca64">ConditionCode</a> <a class="code" href="namespaceArmISA.html#a148177ccc2986c83dd4a609b6f384d07">condCode</a> = (<a class="code" href="namespaceArmISA.html#a579034b38a29d99f94233b886eaeca64">ConditionCode</a>) (uint32_t) <a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>.condCode;
<a name="l00415"></a>00415             <span class="comment">// If its on unconditional instruction report with a cond code of</span>
<a name="l00416"></a>00416             <span class="comment">// 0xE, ie the unconditional code</span>
<a name="l00417"></a>00417             cond  = (condCode == <a class="code" href="namespaceArmISA.html#a579034b38a29d99f94233b886eaeca64aa70d927da179eb57d3aadf6ecc27898e">COND_UC</a>) ? <a class="code" href="namespaceArmISA.html#a579034b38a29d99f94233b886eaeca64a8c3cd729ab103fd9af09c79c1cd3df7d">COND_AL</a> : condCode;
<a name="l00418"></a>00418             value |= cond &lt;&lt; 20;
<a name="l00419"></a>00419             value |= 1    &lt;&lt; 24;
<a name="l00420"></a>00420         }
<a name="l00421"></a>00421         value |= <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(issVal, 19, 0);
<a name="l00422"></a>00422     } <span class="keywordflow">else</span> {
<a name="l00423"></a>00423         value |= issVal;
<a name="l00424"></a>00424     }
<a name="l00425"></a>00425     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(syndrome_reg, value);
<a name="l00426"></a>00426 }
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 <span class="keywordtype">void</span>
<a name="l00429"></a><a class="code" href="classArmISA_1_1ArmFault.html#aedfa46408d4f937b30f8c0790b78000e">00429</a> <a class="code" href="classArmISA_1_1ArmFault.html#aedfa46408d4f937b30f8c0790b78000e">ArmFault::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00430"></a>00430 {
<a name="l00431"></a>00431     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#a72878f01ee57214d9f61ab22dfd56f71" title="Returns true if the register width of the highest implemented exception level is...">ArmSystem::highestELIs64</a>(tc)) {  <span class="comment">// ARMv8</span>
<a name="l00434"></a>00434         <span class="comment">// Determine source exception level and mode</span>
<a name="l00435"></a>00435         <a class="code" href="classArmISA_1_1ArmFault.html#a610a884fdab6b598325d5d47577179aa">fromMode</a> = (<a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990ca">OperatingMode</a>) (uint8_t) cpsr.mode;
<a name="l00436"></a>00436         <a class="code" href="classArmISA_1_1ArmFault.html#a9532efc42629f82a9a46f93455b4c3e9">fromEL</a> = <a class="code" href="namespaceArmISA.html#a39510b1c2b9a3bc190a62447a036237e">opModeToEL</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a610a884fdab6b598325d5d47577179aa">fromMode</a>);
<a name="l00437"></a>00437         <span class="keywordflow">if</span> (opModeIs64(<a class="code" href="classArmISA_1_1ArmFault.html#a610a884fdab6b598325d5d47577179aa">fromMode</a>))
<a name="l00438"></a>00438             <a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> = <span class="keyword">true</span>;
<a name="l00439"></a>00439 
<a name="l00440"></a>00440         <span class="comment">// Determine target exception level</span>
<a name="l00441"></a>00441         <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc) &amp;&amp; <a class="code" href="classArmISA_1_1ArmFault.html#a206b064a966a10aa0aee29eeac7a697a">routeToMonitor</a>(tc))
<a name="l00442"></a>00442             <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> = <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98da3dcb0a3ebc6bb1438051b3e943ae5325">EL3</a>;
<a name="l00443"></a>00443         <span class="keywordflow">else</span>
<a name="l00444"></a>00444             <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> = <a class="code" href="namespaceArmISA.html#a39510b1c2b9a3bc190a62447a036237e">opModeToEL</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a5c92c282cacbf2692b892b350531ff93">nextMode</a>());
<a name="l00445"></a>00445         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9532efc42629f82a9a46f93455b4c3e9">fromEL</a> &gt; <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>)
<a name="l00446"></a>00446             <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> = <a class="code" href="classArmISA_1_1ArmFault.html#a9532efc42629f82a9a46f93455b4c3e9">fromEL</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> == <a class="code" href="classArmSystem.html#a9c440bbdcae9f357c2b98eb084e62e52" title="Returns the highest implemented exception level.">ArmSystem::highestEL</a>(tc) || <a class="code" href="namespaceArmISA.html#af131e4106f967b76540fcbdd084da71b">ELIs64</a>(tc, <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>)) {
<a name="l00449"></a>00449             <span class="comment">// Invoke exception handler in AArch64 state</span>
<a name="l00450"></a>00450             <a class="code" href="classArmISA_1_1ArmFault.html#af80763dbb287cc2cca0d08abfccfb33f">to64</a> = <span class="keyword">true</span>;
<a name="l00451"></a>00451             <a class="code" href="classArmISA_1_1ArmFault.html#aaabf670f894ee26c5a0b7a07863f30d6">invoke64</a>(tc, inst);
<a name="l00452"></a>00452             <span class="keywordflow">return</span>;
<a name="l00453"></a>00453         }
<a name="l00454"></a>00454     }
<a name="l00455"></a>00455 
<a name="l00456"></a>00456     <span class="comment">// ARMv7 (ARM ARM issue C B1.9)</span>
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     <span class="keywordtype">bool</span> have_security       = <a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc);
<a name="l00459"></a>00459     <span class="keywordtype">bool</span> have_virtualization = <a class="code" href="classArmSystem.html#a56fe69900ac88701fdec086573b2be18" title="Returns true if this system implements the virtualization Extensions.">ArmSystem::haveVirtualization</a>(tc);
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <a class="code" href="classArmISA_1_1ArmFault.html#aedfa46408d4f937b30f8c0790b78000e">FaultBase::invoke</a>(tc);
<a name="l00462"></a>00462     <span class="keywordflow">if</span> (!<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>)
<a name="l00463"></a>00463         <span class="keywordflow">return</span>;
<a name="l00464"></a>00464     <a class="code" href="classArmISA_1_1ArmFault.html#ac06bae1106a3a3a9a27f8a340b32685b">countStat</a>()++;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     SCTLR sctlr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca540af25d1d321d1891bf4d9292c227c1">MISCREG_SCTLR</a>);
<a name="l00467"></a>00467     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l00468"></a>00468     CPSR saved_cpsr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00469"></a>00469     saved_cpsr.nz = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a6caf2afe46c16a29dcbdc5718ae95463">CCREG_NZ</a>);
<a name="l00470"></a>00470     saved_cpsr.c = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375af4aad7c6308575281c1a92a5a7ae3504">CCREG_C</a>);
<a name="l00471"></a>00471     saved_cpsr.v = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a06d5ab8df8dab970d45cfe16408262bc">CCREG_V</a>);
<a name="l00472"></a>00472     saved_cpsr.ge = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a7f9d4587271dd31f76e51d2ae56fb317">CCREG_GE</a>);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> curPc <a class="code" href="namespaceArmISA.html#a7bca404a37e7db0156c4b14dad12c18f">M5_VAR_USED</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>().pc();
<a name="l00475"></a>00475     ITSTATE it = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>().itstate();
<a name="l00476"></a>00476     saved_cpsr.it2 = it.top6;
<a name="l00477"></a>00477     saved_cpsr.it1 = it.bottom2;
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     <span class="comment">// if we have a valid instruction then use it to annotate this fault with</span>
<a name="l00480"></a>00480     <span class="comment">// extra information. This is used to generate the correct fault syndrome</span>
<a name="l00481"></a>00481     <span class="comment">// information</span>
<a name="l00482"></a>00482     <span class="keywordflow">if</span> (inst) {
<a name="l00483"></a>00483         <a class="code" href="classArmISA_1_1ArmStaticInst.html">ArmStaticInst</a> *armInst = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classArmISA_1_1ArmStaticInst.html">ArmStaticInst</a> *<span class="keyword">&gt;</span>(inst.<a class="code" href="classRefCountingPtr.html#aa785d647c815cf333fa80d79a5a558c9" title="Directly access the pointer itself without taking a reference.">get</a>());
<a name="l00484"></a>00484         armInst-&gt;<a class="code" href="classArmISA_1_1ArmStaticInst.html#a6be8bd653539bbcc6a2bff4c0c2ed4a1">annotateFault</a>(<span class="keyword">this</span>);
<a name="l00485"></a>00485     }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487     <span class="keywordflow">if</span> (have_security &amp;&amp; <a class="code" href="classArmISA_1_1ArmFault.html#a206b064a966a10aa0aee29eeac7a697a">routeToMonitor</a>(tc))
<a name="l00488"></a>00488         cpsr.mode = <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>;
<a name="l00489"></a>00489     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (have_virtualization &amp;&amp; <a class="code" href="classArmISA_1_1ArmFault.html#a9ba9b925536a3e18253365f20304abb3">routeToHyp</a>(tc))
<a name="l00490"></a>00490         cpsr.mode = <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>;
<a name="l00491"></a>00491     <span class="keywordflow">else</span>
<a name="l00492"></a>00492         cpsr.mode = <a class="code" href="classArmISA_1_1ArmFault.html#a5c92c282cacbf2692b892b350531ff93">nextMode</a>();
<a name="l00493"></a>00493 
<a name="l00494"></a>00494     <span class="comment">// Ensure Secure state if initially in Monitor mode</span>
<a name="l00495"></a>00495     <span class="keywordflow">if</span> (have_security &amp;&amp; saved_cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>) {
<a name="l00496"></a>00496         SCR scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l00497"></a>00497         <span class="keywordflow">if</span> (scr.ns) {
<a name="l00498"></a>00498             scr.ns = 0;
<a name="l00499"></a>00499             tc-&gt;<a class="code" href="classThreadContext.html#a50d110467c213c1caec6ff304fc44521">setMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>, scr);
<a name="l00500"></a>00500         }
<a name="l00501"></a>00501     }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     <span class="comment">// some bits are set differently if we have been routed to hyp mode</span>
<a name="l00504"></a>00504     <span class="keywordflow">if</span> (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l00505"></a>00505         SCTLR hsctlr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca5a527cd4f6298497a08d3a0b3ecc9e99">MISCREG_HSCTLR</a>);
<a name="l00506"></a>00506         cpsr.t = hsctlr.te;
<a name="l00507"></a>00507         cpsr.e = hsctlr.ee;
<a name="l00508"></a>00508         <span class="keywordflow">if</span> (!scr.ea)  {cpsr.a = 1;}
<a name="l00509"></a>00509         <span class="keywordflow">if</span> (!scr.fiq) {cpsr.f = 1;}
<a name="l00510"></a>00510         <span class="keywordflow">if</span> (!scr.irq) {cpsr.i = 1;}
<a name="l00511"></a>00511     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>) {
<a name="l00512"></a>00512         <span class="comment">// Special case handling when entering monitor mode</span>
<a name="l00513"></a>00513         cpsr.t = sctlr.te;
<a name="l00514"></a>00514         cpsr.e = sctlr.ee;
<a name="l00515"></a>00515         cpsr.a = 1;
<a name="l00516"></a>00516         cpsr.f = 1;
<a name="l00517"></a>00517         cpsr.i = 1;
<a name="l00518"></a>00518     } <span class="keywordflow">else</span> {
<a name="l00519"></a>00519         cpsr.t = sctlr.te;
<a name="l00520"></a>00520         cpsr.e = sctlr.ee;
<a name="l00521"></a>00521 
<a name="l00522"></a>00522         <span class="comment">// The *Disable functions are virtual and different per fault</span>
<a name="l00523"></a>00523         cpsr.a = cpsr.a | <a class="code" href="classArmISA_1_1ArmFault.html#af93cd55d748befdaeb905971df3955e9">abortDisable</a>(tc);
<a name="l00524"></a>00524         cpsr.f = cpsr.f | <a class="code" href="classArmISA_1_1ArmFault.html#a74bd6067d3369fd3d8da50e53458bdc2">fiqDisable</a>(tc);
<a name="l00525"></a>00525         cpsr.i = 1;
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     cpsr.it1 = cpsr.it2 = 0;
<a name="l00528"></a>00528     cpsr.j = 0;
<a name="l00529"></a>00529     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>, cpsr);
<a name="l00530"></a>00530 
<a name="l00531"></a>00531     <span class="comment">// Make sure mailbox sets to one always</span>
<a name="l00532"></a>00532     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca309489dd7ba7778d15ee0407215a20a4">MISCREG_SEV_MAILBOX</a>, 1);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534     <span class="comment">// Clear the exclusive monitor</span>
<a name="l00535"></a>00535     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca523823ba497da588d45310898fe14b52">MISCREG_LOCKFLAG</a>, 0);
<a name="l00536"></a>00536 
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l00538"></a>00538         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca2b9c16e2c454c387c4c34f4e185c55f2">MISCREG_ELR_HYP</a>, curPc +
<a name="l00539"></a>00539                 (saved_cpsr.t ? <a class="code" href="classArmISA_1_1ArmFault.html#aac24a5a6fd01719b8832b2f7b4bf5e0a">thumbPcOffset</a>(<span class="keyword">true</span>)  : <a class="code" href="classArmISA_1_1ArmFault.html#a909d9c1c5114f5123a446927920e9dfd">armPcOffset</a>(<span class="keyword">true</span>)));
<a name="l00540"></a>00540     } <span class="keywordflow">else</span> {
<a name="l00541"></a>00541         tc-&gt;<a class="code" href="classThreadContext.html#ad008e016fd7ac09d11a85a80aa917b41">setIntReg</a>(<a class="code" href="namespaceArmISA.html#a28f9c55fc1ae496fd36bca4b09be4a5fa39bbaff29cdc1f5ae5f3779c85c0630b">INTREG_LR</a>, curPc +
<a name="l00542"></a>00542                 (saved_cpsr.t ? <a class="code" href="classArmISA_1_1ArmFault.html#aac24a5a6fd01719b8832b2f7b4bf5e0a">thumbPcOffset</a>(<span class="keyword">false</span>) : <a class="code" href="classArmISA_1_1ArmFault.html#a909d9c1c5114f5123a446927920e9dfd">armPcOffset</a>(<span class="keyword">false</span>)));
<a name="l00543"></a>00543     }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545     <span class="keywordflow">switch</span> (cpsr.mode) {
<a name="l00546"></a>00546       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa86013c5c3682ecc03deaf42c249be495">MODE_FIQ</a>:
<a name="l00547"></a>00547         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad3cdb1317a25175044b454f01a85e080">MISCREG_SPSR_FIQ</a>, saved_cpsr);
<a name="l00548"></a>00548         <span class="keywordflow">break</span>;
<a name="l00549"></a>00549       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa8b093879d9c3d3c53b43dc742fefb20d">MODE_IRQ</a>:
<a name="l00550"></a>00550         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca5882c3c544025702f76f0045efa5ec31">MISCREG_SPSR_IRQ</a>, saved_cpsr);
<a name="l00551"></a>00551         <span class="keywordflow">break</span>;
<a name="l00552"></a>00552       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa3662f11aa86d9652a2b2f1db80d33525">MODE_SVC</a>:
<a name="l00553"></a>00553         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cade4b60cfb1d5a208ea54f119692adc2a">MISCREG_SPSR_SVC</a>, saved_cpsr);
<a name="l00554"></a>00554         <span class="keywordflow">break</span>;
<a name="l00555"></a>00555       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caaedd810eb5d1b0c2632821f8b7abc0fe0">MODE_MON</a>:
<a name="l00556"></a>00556         assert(have_security);
<a name="l00557"></a>00557         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca523fc954142987a41e0ce0f88662fa0a">MISCREG_SPSR_MON</a>, saved_cpsr);
<a name="l00558"></a>00558         <span class="keywordflow">break</span>;
<a name="l00559"></a>00559       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa30dcc6cd75f082e88b37560c616eb085">MODE_ABORT</a>:
<a name="l00560"></a>00560         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca7ac1b2166841b17fab9db5286276a3fe">MISCREG_SPSR_ABT</a>, saved_cpsr);
<a name="l00561"></a>00561         <span class="keywordflow">break</span>;
<a name="l00562"></a>00562       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa10cc39a52b92ebf858ea22641d4b8f67">MODE_UNDEFINED</a>:
<a name="l00563"></a>00563         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca0cddb533c7dccbe89da87203c21f5cc7">MISCREG_SPSR_UND</a>, saved_cpsr);
<a name="l00564"></a>00564         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ad0027240bc70da565755a65a19044cbf">ec</a>(tc) != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baff6f23bdc4017d09e11399e5068b1b4b">EC_UNKNOWN</a>)
<a name="l00565"></a>00565             <a class="code" href="classArmISA_1_1ArmFault.html#aa34b66d795b0b6467b7138d5818bc347">setSyndrome</a>(tc, <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919caed4f4a6f8aae9686c22ae8d180f40ab8">MISCREG_HSR</a>);
<a name="l00566"></a>00566         <span class="keywordflow">break</span>;
<a name="l00567"></a>00567       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>:
<a name="l00568"></a>00568         assert(have_virtualization);
<a name="l00569"></a>00569         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad22e1e056516ed04bc079c3a3237878f">MISCREG_SPSR_HYP</a>, saved_cpsr);
<a name="l00570"></a>00570         <a class="code" href="classArmISA_1_1ArmFault.html#aa34b66d795b0b6467b7138d5818bc347">setSyndrome</a>(tc, <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919caed4f4a6f8aae9686c22ae8d180f40ab8">MISCREG_HSR</a>);
<a name="l00571"></a>00571         <span class="keywordflow">break</span>;
<a name="l00572"></a>00572       <span class="keywordflow">default</span>:
<a name="l00573"></a>00573         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;unknown Mode\n&quot;</span>);
<a name="l00574"></a>00574     }
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> newPc = <a class="code" href="classArmISA_1_1ArmFault.html#a881164d3e4888fa066b6beee21b94bfa">getVector</a>(tc);
<a name="l00577"></a>00577     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Invoking Fault:%s cpsr:%#x PC:%#x lr:%#x newVec: %#x\n&quot;</span>,
<a name="l00578"></a>00578             <a class="code" href="classFaultBase.html#a70d24f6fcbc429e1b3941e84a754c38e">name</a>(), cpsr, curPc, tc-&gt;<a class="code" href="classThreadContext.html#a328471149b318afecfe5b52d9696bfdc">readIntReg</a>(<a class="code" href="namespaceArmISA.html#a28f9c55fc1ae496fd36bca4b09be4a5fa39bbaff29cdc1f5ae5f3779c85c0630b">INTREG_LR</a>), newPc);
<a name="l00579"></a>00579     <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a>(newPc);
<a name="l00580"></a>00580     pc.thumb(cpsr.t);
<a name="l00581"></a>00581     pc.nextThumb(pc.thumb());
<a name="l00582"></a>00582     pc.jazelle(cpsr.j);
<a name="l00583"></a>00583     pc.nextJazelle(pc.jazelle());
<a name="l00584"></a>00584     pc.aarch64(!cpsr.width);
<a name="l00585"></a>00585     pc.nextAArch64(!cpsr.width);
<a name="l00586"></a>00586     tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(pc);
<a name="l00587"></a>00587 }
<a name="l00588"></a>00588 
<a name="l00589"></a>00589 <span class="keywordtype">void</span>
<a name="l00590"></a><a class="code" href="classArmISA_1_1ArmFault.html#aaabf670f894ee26c5a0b7a07863f30d6">00590</a> <a class="code" href="classArmISA_1_1ArmFault.html#aaabf670f894ee26c5a0b7a07863f30d6">ArmFault::invoke64</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00591"></a>00591 {
<a name="l00592"></a>00592     <span class="comment">// Determine actual misc. register indices for ELR_ELx and SPSR_ELx</span>
<a name="l00593"></a>00593     <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919c">MiscRegIndex</a> elr_idx, spsr_idx;
<a name="l00594"></a>00594     <span class="keywordflow">switch</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>) {
<a name="l00595"></a>00595       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98dad1b4a69ba239877df9def4576845dfe5">EL1</a>:
<a name="l00596"></a>00596         elr_idx = <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca23432fcb06b63bbbdf0f10bae2d73748">MISCREG_ELR_EL1</a>;
<a name="l00597"></a>00597         spsr_idx = <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cabf77dd155ddd1020a03a9f11e2c44803">MISCREG_SPSR_EL1</a>;
<a name="l00598"></a>00598         <span class="keywordflow">break</span>;
<a name="l00599"></a>00599       <span class="comment">// @todo: uncomment this to enable Virtualization</span>
<a name="l00600"></a>00600       <span class="comment">// case EL2:</span>
<a name="l00601"></a>00601       <span class="comment">//   assert(ArmSystem::haveVirtualization());</span>
<a name="l00602"></a>00602       <span class="comment">//   elr_idx = MISCREG_ELR_EL2;</span>
<a name="l00603"></a>00603       <span class="comment">//   spsr_idx = MISCREG_SPSR_EL2;</span>
<a name="l00604"></a>00604       <span class="comment">//   break;</span>
<a name="l00605"></a>00605       <span class="keywordflow">case</span> <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98da3dcb0a3ebc6bb1438051b3e943ae5325">EL3</a>:
<a name="l00606"></a>00606         assert(<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc));
<a name="l00607"></a>00607         elr_idx = <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca50b87b4279dc2c1133ed81214b2f482f">MISCREG_ELR_EL3</a>;
<a name="l00608"></a>00608         spsr_idx = <a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca896e0f9942a14136d8bac636196fbc26">MISCREG_SPSR_EL3</a>;
<a name="l00609"></a>00609         <span class="keywordflow">break</span>;
<a name="l00610"></a>00610       <span class="keywordflow">default</span>:
<a name="l00611"></a>00611         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid target exception level&quot;</span>);
<a name="l00612"></a>00612         <span class="keywordflow">break</span>;
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614 
<a name="l00615"></a>00615     <span class="comment">// Save process state into SPSR_ELx</span>
<a name="l00616"></a>00616     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00617"></a>00617     CPSR spsr = cpsr;
<a name="l00618"></a>00618     spsr.nz = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a6caf2afe46c16a29dcbdc5718ae95463">CCREG_NZ</a>);
<a name="l00619"></a>00619     spsr.c = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375af4aad7c6308575281c1a92a5a7ae3504">CCREG_C</a>);
<a name="l00620"></a>00620     spsr.v = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a06d5ab8df8dab970d45cfe16408262bc">CCREG_V</a>);
<a name="l00621"></a>00621     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>) {
<a name="l00622"></a>00622         <span class="comment">// Force some bitfields to 0</span>
<a name="l00623"></a>00623         spsr.q = 0;
<a name="l00624"></a>00624         spsr.it1 = 0;
<a name="l00625"></a>00625         spsr.j = 0;
<a name="l00626"></a>00626         spsr.res0_23_22 = 0;
<a name="l00627"></a>00627         spsr.ge = 0;
<a name="l00628"></a>00628         spsr.it2 = 0;
<a name="l00629"></a>00629         spsr.t = 0;
<a name="l00630"></a>00630     } <span class="keywordflow">else</span> {
<a name="l00631"></a>00631         spsr.ge = tc-&gt;<a class="code" href="classThreadContext.html#a0ad679d4a176414793e81b6f7b5ce575">readCCReg</a>(<a class="code" href="namespaceArmISA.html#afbab0e7d68feea024ad3248f7ad74375a7f9d4587271dd31f76e51d2ae56fb317">CCREG_GE</a>);
<a name="l00632"></a>00632         ITSTATE it = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>().itstate();
<a name="l00633"></a>00633         spsr.it2 = it.top6;
<a name="l00634"></a>00634         spsr.it1 = it.bottom2;
<a name="l00635"></a>00635         <span class="comment">// Force some bitfields to 0</span>
<a name="l00636"></a>00636         spsr.res0_23_22 = 0;
<a name="l00637"></a>00637         spsr.ss = 0;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(spsr_idx, spsr);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="comment">// Save preferred return address into ELR_ELx</span>
<a name="l00642"></a>00642     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> curr_pc = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>().pc();
<a name="l00643"></a>00643     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> ret_addr = curr_pc;
<a name="l00644"></a>00644     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l00645"></a>00645         ret_addr += <a class="code" href="classArmISA_1_1ArmFault.html#a710c055f8e902e52d0f841a817215787">armPcElrOffset</a>();
<a name="l00646"></a>00646     <span class="keywordflow">else</span>
<a name="l00647"></a>00647         ret_addr += spsr.t ? <a class="code" href="classArmISA_1_1ArmFault.html#a07208c17e7c922df51ad4a313921a34c">thumbPcElrOffset</a>() : <a class="code" href="classArmISA_1_1ArmFault.html#a710c055f8e902e52d0f841a817215787">armPcElrOffset</a>();
<a name="l00648"></a>00648     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(elr_idx, ret_addr);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="comment">// Update process state</span>
<a name="l00651"></a>00651     OperatingMode64 <a class="code" href="namespaceArmISA.html#aab42c0db74065d35a4e8809e56f72f97">mode</a> = 0;
<a name="l00652"></a>00652     mode.spX = 1;
<a name="l00653"></a>00653     mode.el = <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>;
<a name="l00654"></a>00654     mode.width = 0;
<a name="l00655"></a>00655     cpsr.mode = mode;
<a name="l00656"></a>00656     cpsr.daif = 0xf;
<a name="l00657"></a>00657     cpsr.il = 0;
<a name="l00658"></a>00658     cpsr.ss = 0;
<a name="l00659"></a>00659     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>, cpsr);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661     <span class="comment">// Set PC to start of exception handler</span>
<a name="l00662"></a>00662     <a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> new_pc = <a class="code" href="namespaceArmISA.html#a17830702f2a3c01ca77252e146d45bba" title="Removes the tag from tagged addresses if that mode is enabled.">purifyTaggedAddr</a>(<a class="code" href="classArmISA_1_1ArmFault.html#aa76a02fe201f9449151eb7411741f1df">getVector64</a>(tc), tc, <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a>);
<a name="l00663"></a>00663     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Invoking Fault (AArch64 target EL):%s cpsr:%#x PC:%#x &quot;</span>
<a name="l00664"></a>00664             <span class="stringliteral">&quot;elr:%#x newVec: %#x\n&quot;</span>, <a class="code" href="classFaultBase.html#a70d24f6fcbc429e1b3941e84a754c38e">name</a>(), cpsr, curr_pc, ret_addr, new_pc);
<a name="l00665"></a>00665     <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a>(new_pc);
<a name="l00666"></a>00666     pc.aarch64(!cpsr.width);
<a name="l00667"></a>00667     pc.nextAArch64(!cpsr.width);
<a name="l00668"></a>00668     tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(pc);
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     <span class="comment">// If we have a valid instruction then use it to annotate this fault with</span>
<a name="l00671"></a>00671     <span class="comment">// extra information. This is used to generate the correct fault syndrome</span>
<a name="l00672"></a>00672     <span class="comment">// information</span>
<a name="l00673"></a>00673     <span class="keywordflow">if</span> (inst)
<a name="l00674"></a>00674         <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classArmISA_1_1ArmStaticInst.html">ArmStaticInst</a> *<span class="keyword">&gt;</span>(inst.<a class="code" href="classRefCountingPtr.html#aa785d647c815cf333fa80d79a5a558c9" title="Directly access the pointer itself without taking a reference.">get</a>())-&gt;annotateFault(<span class="keyword">this</span>);
<a name="l00675"></a>00675     <span class="comment">// Save exception syndrome</span>
<a name="l00676"></a>00676     <span class="keywordflow">if</span> ((<a class="code" href="classArmISA_1_1ArmFault.html#a5c92c282cacbf2692b892b350531ff93">nextMode</a>() != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa8b093879d9c3d3c53b43dc742fefb20d">MODE_IRQ</a>) &amp;&amp; (<a class="code" href="classArmISA_1_1ArmFault.html#a5c92c282cacbf2692b892b350531ff93">nextMode</a>() != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caa86013c5c3682ecc03deaf42c249be495">MODE_FIQ</a>))
<a name="l00677"></a>00677         <a class="code" href="classArmISA_1_1ArmFault.html#aa34b66d795b0b6467b7138d5818bc347">setSyndrome</a>(tc, <a class="code" href="classArmISA_1_1ArmFault.html#a7348355e97915a88c09e3492b00f4abe">getSyndromeReg64</a>());
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680 <span class="keywordtype">void</span>
<a name="l00681"></a><a class="code" href="classArmISA_1_1Reset.html#a283289de502251c9fce65545180fcb54">00681</a> <a class="code" href="classArmISA_1_1Reset.html#a283289de502251c9fce65545180fcb54">Reset::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00682"></a>00682 {
<a name="l00683"></a>00683     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00684"></a>00684         tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;clearInterrupts();
<a name="l00685"></a>00685         tc-&gt;<a class="code" href="classThreadContext.html#a36c8d3323b3e201ca43289e261e5d6ce">clearArchRegs</a>();
<a name="l00686"></a>00686     }
<a name="l00687"></a>00687     <span class="keywordflow">if</span> (!<a class="code" href="classArmSystem.html#a72878f01ee57214d9f61ab22dfd56f71" title="Returns true if the register width of the highest implemented exception level is...">ArmSystem::highestELIs64</a>(tc)) {
<a name="l00688"></a>00688         <a class="code" href="classArmISA_1_1Reset.html#a283289de502251c9fce65545180fcb54">ArmFault::invoke</a>(tc, inst);
<a name="l00689"></a>00689         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cac71e99c4e6f9de9760e1ea474af349d7">MISCREG_VMPIDR</a>,
<a name="l00690"></a>00690                        <a class="code" href="namespaceArmISA.html#ae8ed317b90403e645f829663ecce4173">getMPIDR</a>(dynamic_cast&lt;ArmSystem*&gt;(tc-&gt;<a class="code" href="classThreadContext.html#a119dd28f703f77bafb74788f8110300c">getSystemPtr</a>()), tc));
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         <span class="comment">// Unless we have SMC code to get us there, boot in HYP!</span>
<a name="l00693"></a>00693         <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#a56fe69900ac88701fdec086573b2be18" title="Returns true if this system implements the virtualization Extensions.">ArmSystem::haveVirtualization</a>(tc) &amp;&amp;
<a name="l00694"></a>00694             !<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc)) {
<a name="l00695"></a>00695             CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00696"></a>00696             cpsr.mode = <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>;
<a name="l00697"></a>00697             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>, cpsr);
<a name="l00698"></a>00698         }
<a name="l00699"></a>00699     } <span class="keywordflow">else</span> {
<a name="l00700"></a>00700         <span class="comment">// Advance the PC to the IMPLEMENTATION DEFINED reset value</span>
<a name="l00701"></a>00701         <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a> = <a class="code" href="classArmSystem.html#a876f4bf27c621a73ba755d96e7c2fe88" title="Returns the reset address if the highest implemented exception level is 64 bits (ARMv8)...">ArmSystem::resetAddr64</a>(tc);
<a name="l00702"></a>00702         pc.aarch64(<span class="keyword">true</span>);
<a name="l00703"></a>00703         pc.nextAArch64(<span class="keyword">true</span>);
<a name="l00704"></a>00704         tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(pc);
<a name="l00705"></a>00705     }
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 
<a name="l00708"></a>00708 <span class="keywordtype">void</span>
<a name="l00709"></a><a class="code" href="classArmISA_1_1UndefinedInstruction.html#a0eec6a18a4d38b8e0a313a6fdba0f22c">00709</a> <a class="code" href="classArmISA_1_1UndefinedInstruction.html#a0eec6a18a4d38b8e0a313a6fdba0f22c">UndefinedInstruction::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00710"></a>00710 {
<a name="l00711"></a>00711     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00712"></a>00712         <a class="code" href="classArmISA_1_1UndefinedInstruction.html#a0eec6a18a4d38b8e0a313a6fdba0f22c">ArmFault::invoke</a>(tc, inst);
<a name="l00713"></a>00713         <span class="keywordflow">return</span>;
<a name="l00714"></a>00714     }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716     <span class="comment">// If the mnemonic isn&apos;t defined this has to be an unknown instruction.</span>
<a name="l00717"></a>00717     assert(<a class="code" href="classArmISA_1_1UndefinedInstruction.html#a8607796a74a429fa40c3e61203184efb">unknown</a> || <a class="code" href="classArmISA_1_1UndefinedInstruction.html#aa24d60d807661549c606db9820cb7b5a">mnemonic</a> != NULL);
<a name="l00718"></a>00718     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1UndefinedInstruction.html#a2e2b8610ab2f52fa07c3af71bf135fe5">disabled</a>) {
<a name="l00719"></a>00719         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Attempted to execute disabled instruction &quot;</span>
<a name="l00720"></a>00720                 <span class="stringliteral">&quot;&apos;%s&apos; (inst 0x%08x)&quot;</span>, <a class="code" href="classArmISA_1_1UndefinedInstruction.html#aa24d60d807661549c606db9820cb7b5a">mnemonic</a>, <a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>);
<a name="l00721"></a>00721     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1UndefinedInstruction.html#a8607796a74a429fa40c3e61203184efb">unknown</a>) {
<a name="l00722"></a>00722         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Attempted to execute unknown instruction (inst 0x%08x)&quot;</span>,
<a name="l00723"></a>00723               <a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>);
<a name="l00724"></a>00724     } <span class="keywordflow">else</span> {
<a name="l00725"></a>00725         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Attempted to execute unimplemented instruction &quot;</span>
<a name="l00726"></a>00726                 <span class="stringliteral">&quot;&apos;%s&apos; (inst 0x%08x)&quot;</span>, <a class="code" href="classArmISA_1_1UndefinedInstruction.html#aa24d60d807661549c606db9820cb7b5a">mnemonic</a>, <a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>);
<a name="l00727"></a>00727     }
<a name="l00728"></a>00728 }
<a name="l00729"></a>00729 
<a name="l00730"></a>00730 <span class="keywordtype">bool</span>
<a name="l00731"></a><a class="code" href="classArmISA_1_1UndefinedInstruction.html#aaff0a4c320f230fe1097f1cfe5799573">00731</a> <a class="code" href="classArmISA_1_1UndefinedInstruction.html#aaff0a4c320f230fe1097f1cfe5799573">UndefinedInstruction::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00732"></a>00732 <span class="keyword"></span>{
<a name="l00733"></a>00733     <span class="keywordtype">bool</span> toHyp;
<a name="l00734"></a>00734 
<a name="l00735"></a>00735     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l00736"></a>00736     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l00737"></a>00737     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739     <span class="comment">// if in Hyp mode then stay in Hyp mode</span>
<a name="l00740"></a>00740     toHyp  = scr.ns &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l00741"></a>00741     <span class="comment">// if HCR.TGE is set to 1, take to Hyp mode through Hyp Trap vector</span>
<a name="l00742"></a>00742     toHyp |= !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr) &amp;&amp; hcr.tge &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caad87337169ced79741200c7319ef71811">MODE_USER</a>);
<a name="l00743"></a>00743     <span class="keywordflow">return</span> toHyp;
<a name="l00744"></a>00744 }
<a name="l00745"></a>00745 
<a name="l00746"></a>00746 uint32_t
<a name="l00747"></a><a class="code" href="classArmISA_1_1UndefinedInstruction.html#ac6d85a8849cb91f08d74ef470be4f02d">00747</a> <a class="code" href="classArmISA_1_1UndefinedInstruction.html#ac6d85a8849cb91f08d74ef470be4f02d">UndefinedInstruction::iss</a>()<span class="keyword"> const</span>
<a name="l00748"></a>00748 <span class="keyword"></span>{
<a name="l00749"></a>00749     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1UndefinedInstruction.html#a20c4c04bbed158a74b8f185a425a845f">overrideEc</a> == <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>)
<a name="l00750"></a>00750         <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1ArmFault.html#ad2df1115f52551555691caa354786cdc">issRaw</a>;
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     uint32_t new_iss = 0;
<a name="l00753"></a>00753     uint32_t op0, op1, op2, CRn, CRm, Rt, dir;
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     dir = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 21, 21);
<a name="l00756"></a>00756     op0 = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 20, 19);
<a name="l00757"></a>00757     op1 = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 18, 16);
<a name="l00758"></a>00758     CRn = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 15, 12);
<a name="l00759"></a>00759     CRm = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 11, 8);
<a name="l00760"></a>00760     op2 = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 7, 5);
<a name="l00761"></a>00761     Rt = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 4, 0);
<a name="l00762"></a>00762 
<a name="l00763"></a>00763     new_iss = op0 &lt;&lt; 20 | op2 &lt;&lt; 17 | op1 &lt;&lt; 14 | CRn &lt;&lt; 10 |
<a name="l00764"></a>00764             Rt &lt;&lt; 5 | CRm &lt;&lt; 1 | dir;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766     <span class="keywordflow">return</span> new_iss;
<a name="l00767"></a>00767 }
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 <span class="keywordtype">void</span>
<a name="l00770"></a><a class="code" href="classArmISA_1_1SupervisorCall.html#a27148add4db01546e1296719f848d431">00770</a> <a class="code" href="classArmISA_1_1SupervisorCall.html#a27148add4db01546e1296719f848d431">SupervisorCall::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00771"></a>00771 {
<a name="l00772"></a>00772     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00773"></a>00773         <a class="code" href="classArmISA_1_1SupervisorCall.html#a27148add4db01546e1296719f848d431">ArmFault::invoke</a>(tc, inst);
<a name="l00774"></a>00774         <span class="keywordflow">return</span>;
<a name="l00775"></a>00775     }
<a name="l00776"></a>00776 
<a name="l00777"></a>00777     <span class="comment">// As of now, there isn&apos;t a 32 bit thumb version of this instruction.</span>
<a name="l00778"></a>00778     assert(!<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>.bigThumb);
<a name="l00779"></a>00779     uint32_t callNum;
<a name="l00780"></a>00780     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00781"></a>00781     <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990ca">OperatingMode</a> <a class="code" href="namespaceArmISA.html#aab42c0db74065d35a4e8809e56f72f97">mode</a> = (<a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990ca">OperatingMode</a>)(uint8_t)cpsr.mode;
<a name="l00782"></a>00782     <span class="keywordflow">if</span> (opModeIs64(mode))
<a name="l00783"></a>00783         callNum = tc-&gt;<a class="code" href="classThreadContext.html#a328471149b318afecfe5b52d9696bfdc">readIntReg</a>(<a class="code" href="namespaceArmISA.html#a28f9c55fc1ae496fd36bca4b09be4a5fa70b3a95c291f0c8f60389cff3803725b">INTREG_X8</a>);
<a name="l00784"></a>00784     <span class="keywordflow">else</span>
<a name="l00785"></a>00785         callNum = tc-&gt;<a class="code" href="classThreadContext.html#a328471149b318afecfe5b52d9696bfdc">readIntReg</a>(<a class="code" href="namespaceArmISA.html#a28f9c55fc1ae496fd36bca4b09be4a5fa5e8603adbb320e6674263514671c3517">INTREG_R7</a>);
<a name="l00786"></a>00786     tc-&gt;<a class="code" href="classThreadContext.html#a028e91f5a96b0e0737695d6f171651f0">syscall</a>(callNum);
<a name="l00787"></a>00787 
<a name="l00788"></a>00788     <span class="comment">// Advance the PC since that won&apos;t happen automatically.</span>
<a name="l00789"></a>00789     <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>();
<a name="l00790"></a>00790     assert(inst);
<a name="l00791"></a>00791     inst-&gt;advancePC(pc);
<a name="l00792"></a>00792     tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(pc);
<a name="l00793"></a>00793 }
<a name="l00794"></a>00794 
<a name="l00795"></a>00795 <span class="keywordtype">bool</span>
<a name="l00796"></a><a class="code" href="classArmISA_1_1SupervisorCall.html#a4b66d22e7e11d0108c5f7e30bf198455">00796</a> <a class="code" href="classArmISA_1_1SupervisorCall.html#a4b66d22e7e11d0108c5f7e30bf198455">SupervisorCall::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00797"></a>00797 <span class="keyword"></span>{
<a name="l00798"></a>00798     <span class="keywordtype">bool</span> toHyp;
<a name="l00799"></a>00799 
<a name="l00800"></a>00800     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l00801"></a>00801     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l00802"></a>00802     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00803"></a>00803 
<a name="l00804"></a>00804     <span class="comment">// if in Hyp mode then stay in Hyp mode</span>
<a name="l00805"></a>00805     toHyp  = scr.ns &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l00806"></a>00806     <span class="comment">// if HCR.TGE is set to 1, take to Hyp mode through Hyp Trap vector</span>
<a name="l00807"></a>00807     toHyp |= !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr) &amp;&amp; hcr.tge &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caad87337169ced79741200c7319ef71811">MODE_USER</a>);
<a name="l00808"></a>00808     <span class="keywordflow">return</span> toHyp;
<a name="l00809"></a>00809 }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00812"></a><a class="code" href="classArmISA_1_1SupervisorCall.html#a94c9aaa24ba37dbdfc31a6459654051e">00812</a> <a class="code" href="classArmISA_1_1SupervisorCall.html#a94c9aaa24ba37dbdfc31a6459654051e">SupervisorCall::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00813"></a>00813 <span class="keyword"></span>{
<a name="l00814"></a>00814     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1SupervisorCall.html#afa2bbc1b21daeb867fac6f9ed1d7f717">overrideEc</a> != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>) ? <a class="code" href="classArmISA_1_1SupervisorCall.html#afa2bbc1b21daeb867fac6f9ed1d7f717">overrideEc</a> :
<a name="l00815"></a>00815         (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> ? <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112badd54423ae2ad1e3336a44cc191f67443">EC_SVC_64</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>);
<a name="l00816"></a>00816 }
<a name="l00817"></a>00817 
<a name="l00818"></a>00818 uint32_t
<a name="l00819"></a><a class="code" href="classArmISA_1_1SupervisorCall.html#a4ac480f73eec1c728bab13c982135d3b">00819</a> <a class="code" href="classArmISA_1_1SupervisorCall.html#a4ac480f73eec1c728bab13c982135d3b">SupervisorCall::iss</a>()<span class="keyword"> const</span>
<a name="l00820"></a>00820 <span class="keyword"></span>{
<a name="l00821"></a>00821     <span class="comment">// Even if we have a 24 bit imm from an arm32 instruction then we only use</span>
<a name="l00822"></a>00822     <span class="comment">// the bottom 16 bits for the ISS value (it doesn&apos;t hurt for AArch64 SVC).</span>
<a name="l00823"></a>00823     <span class="keywordflow">return</span> <a class="code" href="classArmISA_1_1ArmFault.html#ad2df1115f52551555691caa354786cdc">issRaw</a> &amp; 0xFFFF;
<a name="l00824"></a>00824 }
<a name="l00825"></a>00825 
<a name="l00826"></a>00826 uint32_t
<a name="l00827"></a><a class="code" href="classArmISA_1_1SecureMonitorCall.html#a3d45db8ba447a4857cb495216ee735bd">00827</a> <a class="code" href="classArmISA_1_1SecureMonitorCall.html#a3d45db8ba447a4857cb495216ee735bd">SecureMonitorCall::iss</a>()<span class="keyword"> const</span>
<a name="l00828"></a>00828 <span class="keyword"></span>{
<a name="l00829"></a>00829     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l00830"></a>00830         <span class="keywordflow">return</span> <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1ArmFault.html#a31173096037780ca523498b4673c3cd1">machInst</a>, 20, 5);
<a name="l00831"></a>00831     <span class="keywordflow">return</span> 0;
<a name="l00832"></a>00832 }
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00835"></a><a class="code" href="classArmISA_1_1UndefinedInstruction.html#a50854160053ff598b659f9401ef2565b">00835</a> <a class="code" href="classArmISA_1_1UndefinedInstruction.html#a50854160053ff598b659f9401ef2565b">UndefinedInstruction::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00836"></a>00836 <span class="keyword"></span>{
<a name="l00837"></a>00837     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1UndefinedInstruction.html#a20c4c04bbed158a74b8f185a425a845f">overrideEc</a> != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>) ? <a class="code" href="classArmISA_1_1UndefinedInstruction.html#a20c4c04bbed158a74b8f185a425a845f">overrideEc</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>;
<a name="l00838"></a>00838 }
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 
<a name="l00841"></a><a class="code" href="classArmISA_1_1HypervisorCall.html#a8aec0ff22245d1eb7ff214e8fd85a989">00841</a> <a class="code" href="classArmISA_1_1HypervisorCall.html#a8aec0ff22245d1eb7ff214e8fd85a989">HypervisorCall::HypervisorCall</a>(<a class="code" href="namespaceAlphaISA.html#a513ba22c5f3400527dbe0370286b20ce">ExtMachInst</a> _machInst, uint32_t _imm) :
<a name="l00842"></a>00842         <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals</a>&lt;<a class="code" href="classArmISA_1_1HypervisorCall.html">HypervisorCall</a>&gt;(_machInst, _imm)
<a name="l00843"></a>00843 {}
<a name="l00844"></a>00844 
<a name="l00845"></a>00845 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00846"></a><a class="code" href="classArmISA_1_1HypervisorTrap.html#a80836dc45a7b3a0f400d32963c1b25de">00846</a> <a class="code" href="classArmISA_1_1HypervisorTrap.html#a80836dc45a7b3a0f400d32963c1b25de">HypervisorTrap::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00847"></a>00847 <span class="keyword"></span>{
<a name="l00848"></a>00848     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1HypervisorTrap.html#af7dd6995079c255bbc5e970da122e233">overrideEc</a> != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>) ? <a class="code" href="classArmISA_1_1HypervisorTrap.html#af7dd6995079c255bbc5e970da122e233">overrideEc</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>;
<a name="l00849"></a>00849 }
<a name="l00850"></a>00850 
<a name="l00851"></a>00851 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00852"></a>00852 <a class="code" href="namespaceArmISA.html#a89aa1b34ddfee74fa801f6510aa82d15">FaultOffset</a>
<a name="l00853"></a><a class="code" href="classArmISA_1_1ArmFaultVals.html#addd2cd54ff0712910bae041985c95b89">00853</a> <a class="code" href="classArmISA_1_1ArmFaultVals.html#addd2cd54ff0712910bae041985c95b89">ArmFaultVals&lt;T&gt;::offset</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l00854"></a>00854 {
<a name="l00855"></a>00855     <span class="keywordtype">bool</span> isHypTrap = <span class="keyword">false</span>;
<a name="l00856"></a>00856 
<a name="l00857"></a>00857     <span class="comment">// Normally we just use the exception vector from the table at the top if</span>
<a name="l00858"></a>00858     <span class="comment">// this file, however if this exception has caused a transition to hype</span>
<a name="l00859"></a>00859     <span class="comment">// mode, and its an exception type that would only do this if it has been</span>
<a name="l00860"></a>00860     <span class="comment">// trapped then we use the hyp trap vector instead of the normal vector</span>
<a name="l00861"></a>00861     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFaultVals.html#a5aeab8fa75eff3fc0cec0c01a2dea13a">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#aed2f5c99745baa1ba263f209f126672a">hypTrappable</a>) {
<a name="l00862"></a>00862         CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00863"></a>00863         <span class="keywordflow">if</span> (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l00864"></a>00864             CPSR spsr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad22e1e056516ed04bc079c3a3237878f">MISCREG_SPSR_HYP</a>);
<a name="l00865"></a>00865             isHypTrap = spsr.mode != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>;
<a name="l00866"></a>00866         }
<a name="l00867"></a>00867     }
<a name="l00868"></a>00868     <span class="keywordflow">return</span> isHypTrap ? 0x14 : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a5aeab8fa75eff3fc0cec0c01a2dea13a">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#aca35eba05ea8b1e2364ef0338acb9c0f">offset</a>;
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871 <span class="comment">// void</span>
<a name="l00872"></a>00872 <span class="comment">// SupervisorCall::setSyndrome64(ThreadContext *tc, MiscRegIndex esr_idx)</span>
<a name="l00873"></a>00873 <span class="comment">// {</span>
<a name="l00874"></a>00874 <span class="comment">//     ESR esr = 0;</span>
<a name="l00875"></a>00875 <span class="comment">//     esr.ec = machInst.aarch64 ? SvcAArch64 : SvcAArch32;</span>
<a name="l00876"></a>00876 <span class="comment">//     esr.il = !machInst.thumb;</span>
<a name="l00877"></a>00877 <span class="comment">//     if (machInst.aarch64)</span>
<a name="l00878"></a>00878 <span class="comment">//         esr.imm16 = bits(machInst.instBits, 20, 5);</span>
<a name="l00879"></a>00879 <span class="comment">//     else if (machInst.thumb)</span>
<a name="l00880"></a>00880 <span class="comment">//         esr.imm16 = bits(machInst.instBits, 7, 0);</span>
<a name="l00881"></a>00881 <span class="comment">//     else</span>
<a name="l00882"></a>00882 <span class="comment">//         esr.imm16 = bits(machInst.instBits, 15, 0);</span>
<a name="l00883"></a>00883 <span class="comment">//     tc-&gt;setMiscReg(esr_idx, esr);</span>
<a name="l00884"></a>00884 <span class="comment">// }</span>
<a name="l00885"></a>00885 
<a name="l00886"></a>00886 <span class="keywordtype">void</span>
<a name="l00887"></a><a class="code" href="classArmISA_1_1SecureMonitorCall.html#ac7b0453a28760aefda7096a21fba1a82">00887</a> <a class="code" href="classArmISA_1_1SecureMonitorCall.html#ac7b0453a28760aefda7096a21fba1a82">SecureMonitorCall::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00888"></a>00888 {
<a name="l00889"></a>00889     <span class="keywordflow">if</span> (<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>) {
<a name="l00890"></a>00890         <a class="code" href="classArmISA_1_1SecureMonitorCall.html#ac7b0453a28760aefda7096a21fba1a82">ArmFault::invoke</a>(tc, inst);
<a name="l00891"></a>00891         <span class="keywordflow">return</span>;
<a name="l00892"></a>00892     }
<a name="l00893"></a>00893 }
<a name="l00894"></a>00894 
<a name="l00895"></a>00895 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00896"></a><a class="code" href="classArmISA_1_1SecureMonitorCall.html#a97a5deb74f48549544dd6dea3e7c47c2">00896</a> <a class="code" href="classArmISA_1_1SecureMonitorCall.html#a97a5deb74f48549544dd6dea3e7c47c2">SecureMonitorCall::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00897"></a>00897 <span class="keyword"></span>{
<a name="l00898"></a>00898     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> ? <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba089bbab6b0a13b88a06d4e2c92d1cad0">EC_SMC_64</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>);
<a name="l00899"></a>00899 }
<a name="l00900"></a>00900 
<a name="l00901"></a>00901 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00902"></a><a class="code" href="classArmISA_1_1SupervisorTrap.html#a0cf1596f8c9fb73a7155f72b8430d687">00902</a> <a class="code" href="classArmISA_1_1SupervisorTrap.html#a0cf1596f8c9fb73a7155f72b8430d687">SupervisorTrap::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00903"></a>00903 <span class="keyword"></span>{
<a name="l00904"></a>00904     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1SupervisorTrap.html#a662b21b602e8e7d35f44fa40d3ea7c73">overrideEc</a> != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>) ? <a class="code" href="classArmISA_1_1SupervisorTrap.html#a662b21b602e8e7d35f44fa40d3ea7c73">overrideEc</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>;
<a name="l00905"></a>00905 }
<a name="l00906"></a>00906 
<a name="l00907"></a>00907 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l00908"></a><a class="code" href="classArmISA_1_1SecureMonitorTrap.html#a079c9dd06c1861c3f471a1b2262baa53">00908</a> <a class="code" href="classArmISA_1_1SecureMonitorTrap.html#a079c9dd06c1861c3f471a1b2262baa53">SecureMonitorTrap::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l00909"></a>00909 <span class="keyword"></span>{
<a name="l00910"></a>00910     <span class="keywordflow">return</span> (<a class="code" href="classArmISA_1_1SecureMonitorTrap.html#ae1345a52789a9d6e07fbc5d503165bff">overrideEc</a> != <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba18b36571f7d7d1cf72985b30e587769c">EC_INVALID</a>) ? <a class="code" href="classArmISA_1_1SecureMonitorTrap.html#ae1345a52789a9d6e07fbc5d503165bff">overrideEc</a> :
<a name="l00911"></a>00911         (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a> ? <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba089bbab6b0a13b88a06d4e2c92d1cad0">EC_SMC_64</a> : <a class="code" href="classArmISA_1_1ArmFaultVals.html#a7e8c5fb4c513353a348974a66f90097c">vals</a>.<a class="code" href="structArmISA_1_1ArmFault_1_1FaultVals.html#af61c292719cf4e16bc81239068c20a80">ec</a>);
<a name="l00912"></a>00912 }
<a name="l00913"></a>00913 
<a name="l00914"></a>00914 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00915"></a>00915 <span class="keywordtype">void</span>
<a name="l00916"></a><a class="code" href="classArmISA_1_1AbortFault.html#a86442163b7d3f5b2943e9b0b10d7a5d7">00916</a> <a class="code" href="classArmISA_1_1AbortFault.html#a86442163b7d3f5b2943e9b0b10d7a5d7">AbortFault&lt;T&gt;::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l00917"></a>00917 {
<a name="l00918"></a>00918     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7a62e8c033ec3647cfa247293db2feaf92">ArmFault::UnknownTran</a>) {
<a name="l00919"></a>00919         <a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> = <a class="code" href="namespaceArmISA.html#a55fd78a34f452df0391bc46926724034">longDescFormatInUse</a>(tc) ? <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7acb08e0463457bb8896b2d4f021e071f5">ArmFault::LpaeTran</a>
<a name="l00920"></a>00920                                              : <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7a0cafd1f4e2d0ba7ab9f0dbb0a16d16f9">ArmFault::VmsaTran</a>;
<a name="l00921"></a>00921 
<a name="l00922"></a>00922         <span class="keywordflow">if</span> ((<a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7a0cafd1f4e2d0ba7ab9f0dbb0a16d16f9">ArmFault::VmsaTran</a>) &amp;&amp; this-&gt;<a class="code" href="classArmISA_1_1ArmFaultVals.html#a6dd2e007664be0c86d69df0ebea70e32">routeToMonitor</a>(tc)) {
<a name="l00923"></a>00923             <span class="comment">// See ARM ARM B3-1416</span>
<a name="l00924"></a>00924             <span class="keywordtype">bool</span> override_LPAE = <span class="keyword">false</span>;
<a name="l00925"></a>00925             TTBCR ttbcr_s = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca37fffb602030144c098b21feae5e242f">MISCREG_TTBCR_S</a>);
<a name="l00926"></a>00926             TTBCR <a class="code" href="namespaceArmISA.html#a7bca404a37e7db0156c4b14dad12c18f">M5_VAR_USED</a> ttbcr_ns = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca16206c90c6020addfc5855ddc0edf038">MISCREG_TTBCR_NS</a>);
<a name="l00927"></a>00927             <span class="keywordflow">if</span> (ttbcr_s.eae) {
<a name="l00928"></a>00928                 override_LPAE = <span class="keyword">true</span>;
<a name="l00929"></a>00929             } <span class="keywordflow">else</span> {
<a name="l00930"></a>00930                 <span class="comment">// Unimplemented code option, not seen in testing.  May need</span>
<a name="l00931"></a>00931                 <span class="comment">// extension according to the manual exceprt above.</span>
<a name="l00932"></a>00932                 <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Warning: Incomplete translation method &quot;</span>
<a name="l00933"></a>00933                         <span class="stringliteral">&quot;override detected.\n&quot;</span>);
<a name="l00934"></a>00934             }
<a name="l00935"></a>00935             <span class="keywordflow">if</span> (override_LPAE)
<a name="l00936"></a>00936                 <a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> = <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7acb08e0463457bb8896b2d4f021e071f5">ArmFault::LpaeTran</a>;
<a name="l00937"></a>00937         }
<a name="l00938"></a>00938     }
<a name="l00939"></a>00939 
<a name="l00940"></a>00940     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba0bf8cdd9311ca8bff96e1fcb3ffd1105">ArmFault::AsynchronousExternalAbort</a>) {
<a name="l00941"></a>00941         tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;clearInterrupt(<a class="code" href="namespaceArmISA.html#a5944639e8d6a3ef3fd6a51234896148aa174c01e09b28d57161a9d13a619514ba">INT_ABT</a>, 0);
<a name="l00942"></a>00942     }
<a name="l00943"></a>00943     <span class="comment">// Get effective fault source encoding</span>
<a name="l00944"></a>00944     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l00945"></a>00945     FSR  fsr  = <a class="code" href="classArmISA_1_1AbortFault.html#a4b1697ed5ec5017a16620ef82060987c">getFsr</a>(tc);
<a name="l00946"></a>00946 
<a name="l00947"></a>00947     <span class="comment">// source must be determined BEFORE invoking generic routines which will</span>
<a name="l00948"></a>00948     <span class="comment">// try to set hsr etc. and are based upon source!</span>
<a name="l00949"></a>00949     <a class="code" href="classArmISA_1_1AbortFault.html#a86442163b7d3f5b2943e9b0b10d7a5d7">ArmFaultVals&lt;T&gt;::invoke</a>(tc, inst);
<a name="l00950"></a>00950 
<a name="l00951"></a>00951     <span class="keywordflow">if</span> (cpsr.width) {  <span class="comment">// AArch32</span>
<a name="l00952"></a>00952         <span class="keywordflow">if</span> (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l00953"></a>00953             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(T::HFarIndex, <a class="code" href="classArmISA_1_1AbortFault.html#a5144f8bb45da5ef3fbd5f9ea6a87e76f" title="The virtual address the fault occured at.">faultAddr</a>);
<a name="l00954"></a>00954         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#ad159ab44ffca1cf29ca59893069c9602">stage2</a>) {
<a name="l00955"></a>00955             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6bb1943e82738f9d9ad7b6b9fea703b1">MISCREG_HPFAR</a>, (<a class="code" href="classArmISA_1_1AbortFault.html#a5144f8bb45da5ef3fbd5f9ea6a87e76f" title="The virtual address the fault occured at.">faultAddr</a> &gt;&gt; 8) &amp; ~0xf);
<a name="l00956"></a>00956             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(T::HFarIndex,  <a class="code" href="classArmISA_1_1AbortFault.html#a3fdf0db21e1066cc66a430e608d662aa" title="Original virtual address.">OVAddr</a>);
<a name="l00957"></a>00957         } <span class="keywordflow">else</span> {
<a name="l00958"></a>00958             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(T::FsrIndex, fsr);
<a name="l00959"></a>00959             tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(T::FarIndex, <a class="code" href="classArmISA_1_1AbortFault.html#a5144f8bb45da5ef3fbd5f9ea6a87e76f" title="The virtual address the fault occured at.">faultAddr</a>);
<a name="l00960"></a>00960         }
<a name="l00961"></a>00961         <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Abort Fault source=%#x fsr=%#x faultAddr=%#x &quot;</span>\
<a name="l00962"></a>00962                 <span class="stringliteral">&quot;tranMethod=%#x\n&quot;</span>, <a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a>, fsr, <a class="code" href="classArmISA_1_1AbortFault.html#a5144f8bb45da5ef3fbd5f9ea6a87e76f" title="The virtual address the fault occured at.">faultAddr</a>, <a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a>);
<a name="l00963"></a>00963     } <span class="keywordflow">else</span> {  <span class="comment">// AArch64</span>
<a name="l00964"></a>00964         <span class="comment">// Set the FAR register.  Nothing else to do if we are in AArch64 state</span>
<a name="l00965"></a>00965         <span class="comment">// because the syndrome register has already been set inside invoke64()</span>
<a name="l00966"></a>00966         tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="classArmISA_1_1AbortFault.html">AbortFault&lt;T&gt;::getFaultAddrReg64</a>(), <a class="code" href="classArmISA_1_1AbortFault.html#a5144f8bb45da5ef3fbd5f9ea6a87e76f" title="The virtual address the fault occured at.">faultAddr</a>);
<a name="l00967"></a>00967     }
<a name="l00968"></a>00968 }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l00971"></a>00971 FSR
<a name="l00972"></a><a class="code" href="classArmISA_1_1AbortFault.html#a4b1697ed5ec5017a16620ef82060987c">00972</a> <a class="code" href="classArmISA_1_1AbortFault.html#a4b1697ed5ec5017a16620ef82060987c">AbortFault&lt;T&gt;::getFsr</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l00973"></a>00973 {
<a name="l00974"></a>00974     FSR fsr = 0;
<a name="l00975"></a>00975 
<a name="l00976"></a>00976     <span class="keywordflow">if</span> (((CPSR) tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>)).<a class="code" href="namespaceArmISA.html#abc9d5266b21d878b506e99288cd73da8">width</a>) {
<a name="l00977"></a>00977         <span class="comment">// AArch32</span>
<a name="l00978"></a>00978         assert(<a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> != <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7a62e8c033ec3647cfa247293db2feaf92">ArmFault::UnknownTran</a>);
<a name="l00979"></a>00979         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#acd4d5e5da65ebd76d442e1ecd46fe13f">tranMethod</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ac7119dff39f998f7a72c869891452cd7acb08e0463457bb8896b2d4f021e071f5">ArmFault::LpaeTran</a>) {
<a name="l00980"></a>00980             <a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a> = <a class="code" href="classArmISA_1_1ArmFault.html#a6d42bb90e15863fb1c45a7c1f2dfa3b2" title="Encodings of the fault sources when the long-desc.">ArmFault::longDescFaultSources</a>[<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a>];
<a name="l00981"></a>00981             fsr.status = <a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a>;
<a name="l00982"></a>00982             fsr.lpae   = 1;
<a name="l00983"></a>00983         } <span class="keywordflow">else</span> {
<a name="l00984"></a>00984             <a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a> = <a class="code" href="classArmISA_1_1ArmFault.html#acc16bc2426ca96300dedc803a8b24ce2" title="Encodings of the fault sources when the short-desc.">ArmFault::shortDescFaultSources</a>[<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a>];
<a name="l00985"></a>00985             fsr.fsLow  = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a>, 3, 0);
<a name="l00986"></a>00986             fsr.fsHigh = <a class="code" href="bitfield_8hh.html#a4ee0dc0723e11679c52429d5f8e05123" title="Extract the bitfield from position &amp;#39;first&amp;#39; to &amp;#39;last&amp;#39; (inclusive)...">bits</a>(<a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a>, 4);
<a name="l00987"></a>00987             fsr.domain = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code" href="classArmISA_1_1AbortFault.html#a27744db10990e0fd8cfb15d6a950c709">domain</a>);
<a name="l00988"></a>00988         }
<a name="l00989"></a>00989         fsr.wnr = (<a class="code" href="classArmISA_1_1AbortFault.html#ae7d03955485fc89e02ff012bf17c206a">write</a> ? 1 : 0);
<a name="l00990"></a>00990         fsr.ext = 0;
<a name="l00991"></a>00991     } <span class="keywordflow">else</span> {
<a name="l00992"></a>00992         <span class="comment">// AArch64</span>
<a name="l00993"></a>00993         <a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a> = <a class="code" href="classArmISA_1_1ArmFault.html#a1d068459d7b3f859b562a7a009f6cde6" title="Encodings of the fault sources in AArch64 state.">ArmFault::aarch64FaultSources</a>[<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a>];
<a name="l00994"></a>00994     }
<a name="l00995"></a>00995     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa9520ebb330c9ef2d8ff66e6b16017b9">ArmFault::FaultSourceInvalid</a>) {
<a name="l00996"></a>00996         <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Invalid fault source\n&quot;</span>);
<a name="l00997"></a>00997     }
<a name="l00998"></a>00998     <span class="keywordflow">return</span> fsr;
<a name="l00999"></a>00999 }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01002"></a>01002 <span class="keywordtype">bool</span>
<a name="l01003"></a><a class="code" href="classArmISA_1_1AbortFault.html#a7f986405ed27dece5d2fc4bc9bf6920a">01003</a> <a class="code" href="classArmISA_1_1AbortFault.html#a7f986405ed27dece5d2fc4bc9bf6920a">AbortFault&lt;T&gt;::abortDisable</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l01004"></a>01004 {
<a name="l01005"></a>01005     <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc)) {
<a name="l01006"></a>01006         SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01007"></a>01007         <span class="keywordflow">return</span> (!scr.ns || scr.aw);
<a name="l01008"></a>01008     }
<a name="l01009"></a>01009     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01010"></a>01010 }
<a name="l01011"></a>01011 
<a name="l01012"></a>01012 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01013"></a>01013 <span class="keywordtype">void</span>
<a name="l01014"></a><a class="code" href="classArmISA_1_1AbortFault.html#a340d0f0e70eca4c640037cebca6ef1b6">01014</a> <a class="code" href="classArmISA_1_1AbortFault.html#a340d0f0e70eca4c640037cebca6ef1b6">AbortFault&lt;T&gt;::annotate</a>(<a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984">ArmFault::AnnotationIDs</a> <span class="keywordtype">id</span>, uint64_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l01015"></a>01015 {
<a name="l01016"></a>01016     <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>)
<a name="l01017"></a>01017     {
<a name="l01018"></a>01018       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984a1bbffb23e587ed481e447a5ecc9d1e61">ArmFault::S1PTW</a>:
<a name="l01019"></a>01019         <a class="code" href="classArmISA_1_1AbortFault.html#a2660dd8f1a598fc8a80c1d95b7b384a8">s1ptw</a> = val;
<a name="l01020"></a>01020         <span class="keywordflow">break</span>;
<a name="l01021"></a>01021       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984a815fccb247136d28886f2d82805d7bcb">ArmFault::OVA</a>:
<a name="l01022"></a>01022         <a class="code" href="classArmISA_1_1AbortFault.html#a3fdf0db21e1066cc66a430e608d662aa" title="Original virtual address.">OVAddr</a> = val;
<a name="l01023"></a>01023         <span class="keywordflow">break</span>;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025       <span class="comment">// Just ignore unknown ID&apos;s</span>
<a name="l01026"></a>01026       <span class="keywordflow">default</span>:
<a name="l01027"></a>01027         <span class="keywordflow">break</span>;
<a name="l01028"></a>01028     }
<a name="l01029"></a>01029 }
<a name="l01030"></a>01030 
<a name="l01031"></a>01031 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01032"></a>01032 uint32_t
<a name="l01033"></a><a class="code" href="classArmISA_1_1AbortFault.html#a047a32a3ccc62ccc19af08327d9df22a">01033</a> <a class="code" href="classArmISA_1_1AbortFault.html#a047a32a3ccc62ccc19af08327d9df22a">AbortFault&lt;T&gt;::iss</a>()<span class="keyword"> const</span>
<a name="l01034"></a>01034 <span class="keyword"></span>{
<a name="l01035"></a>01035     uint32_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>;
<a name="l01036"></a>01036 
<a name="l01037"></a>01037     val  = <a class="code" href="classArmISA_1_1AbortFault.html#a5845adc67a5502bd23eab2611642716e">srcEncoded</a> &amp; 0x3F;
<a name="l01038"></a>01038     val |= <a class="code" href="classArmISA_1_1AbortFault.html#ae7d03955485fc89e02ff012bf17c206a">write</a> &lt;&lt; 6;
<a name="l01039"></a>01039     val |= <a class="code" href="classArmISA_1_1AbortFault.html#a2660dd8f1a598fc8a80c1d95b7b384a8">s1ptw</a> &lt;&lt; 7;
<a name="l01040"></a>01040     <span class="keywordflow">return</span> (val);
<a name="l01041"></a>01041 }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
<a name="l01044"></a>01044 <span class="keywordtype">bool</span>
<a name="l01045"></a><a class="code" href="classArmISA_1_1AbortFault.html#a69df2bb6fa4cf520704c6dfc4746d44f">01045</a> <a class="code" href="classArmISA_1_1AbortFault.html#a69df2bb6fa4cf520704c6dfc4746d44f">AbortFault&lt;T&gt;::isMMUFault</a>()<span class="keyword"> const</span>
<a name="l01046"></a>01046 <span class="keyword"></span>{
<a name="l01047"></a>01047     <span class="comment">// NOTE: Not relying on LL information being aligned to lowest bits here</span>
<a name="l01048"></a>01048     <span class="keywordflow">return</span>
<a name="l01049"></a>01049          (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba6d768f0e624f74c08959bf971eb97589">ArmFault::AlignmentFault</a>)     ||
<a name="l01050"></a>01050         ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &gt;= <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa782d334223c4018c19e9bf673f98f67">ArmFault::TranslationLL</a>) &amp;&amp;
<a name="l01051"></a>01051          (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &lt;  <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991baa782d334223c4018c19e9bf673f98f67">ArmFault::TranslationLL</a> + 4)) ||
<a name="l01052"></a>01052         ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &gt;= <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba53c8138f04717b4930bb3fddf8b4403f">ArmFault::AccessFlagLL</a>) &amp;&amp;
<a name="l01053"></a>01053          (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &lt;  <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba53c8138f04717b4930bb3fddf8b4403f">ArmFault::AccessFlagLL</a> + 4))  ||
<a name="l01054"></a>01054         ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &gt;= <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba3d1db89a45ca3fb55f537b6409d3c4bd">ArmFault::DomainLL</a>) &amp;&amp;
<a name="l01055"></a>01055          (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &lt;  <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba3d1db89a45ca3fb55f537b6409d3c4bd">ArmFault::DomainLL</a> + 4))      ||
<a name="l01056"></a>01056         ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &gt;= <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba67e178d678012b0951bfea90f70e7090">ArmFault::PermissionLL</a>) &amp;&amp;
<a name="l01057"></a>01057          (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> &lt;  <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba67e178d678012b0951bfea90f70e7090">ArmFault::PermissionLL</a> + 4));
<a name="l01058"></a>01058 }
<a name="l01059"></a>01059 
<a name="l01060"></a>01060 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l01061"></a><a class="code" href="classArmISA_1_1PrefetchAbort.html#a443f14942a8f0835c6a80ae9e296aa70">01061</a> <a class="code" href="classArmISA_1_1PrefetchAbort.html#a443f14942a8f0835c6a80ae9e296aa70">PrefetchAbort::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01062"></a>01062 <span class="keyword"></span>{
<a name="l01063"></a>01063     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#af80763dbb287cc2cca0d08abfccfb33f">to64</a>) {
<a name="l01064"></a>01064         <span class="comment">// AArch64</span>
<a name="l01065"></a>01065         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> == <a class="code" href="classArmISA_1_1ArmFault.html#a9532efc42629f82a9a46f93455b4c3e9">fromEL</a>)
<a name="l01066"></a>01066             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba2f186e48fc132ed25f5400ff5c35e048">EC_PREFETCH_ABORT_CURR_EL</a>;
<a name="l01067"></a>01067         <span class="keywordflow">else</span>
<a name="l01068"></a>01068             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baee7b100b3afcb907c0280241cea737f9">EC_PREFETCH_ABORT_LOWER_EL</a>;
<a name="l01069"></a>01069     } <span class="keywordflow">else</span> {
<a name="l01070"></a>01070         <span class="comment">// AArch32</span>
<a name="l01071"></a>01071         <span class="comment">// Abort faults have different EC codes depending on whether</span>
<a name="l01072"></a>01072         <span class="comment">// the fault originated within HYP mode, or not. So override</span>
<a name="l01073"></a>01073         <span class="comment">// the method and add the extra adjustment of the EC value.</span>
<a name="l01074"></a>01074 
<a name="l01075"></a>01075         <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a> <a class="code" href="classArmISA_1_1PrefetchAbort.html#a443f14942a8f0835c6a80ae9e296aa70">ec</a> = <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;PrefetchAbort&gt;::vals</a>.ec;
<a name="l01076"></a>01076 
<a name="l01077"></a>01077         CPSR spsr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad22e1e056516ed04bc079c3a3237878f">MISCREG_SPSR_HYP</a>);
<a name="l01078"></a>01078         <span class="keywordflow">if</span> (spsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l01079"></a>01079             ec = ((<a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>) (((uint32_t) ec) + 1));
<a name="l01080"></a>01080         }
<a name="l01081"></a>01081         <span class="keywordflow">return</span> ec;
<a name="l01082"></a>01082     }
<a name="l01083"></a>01083 }
<a name="l01084"></a>01084 
<a name="l01085"></a>01085 <span class="keywordtype">bool</span>
<a name="l01086"></a><a class="code" href="classArmISA_1_1PrefetchAbort.html#afabde78972eb51c5bd1ca5a3ff3b949b">01086</a> <a class="code" href="classArmISA_1_1PrefetchAbort.html#afabde78972eb51c5bd1ca5a3ff3b949b">PrefetchAbort::routeToMonitor</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01087"></a>01087 <span class="keyword"></span>{
<a name="l01088"></a>01088     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = 0;
<a name="l01089"></a>01089     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l01090"></a>01090         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01091"></a>01091     <span class="keywordflow">else</span>
<a name="l01092"></a>01092         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="keywordflow">return</span> scr.ea &amp;&amp; !<a class="code" href="classArmISA_1_1AbortFault.html#a69df2bb6fa4cf520704c6dfc4746d44f">isMMUFault</a>();
<a name="l01095"></a>01095 }
<a name="l01096"></a>01096 
<a name="l01097"></a>01097 <span class="keywordtype">bool</span>
<a name="l01098"></a><a class="code" href="classArmISA_1_1PrefetchAbort.html#aa9da6b8699cc8441afc853b81b3af2ef">01098</a> <a class="code" href="classArmISA_1_1PrefetchAbort.html#aa9da6b8699cc8441afc853b81b3af2ef">PrefetchAbort::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01099"></a>01099 <span class="keyword"></span>{
<a name="l01100"></a>01100     <span class="keywordtype">bool</span> toHyp;
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01103"></a>01103     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01104"></a>01104     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l01105"></a>01105     HDCR hdcr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca97eecbdef114ffd3a77f279c034d909d">MISCREG_HDCR</a>);
<a name="l01106"></a>01106 
<a name="l01107"></a>01107     <span class="comment">// if in Hyp mode then stay in Hyp mode</span>
<a name="l01108"></a>01108     toHyp  = scr.ns &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l01109"></a>01109     <span class="comment">// otherwise, check whether to take to Hyp mode through Hyp Trap vector</span>
<a name="l01110"></a>01110     toHyp |= (<a class="code" href="classArmISA_1_1AbortFault.html#ad159ab44ffca1cf29ca59893069c9602">stage2</a> ||
<a name="l01111"></a>01111                 ( (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> ==               <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991bad5887dc6f7d733671f5ca70a7545d4cf">DebugEvent</a>) &amp;&amp; hdcr.tde &amp;&amp; (cpsr.mode !=  <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>)) ||
<a name="l01112"></a>01112                 ( (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991babe94c4a9d6e2e3cdb3c411b5dc4c0f41">SynchronousExternalAbort</a>) &amp;&amp; hcr.tge  &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caad87337169ced79741200c7319ef71811">MODE_USER</a>))
<a name="l01113"></a>01113              ) &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr);
<a name="l01114"></a>01114     <span class="keywordflow">return</span> toHyp;
<a name="l01115"></a>01115 }
<a name="l01116"></a>01116 
<a name="l01117"></a>01117 <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>
<a name="l01118"></a><a class="code" href="classArmISA_1_1DataAbort.html#aa83aa098386264276b35fccb2155ee19">01118</a> <a class="code" href="classArmISA_1_1DataAbort.html#aa83aa098386264276b35fccb2155ee19">DataAbort::ec</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01119"></a>01119 <span class="keyword"></span>{
<a name="l01120"></a>01120     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#af80763dbb287cc2cca0d08abfccfb33f">to64</a>) {
<a name="l01121"></a>01121         <span class="comment">// AArch64</span>
<a name="l01122"></a>01122         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba0bf8cdd9311ca8bff96e1fcb3ffd1105">ArmFault::AsynchronousExternalAbort</a>) {
<a name="l01123"></a>01123             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;Asynchronous External Abort should be handled with &quot;</span>
<a name="l01124"></a>01124                     <span class="stringliteral">&quot;SystemErrors (SErrors)!&quot;</span>);
<a name="l01125"></a>01125         }
<a name="l01126"></a>01126         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> == <a class="code" href="classArmISA_1_1ArmFault.html#a9532efc42629f82a9a46f93455b4c3e9">fromEL</a>)
<a name="l01127"></a>01127             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112baea9493060dcd2006da7506910c195ba5">EC_DATA_ABORT_CURR_EL</a>;
<a name="l01128"></a>01128         <span class="keywordflow">else</span>
<a name="l01129"></a>01129             <span class="keywordflow">return</span> <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112ba72a9356904e83cc880d2965452107d7f">EC_DATA_ABORT_LOWER_EL</a>;
<a name="l01130"></a>01130     } <span class="keywordflow">else</span> {
<a name="l01131"></a>01131         <span class="comment">// AArch32</span>
<a name="l01132"></a>01132         <span class="comment">// Abort faults have different EC codes depending on whether</span>
<a name="l01133"></a>01133         <span class="comment">// the fault originated within HYP mode, or not. So override</span>
<a name="l01134"></a>01134         <span class="comment">// the method and add the extra adjustment of the EC value.</span>
<a name="l01135"></a>01135 
<a name="l01136"></a>01136         <a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a> <a class="code" href="classArmISA_1_1DataAbort.html#aa83aa098386264276b35fccb2155ee19">ec</a> = <a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;DataAbort&gt;::vals</a>.ec;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138         CPSR spsr = tc-&gt;<a class="code" href="classThreadContext.html#a49de25575586f1e9bb3c72c2c4178c72">readMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cad22e1e056516ed04bc079c3a3237878f">MISCREG_SPSR_HYP</a>);
<a name="l01139"></a>01139         <span class="keywordflow">if</span> (spsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) {
<a name="l01140"></a>01140             ec = ((<a class="code" href="namespaceArmISA.html#a9134983853f4df163bc2c9603220112b">ExceptionClass</a>) (((uint32_t) ec) + 1));
<a name="l01141"></a>01141         }
<a name="l01142"></a>01142         <span class="keywordflow">return</span> ec;
<a name="l01143"></a>01143     }
<a name="l01144"></a>01144 }
<a name="l01145"></a>01145 
<a name="l01146"></a>01146 <span class="keywordtype">bool</span>
<a name="l01147"></a><a class="code" href="classArmISA_1_1DataAbort.html#ad9cde78034933a64f0130114f825f6a6">01147</a> <a class="code" href="classArmISA_1_1DataAbort.html#ad9cde78034933a64f0130114f825f6a6">DataAbort::routeToMonitor</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01148"></a>01148 <span class="keyword"></span>{
<a name="l01149"></a>01149     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = 0;
<a name="l01150"></a>01150     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l01151"></a>01151         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01152"></a>01152     <span class="keywordflow">else</span>
<a name="l01153"></a>01153         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01154"></a>01154 
<a name="l01155"></a>01155     <span class="keywordflow">return</span> scr.ea &amp;&amp; !<a class="code" href="classArmISA_1_1AbortFault.html#a69df2bb6fa4cf520704c6dfc4746d44f">isMMUFault</a>();
<a name="l01156"></a>01156 }
<a name="l01157"></a>01157 
<a name="l01158"></a>01158 <span class="keywordtype">bool</span>
<a name="l01159"></a><a class="code" href="classArmISA_1_1DataAbort.html#a8b2fb5868e96baa5039627cc22392ecf">01159</a> <a class="code" href="classArmISA_1_1DataAbort.html#a8b2fb5868e96baa5039627cc22392ecf">DataAbort::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01160"></a>01160 <span class="keyword"></span>{
<a name="l01161"></a>01161     <span class="keywordtype">bool</span> toHyp;
<a name="l01162"></a>01162 
<a name="l01163"></a>01163     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01164"></a>01164     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01165"></a>01165     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l01166"></a>01166     HDCR hdcr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca97eecbdef114ffd3a77f279c034d909d">MISCREG_HDCR</a>);
<a name="l01167"></a>01167 
<a name="l01168"></a>01168     <span class="comment">// if in Hyp mode then stay in Hyp mode</span>
<a name="l01169"></a>01169     toHyp  = scr.ns &amp;&amp; (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l01170"></a>01170     <span class="comment">// otherwise, check whether to take to Hyp mode through Hyp Trap vector</span>
<a name="l01171"></a>01171     toHyp |= (<a class="code" href="classArmISA_1_1AbortFault.html#ad159ab44ffca1cf29ca59893069c9602">stage2</a> ||
<a name="l01172"></a>01172                 ( (cpsr.mode != <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>) &amp;&amp; ( ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba0bf8cdd9311ca8bff96e1fcb3ffd1105">AsynchronousExternalAbort</a>) &amp;&amp; hcr.amo) ||
<a name="l01173"></a>01173                                                ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991bad5887dc6f7d733671f5ca70a7545d4cf">DebugEvent</a>) &amp;&amp; hdcr.tde) )
<a name="l01174"></a>01174                 ) ||
<a name="l01175"></a>01175                 ( (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caad87337169ced79741200c7319ef71811">MODE_USER</a>) &amp;&amp; hcr.tge &amp;&amp;
<a name="l01176"></a>01176                   ((<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991ba6d768f0e624f74c08959bf971eb97589">AlignmentFault</a>)            ||
<a name="l01177"></a>01177                    (<a class="code" href="classArmISA_1_1AbortFault.html#a8e2c19b95597d19bf3910530d57437ce">source</a> == <a class="code" href="classArmISA_1_1ArmFault.html#ae55c8f9f651c9cec4c0de576544e991babe94c4a9d6e2e3cdb3c411b5dc4c0f41">SynchronousExternalAbort</a>))
<a name="l01178"></a>01178                 )
<a name="l01179"></a>01179              ) &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr);
<a name="l01180"></a>01180     <span class="keywordflow">return</span> toHyp;
<a name="l01181"></a>01181 }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183 uint32_t
<a name="l01184"></a><a class="code" href="classArmISA_1_1DataAbort.html#a354a02c8873ee853efd37535862685b7">01184</a> <a class="code" href="classArmISA_1_1DataAbort.html#a354a02c8873ee853efd37535862685b7">DataAbort::iss</a>()<span class="keyword"> const</span>
<a name="l01185"></a>01185 <span class="keyword"></span>{
<a name="l01186"></a>01186     uint32_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>;
<a name="l01187"></a>01187 
<a name="l01188"></a>01188     <span class="comment">// Add on the data abort specific fields to the generic abort ISS value</span>
<a name="l01189"></a>01189     val  = <a class="code" href="classArmISA_1_1DataAbort.html#a354a02c8873ee853efd37535862685b7">AbortFault&lt;DataAbort&gt;::iss</a>();
<a name="l01190"></a>01190     <span class="comment">// ISS is valid if not caused by a stage 1 page table walk, and when taken</span>
<a name="l01191"></a>01191     <span class="comment">// to AArch64 only when directed to EL2</span>
<a name="l01192"></a>01192     <span class="keywordflow">if</span> (!<a class="code" href="classArmISA_1_1AbortFault.html#a2660dd8f1a598fc8a80c1d95b7b384a8">s1ptw</a> &amp;&amp; (!<a class="code" href="classArmISA_1_1ArmFault.html#af80763dbb287cc2cca0d08abfccfb33f">to64</a> || <a class="code" href="classArmISA_1_1ArmFault.html#ac215723693b2cfdee38d28f69a37f52f">toEL</a> == <a class="code" href="namespaceArmISA.html#a6b7c17b7a5b9b9b5c8f8610bd27ba98daa4c3712f2de98a3c6557776ed120b2ed">EL2</a>)) {
<a name="l01193"></a>01193         val |= <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> &lt;&lt; 24;
<a name="l01194"></a>01194         <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a>) {
<a name="l01195"></a>01195             val |= <a class="code" href="classArmISA_1_1DataAbort.html#a9f37e4935a2d3d90a0a08a7ec8a95cb4">sas</a> &lt;&lt; 22;
<a name="l01196"></a>01196             val |= <a class="code" href="classArmISA_1_1DataAbort.html#ac0805e7921276d70003f92fd1e279714">sse</a> &lt;&lt; 21;
<a name="l01197"></a>01197             val |= <a class="code" href="classArmISA_1_1DataAbort.html#ae75b34f5b6b0c12e6d8680a34408a750">srt</a> &lt;&lt; 16;
<a name="l01198"></a>01198             <span class="comment">// AArch64 only. These assignments are safe on AArch32 as well</span>
<a name="l01199"></a>01199             <span class="comment">// because these vars are initialized to false</span>
<a name="l01200"></a>01200             val |= <a class="code" href="classArmISA_1_1DataAbort.html#a8a2669d2bb5c08e8c4e717aca0db8782">sf</a> &lt;&lt; 15;
<a name="l01201"></a>01201             val |= <a class="code" href="classArmISA_1_1DataAbort.html#af8a8b62bd7106b5cb4319252827f75f4">ar</a> &lt;&lt; 14;
<a name="l01202"></a>01202         }
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204     <span class="keywordflow">return</span> (val);
<a name="l01205"></a>01205 }
<a name="l01206"></a>01206 
<a name="l01207"></a>01207 <span class="keywordtype">void</span>
<a name="l01208"></a><a class="code" href="classArmISA_1_1DataAbort.html#aa3447dccabe8e0172a959ea6e9423c4d">01208</a> <a class="code" href="classArmISA_1_1DataAbort.html#aa3447dccabe8e0172a959ea6e9423c4d">DataAbort::annotate</a>(<a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984">AnnotationIDs</a> <span class="keywordtype">id</span>, uint64_t <a class="code" href="namespaceX86ISA.html#ab4e00e23f8f36386f97d8abcccb17180">val</a>)
<a name="l01209"></a>01209 {
<a name="l01210"></a>01210     <a class="code" href="classArmISA_1_1DataAbort.html#aa3447dccabe8e0172a959ea6e9423c4d">AbortFault&lt;DataAbort&gt;::annotate</a>(<span class="keywordtype">id</span>, val);
<a name="l01211"></a>01211     <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>)
<a name="l01212"></a>01212     {
<a name="l01213"></a>01213       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984ae37c665bd369d9bdf5018a2cd66b0c42">SAS</a>:
<a name="l01214"></a>01214         <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> = <span class="keyword">true</span>;
<a name="l01215"></a>01215         <a class="code" href="classArmISA_1_1DataAbort.html#a9f37e4935a2d3d90a0a08a7ec8a95cb4">sas</a> = val;
<a name="l01216"></a>01216         <span class="keywordflow">break</span>;
<a name="l01217"></a>01217       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984aa5f7964286f5af02f7db96ce8b00ece8">SSE</a>:
<a name="l01218"></a>01218         <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> = <span class="keyword">true</span>;
<a name="l01219"></a>01219         <a class="code" href="classArmISA_1_1DataAbort.html#ac0805e7921276d70003f92fd1e279714">sse</a> = val;
<a name="l01220"></a>01220         <span class="keywordflow">break</span>;
<a name="l01221"></a>01221       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984a26086a98953234bf72f5d7d797b746c9">SRT</a>:
<a name="l01222"></a>01222         <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> = <span class="keyword">true</span>;
<a name="l01223"></a>01223         <a class="code" href="classArmISA_1_1DataAbort.html#ae75b34f5b6b0c12e6d8680a34408a750">srt</a> = val;
<a name="l01224"></a>01224         <span class="keywordflow">break</span>;
<a name="l01225"></a>01225       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984a644a553451b0dfc852bf086e7b224229">SF</a>:
<a name="l01226"></a>01226         <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> = <span class="keyword">true</span>;
<a name="l01227"></a>01227         <a class="code" href="classArmISA_1_1DataAbort.html#a8a2669d2bb5c08e8c4e717aca0db8782">sf</a>  = val;
<a name="l01228"></a>01228         <span class="keywordflow">break</span>;
<a name="l01229"></a>01229       <span class="keywordflow">case</span> <a class="code" href="classArmISA_1_1ArmFault.html#ae6dafc1e97284429cc25565e1f683984a70fd31135c8fd0fd5a21c2bf70a995ef">AR</a>:
<a name="l01230"></a>01230         <a class="code" href="classArmISA_1_1DataAbort.html#a15ec77136b2ded72dd5bb33680966cd3">isv</a> = <span class="keyword">true</span>;
<a name="l01231"></a>01231         <a class="code" href="classArmISA_1_1DataAbort.html#af8a8b62bd7106b5cb4319252827f75f4">ar</a>  = val;
<a name="l01232"></a>01232         <span class="keywordflow">break</span>;
<a name="l01233"></a>01233       <span class="comment">// Just ignore unknown ID&apos;s</span>
<a name="l01234"></a>01234       <span class="keywordflow">default</span>:
<a name="l01235"></a>01235         <span class="keywordflow">break</span>;
<a name="l01236"></a>01236     }
<a name="l01237"></a>01237 }
<a name="l01238"></a>01238 
<a name="l01239"></a>01239 <span class="keywordtype">void</span>
<a name="l01240"></a><a class="code" href="classArmISA_1_1VirtualDataAbort.html#abe6c2c6e702d1bc447e872155ee1d348">01240</a> <a class="code" href="classArmISA_1_1VirtualDataAbort.html#abe6c2c6e702d1bc447e872155ee1d348">VirtualDataAbort::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l01241"></a>01241 {
<a name="l01242"></a>01242     <a class="code" href="classArmISA_1_1VirtualDataAbort.html#abe6c2c6e702d1bc447e872155ee1d348">AbortFault&lt;VirtualDataAbort&gt;::invoke</a>(tc, inst);
<a name="l01243"></a>01243     HCR hcr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01244"></a>01244     hcr.va = 0;
<a name="l01245"></a>01245     tc-&gt;<a class="code" href="classThreadContext.html#a50d110467c213c1caec6ff304fc44521">setMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>, hcr);
<a name="l01246"></a>01246 }
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="keywordtype">bool</span>
<a name="l01249"></a><a class="code" href="classArmISA_1_1Interrupt.html#a7c473201d7564d2e19cbd475b3d49bef">01249</a> <a class="code" href="classArmISA_1_1Interrupt.html#a7c473201d7564d2e19cbd475b3d49bef">Interrupt::routeToMonitor</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01250"></a>01250 <span class="keyword"></span>{
<a name="l01251"></a>01251     assert(<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc));
<a name="l01252"></a>01252     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = 0;
<a name="l01253"></a>01253     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l01254"></a>01254         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01255"></a>01255     <span class="keywordflow">else</span>
<a name="l01256"></a>01256         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01257"></a>01257     <span class="keywordflow">return</span> scr.irq;
<a name="l01258"></a>01258 }
<a name="l01259"></a>01259 
<a name="l01260"></a>01260 <span class="keywordtype">bool</span>
<a name="l01261"></a><a class="code" href="classArmISA_1_1Interrupt.html#a432ef5d98f2f631a28db3acde1cd2a27">01261</a> <a class="code" href="classArmISA_1_1Interrupt.html#a432ef5d98f2f631a28db3acde1cd2a27">Interrupt::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01262"></a>01262 <span class="keyword"></span>{
<a name="l01263"></a>01263     <span class="keywordtype">bool</span> toHyp;
<a name="l01264"></a>01264 
<a name="l01265"></a>01265     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01266"></a>01266     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01267"></a>01267     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l01268"></a>01268     <span class="comment">// Determine whether IRQs are routed to Hyp mode.</span>
<a name="l01269"></a>01269     toHyp = (!scr.irq &amp;&amp; hcr.imo &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr)) ||
<a name="l01270"></a>01270             (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l01271"></a>01271     <span class="keywordflow">return</span> toHyp;
<a name="l01272"></a>01272 }
<a name="l01273"></a>01273 
<a name="l01274"></a>01274 <span class="keywordtype">bool</span>
<a name="l01275"></a><a class="code" href="classArmISA_1_1Interrupt.html#ac467e1998af4b941a5af1728b54fa859">01275</a> <a class="code" href="classArmISA_1_1Interrupt.html#ac467e1998af4b941a5af1728b54fa859">Interrupt::abortDisable</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l01276"></a>01276 {
<a name="l01277"></a>01277     <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc)) {
<a name="l01278"></a>01278         SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01279"></a>01279         <span class="keywordflow">return</span> (!scr.ns || scr.aw);
<a name="l01280"></a>01280     }
<a name="l01281"></a>01281     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01282"></a>01282 }
<a name="l01283"></a>01283 
<a name="l01284"></a><a class="code" href="classArmISA_1_1VirtualInterrupt.html#ab6992a2238d72d1109c560bee89fe300">01284</a> <a class="code" href="classArmISA_1_1VirtualInterrupt.html#ab6992a2238d72d1109c560bee89fe300">VirtualInterrupt::VirtualInterrupt</a>()
<a name="l01285"></a>01285 {}
<a name="l01286"></a>01286 
<a name="l01287"></a>01287 <span class="keywordtype">bool</span>
<a name="l01288"></a><a class="code" href="classArmISA_1_1FastInterrupt.html#a188d5f7ee38d6d72080bc5d664ecd6ab">01288</a> <a class="code" href="classArmISA_1_1FastInterrupt.html#a188d5f7ee38d6d72080bc5d664ecd6ab">FastInterrupt::routeToMonitor</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01289"></a>01289 <span class="keyword"></span>{
<a name="l01290"></a>01290     assert(<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc));
<a name="l01291"></a>01291     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = 0;
<a name="l01292"></a>01292     <span class="keywordflow">if</span> (<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>)
<a name="l01293"></a>01293         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01294"></a>01294     <span class="keywordflow">else</span>
<a name="l01295"></a>01295         scr = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01296"></a>01296     <span class="keywordflow">return</span> scr.fiq;
<a name="l01297"></a>01297 }
<a name="l01298"></a>01298 
<a name="l01299"></a>01299 <span class="keywordtype">bool</span>
<a name="l01300"></a><a class="code" href="classArmISA_1_1FastInterrupt.html#ae1d398ecb8ac885295264af160dbb3e9">01300</a> <a class="code" href="classArmISA_1_1FastInterrupt.html#ae1d398ecb8ac885295264af160dbb3e9">FastInterrupt::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01301"></a>01301 <span class="keyword"></span>{
<a name="l01302"></a>01302     <span class="keywordtype">bool</span> toHyp;
<a name="l01303"></a>01303 
<a name="l01304"></a>01304     SCR  <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a>  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01305"></a>01305     HCR  hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01306"></a>01306     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l01307"></a>01307     <span class="comment">// Determine whether IRQs are routed to Hyp mode.</span>
<a name="l01308"></a>01308     toHyp = (!scr.fiq &amp;&amp; hcr.fmo &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr)) ||
<a name="l01309"></a>01309             (cpsr.mode == <a class="code" href="namespaceArmISA.html#a5e5caf7b8ca343e256c2ac66262990caabe7248ed532124da7df4c82944df7225">MODE_HYP</a>);
<a name="l01310"></a>01310     <span class="keywordflow">return</span> toHyp;
<a name="l01311"></a>01311 }
<a name="l01312"></a>01312 
<a name="l01313"></a>01313 <span class="keywordtype">bool</span>
<a name="l01314"></a><a class="code" href="classArmISA_1_1FastInterrupt.html#a72a00a84599430a728747471eef846fb">01314</a> <a class="code" href="classArmISA_1_1FastInterrupt.html#a72a00a84599430a728747471eef846fb">FastInterrupt::abortDisable</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l01315"></a>01315 {
<a name="l01316"></a>01316     <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc)) {
<a name="l01317"></a>01317         SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01318"></a>01318         <span class="keywordflow">return</span> (!scr.ns || scr.aw);
<a name="l01319"></a>01319     }
<a name="l01320"></a>01320     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01321"></a>01321 }
<a name="l01322"></a>01322 
<a name="l01323"></a>01323 <span class="keywordtype">bool</span>
<a name="l01324"></a><a class="code" href="classArmISA_1_1FastInterrupt.html#a89014de7d63873b9a2f2c904250708de">01324</a> <a class="code" href="classArmISA_1_1FastInterrupt.html#a89014de7d63873b9a2f2c904250708de">FastInterrupt::fiqDisable</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)
<a name="l01325"></a>01325 {
<a name="l01326"></a>01326     <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#a56fe69900ac88701fdec086573b2be18" title="Returns true if this system implements the virtualization Extensions.">ArmSystem::haveVirtualization</a>(tc)) {
<a name="l01327"></a>01327         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01328"></a>01328     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc)) {
<a name="l01329"></a>01329         SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca6ec2fd6368d4b6668ee8155fc93d93b8">MISCREG_SCR</a>);
<a name="l01330"></a>01330         <span class="keywordflow">return</span> (!scr.ns || scr.fw);
<a name="l01331"></a>01331     }
<a name="l01332"></a>01332     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01333"></a>01333 }
<a name="l01334"></a>01334 
<a name="l01335"></a><a class="code" href="classArmISA_1_1VirtualFastInterrupt.html#acd667a5f1b33af268393b49ca592872a">01335</a> <a class="code" href="classArmISA_1_1VirtualFastInterrupt.html#acd667a5f1b33af268393b49ca592872a">VirtualFastInterrupt::VirtualFastInterrupt</a>()
<a name="l01336"></a>01336 {}
<a name="l01337"></a>01337 
<a name="l01338"></a>01338 <span class="keywordtype">void</span>
<a name="l01339"></a><a class="code" href="classArmISA_1_1PCAlignmentFault.html#a341fff4a0ee031e0069141ff3559803f">01339</a> <a class="code" href="classArmISA_1_1PCAlignmentFault.html#a341fff4a0ee031e0069141ff3559803f">PCAlignmentFault::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l01340"></a>01340 {
<a name="l01341"></a>01341     <a class="code" href="classArmISA_1_1PCAlignmentFault.html#a341fff4a0ee031e0069141ff3559803f">ArmFaultVals&lt;PCAlignmentFault&gt;::invoke</a>(tc, inst);
<a name="l01342"></a>01342     assert(<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>);
<a name="l01343"></a>01343     <span class="comment">// Set the FAR</span>
<a name="l01344"></a>01344     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="classArmISA_1_1ArmFault.html#aa944d89c650d5e1f53b421b9c7bf037a">getFaultAddrReg64</a>(), <a class="code" href="classArmISA_1_1PCAlignmentFault.html#a1ac53d5490e0b36b3f5dfcd61a49e0f5" title="The unaligned value of the PC.">faultPC</a>);
<a name="l01345"></a>01345 }
<a name="l01346"></a>01346 
<a name="l01347"></a><a class="code" href="classArmISA_1_1SPAlignmentFault.html#a68ecee226e11043fcfcda18309f2d942">01347</a> <a class="code" href="classArmISA_1_1SPAlignmentFault.html#a68ecee226e11043fcfcda18309f2d942">SPAlignmentFault::SPAlignmentFault</a>()
<a name="l01348"></a>01348 {}
<a name="l01349"></a>01349 
<a name="l01350"></a><a class="code" href="classArmISA_1_1SystemError.html#a5f67bb13d3feb6b305c08fe498927126">01350</a> <a class="code" href="classArmISA_1_1SystemError.html#a5f67bb13d3feb6b305c08fe498927126">SystemError::SystemError</a>()
<a name="l01351"></a>01351 {}
<a name="l01352"></a>01352 
<a name="l01353"></a>01353 <span class="keywordtype">void</span>
<a name="l01354"></a><a class="code" href="classArmISA_1_1SystemError.html#a4fc52d36e47a014130d36e1ae5fa6a99">01354</a> <a class="code" href="classArmISA_1_1SystemError.html#a4fc52d36e47a014130d36e1ae5fa6a99">SystemError::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst)
<a name="l01355"></a>01355 {
<a name="l01356"></a>01356     tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;clearInterrupt(<a class="code" href="namespaceArmISA.html#a5944639e8d6a3ef3fd6a51234896148aa174c01e09b28d57161a9d13a619514ba">INT_ABT</a>, 0);
<a name="l01357"></a>01357     <a class="code" href="classArmISA_1_1SystemError.html#a4fc52d36e47a014130d36e1ae5fa6a99">ArmFault::invoke</a>(tc, inst);
<a name="l01358"></a>01358 }
<a name="l01359"></a>01359 
<a name="l01360"></a>01360 <span class="keywordtype">bool</span>
<a name="l01361"></a><a class="code" href="classArmISA_1_1SystemError.html#a5cc89649add69dd2ebacb0a393f5f0cd">01361</a> <a class="code" href="classArmISA_1_1SystemError.html#a5cc89649add69dd2ebacb0a393f5f0cd">SystemError::routeToMonitor</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01362"></a>01362 <span class="keyword"></span>{
<a name="l01363"></a>01363     assert(<a class="code" href="classArmSystem.html#ad7bc0f542b193ed1fc54c6ea190fb0dd" title="Returns true if this system implements the Security Extensions.">ArmSystem::haveSecurity</a>(tc));
<a name="l01364"></a>01364     assert(<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>);
<a name="l01365"></a>01365     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01366"></a>01366     <span class="keywordflow">return</span> scr.ea;
<a name="l01367"></a>01367 }
<a name="l01368"></a>01368 
<a name="l01369"></a>01369 <span class="keywordtype">bool</span>
<a name="l01370"></a><a class="code" href="classArmISA_1_1SystemError.html#a5eedf94a34b78702a242133fea9ab43f">01370</a> <a class="code" href="classArmISA_1_1SystemError.html#a5eedf94a34b78702a242133fea9ab43f">SystemError::routeToHyp</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>)<span class="keyword"> const</span>
<a name="l01371"></a>01371 <span class="keyword"></span>{
<a name="l01372"></a>01372     <span class="keywordtype">bool</span> toHyp;
<a name="l01373"></a>01373     assert(<a class="code" href="classArmISA_1_1ArmFault.html#a9249da5da8e5e0fc984d51f8db3ddba7">from64</a>);
<a name="l01374"></a>01374 
<a name="l01375"></a>01375     SCR <a class="code" href="namespaceArmISA.html#a4982970a6e14df1bcdec992e13010ea6">scr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca25e01e2437793648b59e468b134153e4">MISCREG_SCR_EL3</a>);
<a name="l01376"></a>01376     HCR hcr  = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919cacc6c0d54b3de785d3e9bd57250007f71">MISCREG_HCR</a>);
<a name="l01377"></a>01377     CPSR <a class="code" href="namespaceArmISA.html#a28eb434b8e612e94308a551ad1ece71a">cpsr</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab3e3af9cdb680faad903612b9733d068">readMiscRegNoEffect</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca1d2df46d160cfa336591aaebdd6f99ba">MISCREG_CPSR</a>);
<a name="l01378"></a>01378 
<a name="l01379"></a>01379     toHyp = (!scr.ea &amp;&amp; hcr.amo &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr, cpsr)) ||
<a name="l01380"></a>01380             (!scr.ea &amp;&amp; !scr.rw &amp;&amp; !hcr.amo &amp;&amp; !<a class="code" href="namespaceArmISA.html#abb263f4ec2a2852ac26b5c33c6f5897b">inSecureState</a>(scr,cpsr));
<a name="l01381"></a>01381     <span class="keywordflow">return</span> toHyp;
<a name="l01382"></a>01382 }
<a name="l01383"></a>01383 
<a name="l01384"></a>01384 <span class="keywordtype">void</span>
<a name="l01385"></a><a class="code" href="classArmISA_1_1FlushPipe.html#ad7984eda2f2c22d559424569f4517faf">01385</a> <a class="code" href="classArmISA_1_1FlushPipe.html#ad7984eda2f2c22d559424569f4517faf">FlushPipe::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst) {
<a name="l01386"></a>01386     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Invoking FlushPipe Fault\n&quot;</span>);
<a name="l01387"></a>01387 
<a name="l01388"></a>01388     <span class="comment">// Set the PC to the next instruction of the faulting instruction.</span>
<a name="l01389"></a>01389     <span class="comment">// Net effect is simply squashing all instructions behind and</span>
<a name="l01390"></a>01390     <span class="comment">// start refetching from the next instruction.</span>
<a name="l01391"></a>01391     <a class="code" href="namespaceAlphaISA.html#a233e755911c9143f96bef37eedb1e009">PCState</a> <a class="code" href="namespaceMipsISA.html#a4f7ed975e7137b5c369214789649451f">pc</a> = tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>();
<a name="l01392"></a>01392     assert(inst);
<a name="l01393"></a>01393     inst-&gt;advancePC(pc);
<a name="l01394"></a>01394     tc-&gt;<a class="code" href="classThreadContext.html#ab15f0db0e7c7afb40dfbbbd13d62dc2e">pcState</a>(pc);
<a name="l01395"></a>01395 }
<a name="l01396"></a>01396 
<a name="l01397"></a>01397 <span class="keywordtype">void</span>
<a name="l01398"></a><a class="code" href="classArmISA_1_1ArmSev.html#a5c23a7c49bb75a30dbc30de336ad41d9">01398</a> <a class="code" href="classArmISA_1_1ArmSev.html#a5c23a7c49bb75a30dbc30de336ad41d9">ArmSev::invoke</a>(<a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="namespaceArmISA.html#ad231afd8f3ee15e80991d6fbd5ba2e9a">tc</a>, <span class="keyword">const</span> <a class="code" href="classRefCountingPtr.html">StaticInstPtr</a> &amp;inst) {
<a name="l01399"></a>01399     <a class="code" href="base_2trace_8hh.html#aefe58fddf89e41edd783bf4c3e31d2c3">DPRINTF</a>(Faults, <span class="stringliteral">&quot;Invoking ArmSev Fault\n&quot;</span>);
<a name="l01400"></a>01400     <span class="keywordflow">if</span> (!<a class="code" href="full__system_8hh.html#af929576af6f85c8849704b66d04b8370" title="The FullSystem variable can be used to determine the current mode of simulation.">FullSystem</a>)
<a name="l01401"></a>01401         <span class="keywordflow">return</span>;
<a name="l01402"></a>01402 
<a name="l01403"></a>01403     <span class="comment">// Set sev_mailbox to 1, clear the pending interrupt from remote</span>
<a name="l01404"></a>01404     <span class="comment">// SEV execution and let pipeline continue as pcState is still</span>
<a name="l01405"></a>01405     <span class="comment">// valid.</span>
<a name="l01406"></a>01406     tc-&gt;<a class="code" href="classThreadContext.html#a97455e30bf1a5a538971e03ecbb3ecde">setMiscReg</a>(<a class="code" href="namespaceArmISA.html#a95c4749b8e05d58cf7536163a9ce919ca309489dd7ba7778d15ee0407215a20a4">MISCREG_SEV_MAILBOX</a>, 1);
<a name="l01407"></a>01407     tc-&gt;<a class="code" href="classThreadContext.html#add24ea69a3c1a7862d25bec95f9bdc95">getCpuPtr</a>()-&gt;clearInterrupt(<a class="code" href="namespaceArmISA.html#a5944639e8d6a3ef3fd6a51234896148aa397eab29ef44121fc27ae29a330fc03a">INT_SEV</a>, 0);
<a name="l01408"></a>01408 }
<a name="l01409"></a>01409 
<a name="l01410"></a>01410 <span class="comment">// Instantiate all the templates to make the linker happy</span>
<a name="l01411"></a>01411 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;Reset&gt;</a>;
<a name="l01412"></a>01412 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;UndefinedInstruction&gt;</a>;
<a name="l01413"></a>01413 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SupervisorCall&gt;</a>;
<a name="l01414"></a>01414 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SecureMonitorCall&gt;</a>;
<a name="l01415"></a>01415 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;HypervisorCall&gt;</a>;
<a name="l01416"></a>01416 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;PrefetchAbort&gt;</a>;
<a name="l01417"></a>01417 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;DataAbort&gt;</a>;
<a name="l01418"></a>01418 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualDataAbort&gt;</a>;
<a name="l01419"></a>01419 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;HypervisorTrap&gt;</a>;
<a name="l01420"></a>01420 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;Interrupt&gt;</a>;
<a name="l01421"></a>01421 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualInterrupt&gt;</a>;
<a name="l01422"></a>01422 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;FastInterrupt&gt;</a>;
<a name="l01423"></a>01423 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;VirtualFastInterrupt&gt;</a>;
<a name="l01424"></a>01424 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SupervisorTrap&gt;</a>;
<a name="l01425"></a>01425 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SecureMonitorTrap&gt;</a>;
<a name="l01426"></a>01426 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;PCAlignmentFault&gt;</a>;
<a name="l01427"></a>01427 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SPAlignmentFault&gt;</a>;
<a name="l01428"></a>01428 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;SystemError&gt;</a>;
<a name="l01429"></a>01429 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;FlushPipe&gt;</a>;
<a name="l01430"></a>01430 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1ArmFaultVals.html">ArmFaultVals&lt;ArmSev&gt;</a>;
<a name="l01431"></a>01431 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1AbortFault.html">AbortFault&lt;PrefetchAbort&gt;</a>;
<a name="l01432"></a>01432 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1AbortFault.html">AbortFault&lt;DataAbort&gt;</a>;
<a name="l01433"></a>01433 <span class="keyword">template</span> <span class="keyword">class </span><a class="code" href="classArmISA_1_1AbortFault.html">AbortFault&lt;VirtualDataAbort&gt;</a>;
<a name="l01434"></a>01434 
<a name="l01435"></a>01435 
<a name="l01436"></a><a class="code" href="classArmISA_1_1IllegalInstSetStateFault.html#a53f467770cfe3a97e0e6ae72b4d5e2c7">01436</a> <a class="code" href="classArmISA_1_1IllegalInstSetStateFault.html#a53f467770cfe3a97e0e6ae72b4d5e2c7">IllegalInstSetStateFault::IllegalInstSetStateFault</a>()
<a name="l01437"></a>01437 {}
<a name="l01438"></a>01438 
<a name="l01439"></a>01439 
<a name="l01440"></a>01440 } <span class="comment">// namespace ArmISA</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:04 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
