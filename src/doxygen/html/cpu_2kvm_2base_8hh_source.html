<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>gem5: cpu/kvm/base.hh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>cpu/kvm/base.hh</h1><a href="cpu_2kvm_2base_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2012 ARM Limited</span>
<a name="l00003"></a>00003 <span class="comment"> * All rights reserved</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * The license below extends only to copyright in the software and shall</span>
<a name="l00006"></a>00006 <span class="comment"> * not be construed as granting a license to any other intellectual</span>
<a name="l00007"></a>00007 <span class="comment"> * property including but not limited to intellectual property relating</span>
<a name="l00008"></a>00008 <span class="comment"> * to a hardware implementation of the functionality of the software</span>
<a name="l00009"></a>00009 <span class="comment"> * licensed hereunder.  You may use the software subject to the license</span>
<a name="l00010"></a>00010 <span class="comment"> * terms below provided that you ensure that this notice is replicated</span>
<a name="l00011"></a>00011 <span class="comment"> * unmodified and in its entirety in all distributions of the software,</span>
<a name="l00012"></a>00012 <span class="comment"> * modified or unmodified, in source code or in binary form.</span>
<a name="l00013"></a>00013 <span class="comment"> *</span>
<a name="l00014"></a>00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00016"></a>00016 <span class="comment"> * met: redistributions of source code must retain the above copyright</span>
<a name="l00017"></a>00017 <span class="comment"> * notice, this list of conditions and the following disclaimer;</span>
<a name="l00018"></a>00018 <span class="comment"> * redistributions in binary form must reproduce the above copyright</span>
<a name="l00019"></a>00019 <span class="comment"> * notice, this list of conditions and the following disclaimer in the</span>
<a name="l00020"></a>00020 <span class="comment"> * documentation and/or other materials provided with the distribution;</span>
<a name="l00021"></a>00021 <span class="comment"> * neither the name of the copyright holders nor the names of its</span>
<a name="l00022"></a>00022 <span class="comment"> * contributors may be used to endorse or promote products derived from</span>
<a name="l00023"></a>00023 <span class="comment"> * this software without specific prior written permission.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00026"></a>00026 <span class="comment"> * &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00027"></a>00027 <span class="comment"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00028"></a>00028 <span class="comment"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00029"></a>00029 <span class="comment"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00030"></a>00030 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00031"></a>00031 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00032"></a>00032 <span class="comment"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00033"></a>00033 <span class="comment"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00034"></a>00034 <span class="comment"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00035"></a>00035 <span class="comment"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00036"></a>00036 <span class="comment"> *</span>
<a name="l00037"></a>00037 <span class="comment"> * Authors: Andreas Sandberg</span>
<a name="l00038"></a>00038 <span class="comment"> */</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#ifndef __CPU_KVM_BASE_HH__</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#define __CPU_KVM_BASE_HH__</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;pthread.h&gt;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;csignal&gt;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;memory&gt;</span>
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="preprocessor">#include &quot;<a class="code" href="statistics_8hh.html" title="Declaration of Statistics objects.">base/statistics.hh</a>&quot;</span>
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="perfevent_8hh.html">cpu/kvm/perfevent.hh</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="timer_8hh.html">cpu/kvm/timer.hh</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="vm_8hh.html">cpu/kvm/vm.hh</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="cpu_2base_8hh.html">cpu/base.hh</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#include &quot;<a class="code" href="simple__thread_8hh.html">cpu/simple_thread.hh</a>&quot;</span>
<a name="l00054"></a>00054 
<a name="l00056"></a><a class="code" href="cpu_2kvm_2base_8hh.html#a7aba22a2f8cca986ad7802c54c654847">00056</a> <span class="preprocessor">#define KVM_KICK_SIGNAL SIGRTMIN</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 <span class="comment">// forward declarations</span>
<a name="l00059"></a>00059 <span class="keyword">class </span><a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a>;
<a name="l00060"></a>00060 <span class="keyword">struct </span>BaseKvmCPUParams;
<a name="l00061"></a>00061 
<a name="l00077"></a><a class="code" href="classBaseKvmCPU.html">00077</a> <span class="keyword">class </span><a class="code" href="classBaseKvmCPU.html" title="Base class for KVM based CPU models.">BaseKvmCPU</a> : <span class="keyword">public</span> <a class="code" href="classBaseCPU.html">BaseCPU</a>
<a name="l00078"></a>00078 {
<a name="l00079"></a>00079   <span class="keyword">public</span>:
<a name="l00080"></a>00080     <a class="code" href="classBaseKvmCPU.html#a68ba02e38e35ecd9d348e2efc136288b">BaseKvmCPU</a>(BaseKvmCPUParams *params);
<a name="l00081"></a>00081     <span class="keyword">virtual</span> <a class="code" href="classBaseKvmCPU.html#a80ef0da8d4e4245f6b42a4484e13511f">~BaseKvmCPU</a>();
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a34a0a1356bf1253cd249046e75f0382f">init</a>();
<a name="l00084"></a>00084     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a0b92e68366e23238aeb55ca8ed2d4eed">startup</a>();
<a name="l00085"></a>00085     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a5d60be092a969b71a6cd00962e84e802">regStats</a>();
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a0ab506ad77f06c4221e1c24a7e03d6af">serializeThread</a>(std::ostream &amp;<a class="code" href="namespaceX86ISA.html#aea9fbab71662ba06cf536e05edfaaad1">os</a>, <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid);
<a name="l00088"></a>00088     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a8396acb3c803a3270e3abfa99ced7344">unserializeThread</a>(<a class="code" href="classCheckpoint.html">Checkpoint</a> *cp, <span class="keyword">const</span> std::string &amp;section,
<a name="l00089"></a>00089                            <a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> tid);
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classBaseKvmCPU.html#a12cf9bff3fd41b54d961f88307c217aa">drain</a>(<a class="code" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> *<a class="code" href="namespaceMipsISA.html#afed89bf85db8c823833a4921f0b24ac8">dm</a>);
<a name="l00092"></a>00092     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#adb0b026e9d607f79ed818380a952b25f">drainResume</a>();
<a name="l00093"></a>00093 
<a name="l00094"></a>00094     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a11f90eb56ef107e1a045d0ec18d06539">switchOut</a>();
<a name="l00095"></a>00095     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#ac71dc0790561722c1a80a0c08e3a2b42">takeOverFrom</a>(<a class="code" href="classBaseCPU.html">BaseCPU</a> *cpu);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a30e6d6daf5db166e2ada8c6077c026e7">verifyMemoryMode</a>() <span class="keyword">const</span>;
<a name="l00098"></a>00098 
<a name="l00099"></a><a class="code" href="classBaseKvmCPU.html#af932c48cdf771c679367bed4178501c2">00099</a>     <a class="code" href="classMasterPort.html" title="A MasterPort is a specialisation of a BaseMasterPort, which implements the default...">MasterPort</a> &amp;<a class="code" href="classBaseKvmCPU.html#af932c48cdf771c679367bed4178501c2">getDataPort</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseKvmCPU.html#a91a536e52f05c96d88a83832db91b543" title="Port for data requests.">dataPort</a>; }
<a name="l00100"></a><a class="code" href="classBaseKvmCPU.html#aac23de9407e4e9c1f3b45e1ddf4f3749">00100</a>     <a class="code" href="classMasterPort.html" title="A MasterPort is a specialisation of a BaseMasterPort, which implements the default...">MasterPort</a> &amp;<a class="code" href="classBaseKvmCPU.html#aac23de9407e4e9c1f3b45e1ddf4f3749">getInstPort</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseKvmCPU.html#ab93dc5f839cd51bc9dd874e2444246d2" title="Unused dummy port for the instruction interface.">instPort</a>; }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#acf9cb37eff5a3b34b93954279b6d815e">wakeup</a>();
<a name="l00103"></a>00103     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#affa61aeed785f397801a60c0f685f668">activateContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> thread_num);
<a name="l00104"></a>00104     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a5f5a7904a84946e0a68a848cdad4904d">suspendContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> thread_num);
<a name="l00105"></a>00105     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a582a9d1f439e7e7f27acef9f5067b0ff">deallocateContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> thread_num);
<a name="l00106"></a>00106     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a0b2a1ed34a91992f0e70181c5d3c4cc7">haltContext</a>(<a class="code" href="base_2types_8hh.html#ab39b1a4f9dad884694c7a74ed69e6a6b" title="Thread index/ID type.">ThreadID</a> thread_num);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108     <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="classBaseKvmCPU.html#a6f22743c4c1dd4acb3ee5d1fad6f0dd3">getContext</a>(<span class="keywordtype">int</span> tn);
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <a class="code" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e" title="Statistics counter type.">Counter</a> <a class="code" href="classBaseKvmCPU.html#aa5bd19e07ebabe47ee8e3cbabf0044cc">totalInsts</a>() <span class="keyword">const</span>;
<a name="l00111"></a>00111     <a class="code" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e" title="Statistics counter type.">Counter</a> <a class="code" href="classBaseKvmCPU.html#a85730f1a6b530a2b25bf2f7cf44160cd">totalOps</a>() <span class="keyword">const</span>;
<a name="l00112"></a>00112 
<a name="l00114"></a>00114     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a42ddb8b4785004b7fa2f9970f1ca2a4d" title="Dump the internal state to the terminal.">dump</a>();
<a name="l00115"></a>00115 
<a name="l00122"></a><a class="code" href="classBaseKvmCPU.html#acece83a503d2f23246a2c36ade56b784">00122</a>     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#acece83a503d2f23246a2c36ade56b784" title="Force an exit from KVM.">kick</a>()<span class="keyword"> const </span>{ pthread_kill(<a class="code" href="classBaseKvmCPU.html#ac4cdb6b70bc4e835df19e53f05dafd33" title="ID of the vCPU thread.">vcpuThread</a>, <a class="code" href="cpu_2kvm_2base_8hh.html#a7aba22a2f8cca986ad7802c54c654847" title="Signal to use to trigger exits from KVM.">KVM_KICK_SIGNAL</a>); }
<a name="l00123"></a>00123 
<a name="l00137"></a><a class="code" href="classBaseKvmCPU.html#aefb406bd528f64ecb5036b600e401a87">00137</a>     <a class="code" href="classSimpleThread.html" title="The SimpleThread object provides a combination of the ThreadState object and the...">SimpleThread</a> *<a class="code" href="classBaseKvmCPU.html#aefb406bd528f64ecb5036b600e401a87" title="A cached copy of a thread&amp;#39;s state in the form of a SimpleThread object.">thread</a>;
<a name="l00138"></a>00138 
<a name="l00142"></a><a class="code" href="classBaseKvmCPU.html#a37b0833de5c513bb273b2ef526ae4327">00142</a>     <a class="code" href="classThreadContext.html" title="ThreadContext is the external interface to all thread state for anything outside...">ThreadContext</a> *<a class="code" href="classBaseKvmCPU.html#a37b0833de5c513bb273b2ef526ae4327" title="ThreadContext object, provides an interface for external objects to modify this thread&amp;#39;s...">tc</a>;
<a name="l00143"></a>00143 
<a name="l00144"></a><a class="code" href="classBaseKvmCPU.html#adeeeb00ef99797a5acd84121aa9d48ce">00144</a>     <a class="code" href="classKvmVM.html" title="KVM VM container.">KvmVM</a> &amp;<a class="code" href="classBaseKvmCPU.html#adeeeb00ef99797a5acd84121aa9d48ce">vm</a>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146   <span class="keyword">protected</span>:
<a name="l00169"></a><a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">00169</a>     <span class="keyword">enum</span> <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">Status</a> {
<a name="l00179"></a><a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa406fbd7a03689308f5327d16b1312e75">00179</a>         <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa406fbd7a03689308f5327d16b1312e75" title="Context not scheduled in KVM.">Idle</a>,
<a name="l00185"></a><a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa25cd3c68299e93e22fcb2f57eddc02a4">00185</a>         <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fa25cd3c68299e93e22fcb2f57eddc02a4" title="Running normally.">Running</a>,
<a name="l00198"></a><a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fadc3ca860d51f1182428857c1c977f34d">00198</a>         <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fadc3ca860d51f1182428857c1c977f34d" title="Requiring service at the beginning of the next cycle.">RunningService</a>,
<a name="l00207"></a><a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fae24e0293cbc6d5261a461a6227b49f90">00207</a>         <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24fae24e0293cbc6d5261a461a6227b49f90" title="Service completion in progress.">RunningServiceCompletion</a>,
<a name="l00208"></a>00208     };
<a name="l00209"></a>00209 
<a name="l00211"></a><a class="code" href="classBaseKvmCPU.html#a7435ef26f94d8129433dec26236fee4b">00211</a>     <a class="code" href="classBaseKvmCPU.html#aa0641cc1ddeea39ae9504b45ffaab24f">Status</a> <a class="code" href="classBaseKvmCPU.html#a7435ef26f94d8129433dec26236fee4b" title="CPU run state.">_status</a>;
<a name="l00212"></a>00212 
<a name="l00217"></a>00217     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a42e73730c44c3783bcfda7055a72d6fe" title="Execute the CPU until the next event in the main event queue or until the guest needs...">tick</a>();
<a name="l00218"></a>00218 
<a name="l00232"></a>00232     <span class="keyword">virtual</span> uint64_t <a class="code" href="classBaseKvmCPU.html#ad1bfb2e3a128923e86f944a565d97027" title="Get the value of the hardware cycle counter in the guest.">getHostCycles</a>() <span class="keyword">const</span>;
<a name="l00233"></a>00233 
<a name="l00260"></a>00260     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a76cee3dce21295def5b0ad86a25b3835" title="Request KVM to run the guest for a given number of ticks.">kvmRun</a>(<a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> ticks);
<a name="l00261"></a>00261 
<a name="l00273"></a>00273     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a161d75e4dbb909622638f79c9bcf056a" title="Request the CPU to run until draining completes.">kvmRunDrain</a>();
<a name="l00274"></a>00274 
<a name="l00279"></a><a class="code" href="classBaseKvmCPU.html#ae5c568b0d8f7a76d4d89c2575ae34190">00279</a>     <span class="keyword">struct </span>kvm_run *<a class="code" href="classBaseKvmCPU.html#ae5c568b0d8f7a76d4d89c2575ae34190" title="Get a pointer to the kvm_run structure containing all the input and output parameters...">getKvmRunState</a>() { <span class="keywordflow">return</span> <a class="code" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8" title="Pointer to the kvm_run structure used to communicate parameters with KVM.">_kvmRun</a>; };
<a name="l00280"></a>00280 
<a name="l00289"></a><a class="code" href="classBaseKvmCPU.html#a358d4ac29890e7b72a25eefffa68f236">00289</a>     uint8_t *<a class="code" href="classBaseKvmCPU.html#a358d4ac29890e7b72a25eefffa68f236" title="Retrieve a pointer to guest data stored at the end of the kvm_run structure.">getGuestData</a>(uint64_t <a class="code" href="namespaceArmISA.html#a19e4a68ca5c93c6136351d804b432b09">offset</a>)<span class="keyword"> const </span>{
<a name="l00290"></a>00290         <span class="keywordflow">return</span> (uint8_t *)<a class="code" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8" title="Pointer to the kvm_run structure used to communicate parameters with KVM.">_kvmRun</a> + offset;
<a name="l00291"></a>00291     };
<a name="l00292"></a>00292 
<a name="l00302"></a>00302     <span class="keywordtype">void</span> <a class="code" href="group__KvmInterrupts.html#ga6b691230f7fdecaef914ef88773790c7" title="Send a non-maskable interrupt to the guest.">kvmNonMaskableInterrupt</a>();
<a name="l00303"></a>00303 
<a name="l00314"></a>00314     <span class="keywordtype">void</span> <a class="code" href="group__KvmInterrupts.html#gaea8d68988b33fa1dbcc4e42f5dc762b6" title="Send a normal interrupt to the guest.">kvmInterrupt</a>(<span class="keyword">const</span> <span class="keyword">struct</span> kvm_interrupt &amp;interrupt);
<a name="l00315"></a>00315 
<a name="l00328"></a>00328     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a1a95237771da8d72f23cbcd56516fb95" title="Get/Set the register state of the guest vCPU.">getRegisters</a>(<span class="keyword">struct</span> kvm_regs &amp;regs) <span class="keyword">const</span>;
<a name="l00329"></a>00329     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#aebc7ec36486a368d9b6a55c06a61b57c">setRegisters</a>(<span class="keyword">const</span> <span class="keyword">struct</span> kvm_regs &amp;regs);
<a name="l00330"></a>00330     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a68a6a444166fe6abb8afe391acfac324">getSpecialRegisters</a>(<span class="keyword">struct</span> kvm_sregs &amp;regs) <span class="keyword">const</span>;
<a name="l00331"></a>00331     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#ae1f8b031817e1a09782a240f29ba010e">setSpecialRegisters</a>(<span class="keyword">const</span> <span class="keyword">struct</span> kvm_sregs &amp;regs);
<a name="l00338"></a>00338     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#aba532a4eb5890118f2957309e3ecff95" title="Get/Set the guest FPU/vector state.">getFPUState</a>(<span class="keyword">struct</span> kvm_fpu &amp;state) <span class="keyword">const</span>;
<a name="l00339"></a>00339     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a7c46f81a68500486be995b37d0fd28e8">setFPUState</a>(<span class="keyword">const</span> <span class="keyword">struct</span> kvm_fpu &amp;state);
<a name="l00348"></a>00348     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#aa0f53751a234ae4107a2ad89236e4ce7" title="Get/Set single register using the KVM_(SET|GET)_ONE_REG API.">setOneReg</a>(uint64_t <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>);
<a name="l00349"></a><a class="code" href="classBaseKvmCPU.html#a19be9f5454d77a76f53ccdd7a7338816">00349</a>     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a19be9f5454d77a76f53ccdd7a7338816">setOneReg</a>(uint64_t <span class="keywordtype">id</span>, uint64_t value) { <a class="code" href="classBaseKvmCPU.html#a19be9f5454d77a76f53ccdd7a7338816">setOneReg</a>(<span class="keywordtype">id</span>, &amp;value); }
<a name="l00350"></a><a class="code" href="classBaseKvmCPU.html#a1591055a0183d94025eff752b898ec7c">00350</a>     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a1591055a0183d94025eff752b898ec7c">setOneReg</a>(uint64_t <span class="keywordtype">id</span>, uint32_t value) { <a class="code" href="classBaseKvmCPU.html#a1591055a0183d94025eff752b898ec7c">setOneReg</a>(<span class="keywordtype">id</span>, &amp;value); }
<a name="l00351"></a>00351     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a37fb3b90d1db602a691b8d507d8b28f8">getOneReg</a>(uint64_t <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *<a class="code" href="namespaceX86ISA.html#a79b5c08c190167d17c9b9b3fd40112f6">addr</a>) <span class="keyword">const</span>;
<a name="l00352"></a><a class="code" href="classBaseKvmCPU.html#a3c337154c6c20c1667b4b63088d72d6e">00352</a>     uint64_t <a class="code" href="classBaseKvmCPU.html#a3c337154c6c20c1667b4b63088d72d6e">getOneRegU64</a>(uint64_t <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
<a name="l00353"></a>00353         uint64_t value;
<a name="l00354"></a>00354         <a class="code" href="classBaseKvmCPU.html#a37fb3b90d1db602a691b8d507d8b28f8">getOneReg</a>(<span class="keywordtype">id</span>, &amp;value);
<a name="l00355"></a>00355         <span class="keywordflow">return</span> value;
<a name="l00356"></a>00356     }
<a name="l00357"></a><a class="code" href="classBaseKvmCPU.html#aaedf1eff8b7043f0037a6340e8da0236">00357</a>     uint32_t <a class="code" href="classBaseKvmCPU.html#aaedf1eff8b7043f0037a6340e8da0236">getOneRegU32</a>(uint64_t <span class="keywordtype">id</span>)<span class="keyword"> const </span>{
<a name="l00358"></a>00358         uint32_t value;
<a name="l00359"></a>00359         <a class="code" href="classBaseKvmCPU.html#a37fb3b90d1db602a691b8d507d8b28f8">getOneReg</a>(<span class="keywordtype">id</span>, &amp;value);
<a name="l00360"></a>00360         <span class="keywordflow">return</span> value;
<a name="l00361"></a>00361     }
<a name="l00372"></a>00372     std::string <a class="code" href="classBaseKvmCPU.html#a08b1c1d5204982b8904e64aced49f012" title="Get and format one register for printout.">getAndFormatOneReg</a>(uint64_t <span class="keywordtype">id</span>) <span class="keyword">const</span>;
<a name="l00373"></a>00373 
<a name="l00383"></a>00383     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a74c51072421abe73972e1085f45f5f8b" title="Update the KVM state from the current thread context.">updateKvmState</a>() = 0;
<a name="l00384"></a>00384 
<a name="l00393"></a>00393     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#ac943446adae87cc8b93f9adc9ce26158" title="Update the current thread context with the KVM state.">updateThreadContext</a>() = 0;
<a name="l00394"></a>00394 
<a name="l00399"></a>00399     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#ad64da0a757d283b8a01ad93b2f896bda" title="Update a thread context if the KVM state is dirty with respect to the cached thread...">syncThreadContext</a>();
<a name="l00400"></a>00400 
<a name="l00404"></a>00404     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a76325d5e0a5007e2a98d0641433d1b6c" title="Update the KVM if the thread context is dirty.">syncKvmState</a>();
<a name="l00414"></a>00414     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#ab8129c1d639db3f569e7bf0fb240ad99" title="Main kvmRun exit handler, calls the relevant handleKvmExit* depending on exit type...">handleKvmExit</a>();
<a name="l00415"></a>00415 
<a name="l00421"></a>00421     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#afa891ade544b6941a9361679fa16dd75" title="The guest performed a legacy IO request (out/inp on x86).">handleKvmExitIO</a>();
<a name="l00422"></a>00422 
<a name="l00428"></a>00428     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a715a3725bd34c3ec163a2a3adfbef6fa" title="The guest requested a monitor service using a hypercall.">handleKvmExitHypercall</a>();
<a name="l00429"></a>00429 
<a name="l00439"></a>00439     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a8846d88cf92f95473ee6d8ec52104ebf" title="The guest exited because an interrupt window was requested.">handleKvmExitIRQWindowOpen</a>();
<a name="l00440"></a>00440 
<a name="l00453"></a>00453     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a7ffe8b58c9b6d8b64027829174fddc83" title="An unknown architecture dependent error occurred when starting the vCPU.">handleKvmExitUnknown</a>();
<a name="l00454"></a>00454 
<a name="l00464"></a>00464     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#ae932b779ab2e08728757e96abd56a05f" title="An unhandled virtualization exception occured.">handleKvmExitException</a>();
<a name="l00465"></a>00465 
<a name="l00474"></a>00474     <span class="keyword">virtual</span> <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#ac3ac54ad644c0e39e2939ddb8d229d53" title="KVM failed to start the virtualized CPU.">handleKvmExitFailEntry</a>();
<a name="l00493"></a><a class="code" href="classBaseKvmCPU.html#a54071dbb3d109f869a60d06afffb46f3">00493</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#a54071dbb3d109f869a60d06afffb46f3" title="Is the architecture specific code in a state that prevents draining?">archIsDrained</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l00494"></a>00494 
<a name="l00504"></a>00504     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a07a449bbe8ec985a85e7409ec7832ca8" title="Inject a memory mapped IO request into gem5.">doMMIOAccess</a>(<a class="code" href="base_2types_8hh.html#af1bb03d6a4ee096394a6749f0a169232" title="Address type This will probably be moved somewhere else in the near future.">Addr</a> paddr, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> size, <span class="keywordtype">bool</span> write);
<a name="l00505"></a>00505 
<a name="l00519"></a>00519     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a9fad600b008e3a6cd434473b55e88ce1" title="Set the signal mask used in kvmRun().">setSignalMask</a>(<span class="keyword">const</span> sigset_t *<a class="code" href="namespaceArmISA.html#aedf8742bbf65a60cf102a4b3f9ba3d68">mask</a>);
<a name="l00535"></a>00535     <span class="keywordtype">int</span> <a class="code" href="group__KvmIoctl.html#gacfdd75f9b99682a11bd2035d388cccc3" title="vCPU ioctl interface.">ioctl</a>(<span class="keywordtype">int</span> request, <span class="keywordtype">long</span> p1) <span class="keyword">const</span>;
<a name="l00536"></a><a class="code" href="group__KvmIoctl.html#ga1ff672c2d1b5fb1cd61a605d7ad22fb8">00536</a>     <span class="keywordtype">int</span> <a class="code" href="group__KvmIoctl.html#ga1ff672c2d1b5fb1cd61a605d7ad22fb8">ioctl</a>(<span class="keywordtype">int</span> request, <span class="keywordtype">void</span> *p1)<span class="keyword"> const </span>{
<a name="l00537"></a>00537         <span class="keywordflow">return</span> <a class="code" href="group__KvmIoctl.html#gacfdd75f9b99682a11bd2035d388cccc3" title="vCPU ioctl interface.">ioctl</a>(request, (<span class="keywordtype">long</span>)p1);
<a name="l00538"></a>00538     }
<a name="l00539"></a><a class="code" href="group__KvmIoctl.html#ga84d5d79b666d6291fa55db4c734e2675">00539</a>     <span class="keywordtype">int</span> <a class="code" href="group__KvmIoctl.html#ga84d5d79b666d6291fa55db4c734e2675">ioctl</a>(<span class="keywordtype">int</span> request)<span class="keyword"> const </span>{
<a name="l00540"></a>00540         <span class="keywordflow">return</span> <a class="code" href="group__KvmIoctl.html#gacfdd75f9b99682a11bd2035d388cccc3" title="vCPU ioctl interface.">ioctl</a>(request, 0<a class="code" href="namespaceX86ISA.html#a4d078113113d7bd7320066dbe3537784">L</a>);
<a name="l00541"></a>00541     }
<a name="l00549"></a><a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html">00549</a>     <span class="keyword">class </span><a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html" title="KVM memory port.">KVMCpuPort</a> : <span class="keyword">public</span> <a class="code" href="classMasterPort.html" title="A MasterPort is a specialisation of a BaseMasterPort, which implements the default...">MasterPort</a>
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551 
<a name="l00552"></a>00552       <span class="keyword">public</span>:
<a name="l00553"></a><a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a59032cfbaef5258f6631b98a37a48c55">00553</a>         <a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a59032cfbaef5258f6631b98a37a48c55">KVMCpuPort</a>(<span class="keyword">const</span> std::string &amp;_name, <a class="code" href="classBaseKvmCPU.html" title="Base class for KVM based CPU models.">BaseKvmCPU</a> *_cpu)
<a name="l00554"></a>00554             : <a class="code" href="classMasterPort.html" title="A MasterPort is a specialisation of a BaseMasterPort, which implements the default...">MasterPort</a>(_name, _cpu)
<a name="l00555"></a>00555         { }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557       <span class="keyword">protected</span>:
<a name="l00558"></a><a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a8f5268772ef01558ecb9bc0dca0dbb38">00558</a>         <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a8f5268772ef01558ecb9bc0dca0dbb38" title="Receive a timing response from the slave port.">recvTimingResp</a>(<a class="code" href="classPacket.html" title="A Packet is used to encapsulate a transfer between two objects in the memory system...">PacketPtr</a> pkt)
<a name="l00559"></a>00559         {
<a name="l00560"></a>00560             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;The KVM CPU doesn&apos;t expect recvTimingResp!\n&quot;</span>);
<a name="l00561"></a>00561             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00562"></a>00562         }
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a54bba8e6f4c9faca0054fefaa7cbe003">00564</a>         <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html#a54bba8e6f4c9faca0054fefaa7cbe003" title="Called by the slave port if sendTimingReq was called on this master port (causing...">recvReqRetry</a>()
<a name="l00565"></a>00565         {
<a name="l00566"></a>00566             <a class="code" href="base_2misc_8hh.html#a1445e207e36c97ff84c54b47288cea19">panic</a>(<span class="stringliteral">&quot;The KVM CPU doesn&apos;t expect recvReqRetry!\n&quot;</span>);
<a name="l00567"></a>00567         }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569     };
<a name="l00570"></a>00570 
<a name="l00572"></a><a class="code" href="classBaseKvmCPU.html#a91a536e52f05c96d88a83832db91b543">00572</a>     <a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html" title="KVM memory port.">KVMCpuPort</a> <a class="code" href="classBaseKvmCPU.html#a91a536e52f05c96d88a83832db91b543" title="Port for data requests.">dataPort</a>;
<a name="l00573"></a>00573 
<a name="l00575"></a><a class="code" href="classBaseKvmCPU.html#ab93dc5f839cd51bc9dd874e2444246d2">00575</a>     <a class="code" href="classBaseKvmCPU_1_1KVMCpuPort.html" title="KVM memory port.">KVMCpuPort</a> <a class="code" href="classBaseKvmCPU.html#ab93dc5f839cd51bc9dd874e2444246d2" title="Unused dummy port for the instruction interface.">instPort</a>;
<a name="l00576"></a>00576 
<a name="l00581"></a><a class="code" href="classBaseKvmCPU.html#a2242ff2f4ed324f075563acbfe087bb2">00581</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#a2242ff2f4ed324f075563acbfe087bb2" title="Is the gem5 context dirty? Set to true to force an update of the KVM vCPU state upon...">threadContextDirty</a>;
<a name="l00582"></a>00582 
<a name="l00587"></a><a class="code" href="classBaseKvmCPU.html#a2a3ff86d7ad1c0a61239ccd546483509">00587</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#a2a3ff86d7ad1c0a61239ccd546483509" title="Is the KVM state dirty? Set to true to force an update of the KVM vCPU state upon...">kvmStateDirty</a>;
<a name="l00588"></a>00588 
<a name="l00590"></a><a class="code" href="classBaseKvmCPU.html#a2052ce54091f66f08c0f0dee6904710f">00590</a>     <span class="keyword">const</span> <span class="keywordtype">long</span> <a class="code" href="classBaseKvmCPU.html#a2052ce54091f66f08c0f0dee6904710f" title="KVM internal ID of the vCPU.">vcpuID</a>;
<a name="l00591"></a>00591 
<a name="l00593"></a><a class="code" href="classBaseKvmCPU.html#ac4cdb6b70bc4e835df19e53f05dafd33">00593</a>     pthread_t <a class="code" href="classBaseKvmCPU.html#ac4cdb6b70bc4e835df19e53f05dafd33" title="ID of the vCPU thread.">vcpuThread</a>;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595   <span class="keyword">private</span>:
<a name="l00596"></a><a class="code" href="structBaseKvmCPU_1_1TickEvent.html">00596</a>     <span class="keyword">struct </span><a class="code" href="structBaseKvmCPU_1_1TickEvent.html">TickEvent</a> : <span class="keyword">public</span> <a class="code" href="classEvent.html">Event</a>
<a name="l00597"></a>00597     {
<a name="l00598"></a><a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a454f4963e287cb5c5c60cffe1f05098e">00598</a>         <a class="code" href="classBaseKvmCPU.html" title="Base class for KVM based CPU models.">BaseKvmCPU</a> &amp;cpu;
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a88dfeff012feedbf2e4a7d82d8257faf">00600</a>         <a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a88dfeff012feedbf2e4a7d82d8257faf">TickEvent</a>(<a class="code" href="classBaseKvmCPU.html" title="Base class for KVM based CPU models.">BaseKvmCPU</a> &amp;<a class="code" href="namespaceArmISA.html#a21f7b327cbedf079597394ec2c3f2a6d">c</a>)
<a name="l00601"></a>00601             : <a class="code" href="classEvent.html">Event</a>(<a class="code" href="classEventBase.html#aac6e2b4bf6313c24ed561ccb0a100d0e" title="CPU ticks must come after other associated CPU events (such as writebacks).">CPU_Tick_Pri</a>), cpu(c) {}
<a name="l00602"></a>00602 
<a name="l00603"></a><a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a2bfa1f81b2ac4a9597b88fed7e61651f">00603</a>         <span class="keywordtype">void</span> <a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a2bfa1f81b2ac4a9597b88fed7e61651f">process</a>() { cpu.tick(); }
<a name="l00604"></a>00604 
<a name="l00605"></a><a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a184d9a3e32d3990242dbbc54d8efb62d">00605</a>         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structBaseKvmCPU_1_1TickEvent.html#a184d9a3e32d3990242dbbc54d8efb62d" title="Return a C string describing the event.">description</a>()<span class="keyword"> const </span>{
<a name="l00606"></a>00606             <span class="keywordflow">return</span> <span class="stringliteral">&quot;BaseKvmCPU tick&quot;</span>;
<a name="l00607"></a>00607         }
<a name="l00608"></a>00608     };
<a name="l00609"></a>00609 
<a name="l00617"></a>00617     <a class="code" href="base_2types_8hh.html#a5c8ed81b7d238c9083e1037ba6d61643" title="Tick count type.">Tick</a> <a class="code" href="classBaseKvmCPU.html#a695920bf98a271297aa3d7fbceb845ac" title="Service MMIO requests in the mmioRing.">flushCoalescedMMIO</a>();
<a name="l00618"></a>00618 
<a name="l00623"></a>00623     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a928a5926b569a634bb8b39f4cad1e4b0" title="Setup a signal handler to catch the timer signal used to switch back to the monitor...">setupSignalHandler</a>();
<a name="l00624"></a>00624 
<a name="l00631"></a>00631     <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#ae38c2fb5c5bf9fa630fb6acd26d99bdf" title="Discard a (potentially) pending signal.">discardPendingSignal</a>(<span class="keywordtype">int</span> signum) <span class="keyword">const</span>;
<a name="l00632"></a>00632 
<a name="l00645"></a>00645     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#ad38c1ec8d42a60ebdc99add259fb5999" title="Thread-specific initialization.">startupThread</a>();
<a name="l00646"></a>00646 
<a name="l00648"></a>00648     <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#a7bf0f671f0e265e9c9dd6215365053db" title="Try to drain the CPU if a drain is pending.">tryDrain</a>();
<a name="l00649"></a>00649 
<a name="l00651"></a>00651     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a7bc12b93b0848b3f3d34fb2ea5c7f6a8" title="Execute the KVM_RUN ioctl.">ioctlRun</a>();
<a name="l00652"></a>00652 
<a name="l00654"></a><a class="code" href="classBaseKvmCPU.html#a7e834ee8f89ef9310d9b182ec658fcc5">00654</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseKvmCPU.html#a7e834ee8f89ef9310d9b182ec658fcc5" title="KVM vCPU file descriptor.">vcpuFD</a>;
<a name="l00656"></a><a class="code" href="classBaseKvmCPU.html#a2e3101897bc843bb19b057474d703c3c">00656</a>     <span class="keywordtype">int</span> <a class="code" href="classBaseKvmCPU.html#a2e3101897bc843bb19b057474d703c3c" title="Size of MMAPed kvm_run area.">vcpuMMapSize</a>;
<a name="l00665"></a><a class="code" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8">00665</a>     <span class="keyword">struct </span>kvm_run *<a class="code" href="classBaseKvmCPU.html#a921798423b9111b1796f4ec2eee8b2d8" title="Pointer to the kvm_run structure used to communicate parameters with KVM.">_kvmRun</a>;
<a name="l00670"></a><a class="code" href="classBaseKvmCPU.html#a68a8659a8d3179abe50a731f815ef747">00670</a>     <span class="keyword">struct </span>kvm_coalesced_mmio_ring *<a class="code" href="classBaseKvmCPU.html#a68a8659a8d3179abe50a731f815ef747" title="Coalesced MMIO ring buffer.">mmioRing</a>;
<a name="l00672"></a><a class="code" href="classBaseKvmCPU.html#a89561c02c2cdd8e8f03999db3ad6ad11">00672</a>     <span class="keyword">const</span> <span class="keywordtype">long</span> <a class="code" href="classBaseKvmCPU.html#a89561c02c2cdd8e8f03999db3ad6ad11" title="Cached page size of the host.">pageSize</a>;
<a name="l00673"></a>00673 
<a name="l00674"></a><a class="code" href="classBaseKvmCPU.html#aff1a2d1464cf96917d3c73470f58f6a9">00674</a>     <a class="code" href="structBaseKvmCPU_1_1TickEvent.html">TickEvent</a> <a class="code" href="classBaseKvmCPU.html#aff1a2d1464cf96917d3c73470f58f6a9">tickEvent</a>;
<a name="l00675"></a>00675 
<a name="l00686"></a>00686     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a3906dd2803114a8f19e2c20edd7f3d6c" title="Setup an instruction break if there is one pending.">setupInstStop</a>();
<a name="l00687"></a>00687 
<a name="l00690"></a>00690     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#af3b88cae602a87fe804e9d6cb55c2b52" title="Setup hardware performance counters.">setupCounters</a>();
<a name="l00691"></a>00691 
<a name="l00702"></a>00702     <span class="keywordtype">void</span> <a class="code" href="classBaseKvmCPU.html#a5cc19a5e748c206aac1029fb2275afff" title="Setup the guest instruction counter.">setupInstCounter</a>(uint64_t period = 0);
<a name="l00703"></a>00703 
<a name="l00705"></a><a class="code" href="classBaseKvmCPU.html#a6dcca97a3389a195e02b8bc86f3645d8">00705</a>     uint64_t <a class="code" href="classBaseKvmCPU.html#a6dcca97a3389a195e02b8bc86f3645d8" title="Currently active instruction count breakpoint.">activeInstPeriod</a>;
<a name="l00706"></a>00706 
<a name="l00715"></a><a class="code" href="classBaseKvmCPU.html#aea857e4c19de0868d0ee8af9ee3d55fb">00715</a>     <a class="code" href="classPerfKvmCounter.html" title="An instance of a performance counter.">PerfKvmCounter</a> <a class="code" href="classBaseKvmCPU.html#aea857e4c19de0868d0ee8af9ee3d55fb" title="Guest cycle counter.">hwCycles</a>;
<a name="l00716"></a>00716 
<a name="l00728"></a><a class="code" href="classBaseKvmCPU.html#afca88c702e9049ff52ff54ef46125c67">00728</a>     <a class="code" href="classPerfKvmCounter.html" title="An instance of a performance counter.">PerfKvmCounter</a> <a class="code" href="classBaseKvmCPU.html#afca88c702e9049ff52ff54ef46125c67" title="Guest instruction counter.">hwInstructions</a>;
<a name="l00729"></a>00729 
<a name="l00737"></a><a class="code" href="classBaseKvmCPU.html#a80b133297febc24ee0fd1180ff29202e">00737</a>     <span class="keywordtype">bool</span> <a class="code" href="classBaseKvmCPU.html#a80b133297febc24ee0fd1180ff29202e" title="Does the runTimer control the performance counters?">perfControlledByTimer</a>;
<a name="l00746"></a><a class="code" href="classBaseKvmCPU.html#aa018c869ec7b83023f122bedf9268994">00746</a>     std::unique_ptr&lt;BaseKvmTimer&gt; <a class="code" href="classBaseKvmCPU.html#aa018c869ec7b83023f122bedf9268994" title="Timer used to force execution into the monitor after a specified number of simulation...">runTimer</a>;
<a name="l00747"></a>00747 
<a name="l00749"></a><a class="code" href="classBaseKvmCPU.html#a68510abea47eae94e7688617fb01ad32">00749</a>     <span class="keywordtype">float</span> <a class="code" href="classBaseKvmCPU.html#a68510abea47eae94e7688617fb01ad32" title="Host factor as specified in the configuration.">hostFactor</a>;
<a name="l00750"></a>00750 
<a name="l00756"></a><a class="code" href="classBaseKvmCPU.html#ae81629c1d898d8972c08024e006155e2">00756</a>     <a class="code" href="classDrainManager.html" title="This class coordinates draining of a System.">DrainManager</a> *<a class="code" href="classBaseKvmCPU.html#ae81629c1d898d8972c08024e006155e2" title="Drain manager to use when signaling drain completion.">drainManager</a>;
<a name="l00757"></a>00757 
<a name="l00758"></a>00758   <span class="keyword">public</span>:
<a name="l00759"></a>00759     <span class="comment">/* @{ */</span>
<a name="l00760"></a><a class="code" href="classBaseKvmCPU.html#a5161d6436b08aa367b2000806fe1e5f8">00760</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a5161d6436b08aa367b2000806fe1e5f8">numInsts</a>;
<a name="l00761"></a><a class="code" href="classBaseKvmCPU.html#ad1351d57530b3ac5f5299fcda03d31a5">00761</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#ad1351d57530b3ac5f5299fcda03d31a5">numVMExits</a>;
<a name="l00762"></a><a class="code" href="classBaseKvmCPU.html#adcba58d8641d82284275bb01e1ae93fb">00762</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#adcba58d8641d82284275bb01e1ae93fb">numVMHalfEntries</a>;
<a name="l00763"></a><a class="code" href="classBaseKvmCPU.html#a1a010b1f0693ae392c63c95c6d0ea6ab">00763</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a1a010b1f0693ae392c63c95c6d0ea6ab">numExitSignal</a>;
<a name="l00764"></a><a class="code" href="classBaseKvmCPU.html#a9e49ef5fb12791a1db1cfe6ae08fdb5d">00764</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a9e49ef5fb12791a1db1cfe6ae08fdb5d">numMMIO</a>;
<a name="l00765"></a><a class="code" href="classBaseKvmCPU.html#a7bce04f0abf294aca4d387b49c96ba5f">00765</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a7bce04f0abf294aca4d387b49c96ba5f">numCoalescedMMIO</a>;
<a name="l00766"></a><a class="code" href="classBaseKvmCPU.html#aa4429e17626f97f4b62feca39b33d945">00766</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#aa4429e17626f97f4b62feca39b33d945">numIO</a>;
<a name="l00767"></a><a class="code" href="classBaseKvmCPU.html#a8a6e72dbcfbfc1afcdb7d9c94de162f2">00767</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a8a6e72dbcfbfc1afcdb7d9c94de162f2">numHalt</a>;
<a name="l00768"></a><a class="code" href="classBaseKvmCPU.html#a452e50a7b2262714498826e45339e7b5">00768</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a452e50a7b2262714498826e45339e7b5">numInterrupts</a>;
<a name="l00769"></a><a class="code" href="classBaseKvmCPU.html#a619c8830cb550ef275dd4a0a47edef8a">00769</a>     <a class="code" href="classStats_1_1Scalar.html" title="This is a simple scalar statistic, like a counter.">Stats::Scalar</a> <a class="code" href="classBaseKvmCPU.html#a619c8830cb550ef275dd4a0a47edef8a">numHypercalls</a>;
<a name="l00770"></a>00770     <span class="comment">/* @} */</span>
<a name="l00771"></a>00771 
<a name="l00773"></a><a class="code" href="classBaseKvmCPU.html#adc8cb4eaa0af1bf66a8bf06674675531">00773</a>     <a class="code" href="base_2types_8hh.html#ae1475755791765b8e6f6a8bb091e273e" title="Statistics counter type.">Counter</a> <a class="code" href="classBaseKvmCPU.html#adc8cb4eaa0af1bf66a8bf06674675531" title="Number of instructions executed by the CPU.">ctrInsts</a>;
<a name="l00774"></a>00774 };
<a name="l00775"></a>00775 
<a name="l00776"></a>00776 <span class="preprocessor">#endif</span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"><address style="align: right;"><small>
Generated on Mon Dec 7 02:33:08 2015 for gem5 by <a href="http://www.doxygen.org/index.html"> doxygen</a> 1.6.1</small></address>

</body>
</html>
